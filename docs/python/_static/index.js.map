{"version":3,"sources":["webpack://algorithmx-jupyter/webpack/bootstrap","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/index.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/layout.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/rectangle.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/shortestpaths.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/linklengths.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/descent.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/vpsc.ts","webpack://algorithmx-jupyter/./src/version.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/powergraph.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/rbtree.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/pqueue.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/geom.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/handledisconnected.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/gridrouter.ts","webpack://algorithmx-jupyter/./src/index.ts","webpack://algorithmx-jupyter/./src/widget.ts","webpack://algorithmx-jupyter/external \"@jupyter-widgets/base\"","webpack://algorithmx-jupyter/./src/buttons.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/adaptor.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/d3adaptor.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/d3v3adaptor.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/d3v4adaptor.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/layout3d.ts","webpack://algorithmx-jupyter/./node_modules/webcola/WebCola/src/batch.ts","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/namespaces.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/namespace.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/creator.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selector.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selectorAll.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/matcher.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/sparse.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/enter.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/data.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/sort.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/attr.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/window.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/style.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/property.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/classed.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/text.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/html.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/raise.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/lower.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/insert.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/remove.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/clone.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/on.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/dispatch.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/index.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/select.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/selectAll.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/filter.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/constant.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/exit.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/merge.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/order.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/call.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/nodes.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/node.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/size.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/empty.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/each.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/append.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selection/datum.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/select.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/local.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/sourceEvent.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/point.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/mouse.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/touch.js","webpack://algorithmx-jupyter/./node_modules/d3-dispatch/src/dispatch.js","webpack://algorithmx-jupyter/./node_modules/d3-timer/src/timer.js","webpack://algorithmx-jupyter/./node_modules/d3-timer/src/timeout.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/schedule.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/interrupt.js","webpack://algorithmx-jupyter/./node_modules/d3-color/src/define.js","webpack://algorithmx-jupyter/./node_modules/d3-color/src/color.js","webpack://algorithmx-jupyter/./node_modules/d3-color/src/math.js","webpack://algorithmx-jupyter/./node_modules/d3-color/src/lab.js","webpack://algorithmx-jupyter/./node_modules/d3-color/src/cubehelix.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/basis.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/constant.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/color.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/rgb.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/basisClosed.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/number.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/string.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/transform/parse.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/transform/index.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/zoom.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/hsl.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/hcl.js","webpack://algorithmx-jupyter/./node_modules/d3-interpolate/src/cubehelix.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/tween.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/interpolate.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/attr.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/attrTween.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/delay.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/duration.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/ease.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/on.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/remove.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/selection.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/styleTween.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/text.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/index.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/linear.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/quad.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/cubic.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/select.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/selectAll.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/filter.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/merge.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/transition.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/transition/style.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/poly.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/sin.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/exp.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/circle.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/bounce.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/back.js","webpack://algorithmx-jupyter/./node_modules/d3-ease/src/elastic.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/selection/transition.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/selection/index.js","webpack://algorithmx-jupyter/./node_modules/d3-transition/src/selection/interrupt.js","webpack://algorithmx-jupyter/./node_modules/d3-drag/src/noevent.js","webpack://algorithmx-jupyter/./node_modules/d3-drag/src/nodrag.js","webpack://algorithmx-jupyter/./node_modules/d3-drag/src/constant.js","webpack://algorithmx-jupyter/./node_modules/d3-drag/src/event.js","webpack://algorithmx-jupyter/./node_modules/d3-drag/src/drag.js","webpack://algorithmx-jupyter/./node_modules/d3-path/src/path.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/constant.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/math.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/arc.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/linear.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/point.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/line.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/area.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/descending.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/identity.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/pie.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/radial.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/lineRadial.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/areaRadial.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/pointRadial.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/array.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/link/index.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/circle.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/cross.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/diamond.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/star.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/square.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/triangle.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol/wye.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/symbol.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/noop.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/basis.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/basisClosed.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/basisOpen.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/bundle.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/cardinal.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/cardinalClosed.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/cardinalOpen.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/catmullRom.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/catmullRomClosed.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/catmullRomOpen.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/linearClosed.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/monotone.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/natural.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/curve/step.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/offset/none.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/order/none.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/stack.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/offset/expand.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/offset/diverging.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/offset/silhouette.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/offset/wiggle.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/order/ascending.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/order/descending.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/order/insideOut.js","webpack://algorithmx-jupyter/./node_modules/d3-shape/src/order/reverse.js","webpack://algorithmx-jupyter/./node_modules/d3-zoom/src/constant.js","webpack://algorithmx-jupyter/./node_modules/d3-zoom/src/event.js","webpack://algorithmx-jupyter/./node_modules/d3-zoom/src/transform.js","webpack://algorithmx-jupyter/./node_modules/d3-zoom/src/noevent.js","webpack://algorithmx-jupyter/./node_modules/d3-zoom/src/zoom.js","webpack://algorithmx-jupyter/./node_modules/algorithmx/dist/algorithmx.es.js","webpack://algorithmx-jupyter/./node_modules/d3-selection/src/selectAll.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EventType","isGroup","g","leaves","groups","_canvasSize","_linkDistance","_defaultNodeSize","_linkLengthCalculator","_linkType","_avoidOverlaps","_handleDisconnected","_running","_nodes","_groups","_rootGroup","_links","_constraints","_distanceMatrix","_descent","_directedLinkConstraints","_threshold","_visibilityGraph","_groupCompactness","event","linkAccessor","getSourceIndex","Layout","getTargetIndex","setLength","setLinkLength","getType","on","e","listener","this","trigger","type","kick","tick","_alpha","end","alpha","stress","_lastStress","length","locks","clear","fixed","px","py","x","y","add","s1","rungeKutta","updateNodePositions","nodes","v","forEach","Math","max","source","target","Array","padding","parent","gi","filter","powerGraphGroups","f","powergraph","getGroups","avoidOverlaps","arguments","handleDisconnected","flowLayout","axis","minSeparation","getMinSeparation","links","constraints","distanceMatrix","size","defaultNodeSize","groupCompactness","linkDistance","linkType","convergenceThreshold","start","getLinkLength","link","getLinkType","symmetricDiffLinkLengths","idealLength","w","jaccardLinkLengths","initialUnconstrainedIterations","initialUserConstraintIterations","initialAllConstraintsIterations","gridSnapIterations","keepRunning","distances","N","h","G","ao","index","Calculator","DistanceMatrix","Descent","createSquareMatrix","u","weight","D","j","strength","idealDistance","addAttraction","curConstraints","concat","generateDirectedEdgeConstraints","threshold","initialLayout","project","Projection","projectFunctions","run","separateOverlappingComponents","snapStrength","snapGridSize","width","numGridSnapNodes","scaleSnapByMaxH","G0","resume","iterations","edges","map","vs","push","gg","height","graphs","separateGraphs","applyPacking","bounds","setXCentre","setYCentre","stop","prepareEdgeRouting","nodeMargin","TangentVisibilityGraph","inflate","vertices","routeEdge","edge","ah","draw","lineData","vg2","P","V","E","port1","port2","addPoint","addEdgeIfVisible","shortestPath","id","PathFromNodeToNode","route","makeEdgeBetween","innerBounds","sourceIntersection","arrowStart","q","rayIntersection","makeEdgeTo","linkId","dragStart","storeOffset","dragOrigin","stopNode","origin","_dragGroupOffsetX","_dragGroupOffsetY","cx","cy","drag","position","dragEnd","mouseOver","mouseOut","reduce","union","Rectangle","empty","computeGroupBounds","X","Y","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","overlapX","ux","vx","overlapY","uy","vy","dx","dy","min","lineIntersections","x1","y1","x2","y2","sides","intersections","lineIntersection","ints","x3","y3","x4","y4","dx12","dx34","dy12","dy34","denominator","dx31","dy31","a","b","pad","si","ti","sqrt","al","targetIntersection","pos","prev","makeRBTree","next","isOpen","compareEvents","RBTree","xRect","getCentre","getOpen","getClose","getSize","makeRect","open","close","center","findNeighbours","scanline","forward","reverse","it","findIter","uovervX","insert","yRect","generateGroupConstraints","root","minSep","isContained","gn","ln","childConstraints","ccs","rs","minVar","desiredPosition","maxVar","variable","cs","generateConstraints","cOut","cIn","left","right","gapAdjustment","gap","vars","rect","console","assert","events","Node","Event","sort","remove","makeConstraint","sep","Constraint","visitNeighbours","mkcon","iterator","Variable","generateXConstraints","solver","Solver","solve","generateYConstraints","IndexedVariable","rootGroup","variables","createConstraints","w2","h2","stiffness","createSeparation","equality","makeFeasible","dim","offsets","node","nextPos","createAlignment","xConstraints","yConstraints","slice","offset","isSep","setupVariablesAndBounds","x0","y0","desired","getDesired","fixedWeight","ix","iy","xProject","generateXGroupConstraints","xmin","xmax","p2","yProject","generateYGroupConstraints","ymin","ymax","updateNodeBounds","updateGroupBounds","starting","setStartingPositions","setDesiredPositions","distance","neighbours","es","getLength","Neighbour","dijkstraNeighbours","DistancesFromNode","PathFromNodeToNodeWithPrevCost","prevCost","PriorityQueue","qu","QueueEntry","visitedFrom","pop","neighbour","viduid","cc","path","dest","MAX_VALUE","reduceKey","unionCount","keys","intersectionCount","computeLinkLengths","la","addNeighbours","getNeighbours","numVertices","stack","components","strongConnect","lowlink","onStack","out","component","stronglyConnectedComponents","ui","vi","isEmpty","apply","Locks","random","PseudoRandom","k","H","Hd","ia","ib","xtmp","minD","M","offsetDir","getNextBetween","computeDerivatives","d2","Huu","maxH","maxDisplaces","sd2","rd","isFinite","D2","gs","l3","hs","log","numNodes","xiu","abs","dotProd","rightMultiply","computeStepSize","numerator","reduceStress","takeDescentStep","computeStress","copy","stepAndProject","stepSize","mApply","matrixApply","computeNextPosition","beta","converged","mid","disp","nMinus1","rl","zeroDistance","seed","range","getNext","scale","AB","AD","A2","addVariable","ai","bi","wi","getPosn","PositionStats","active","unsatisfiable","slack","dfdv","block","ps","posn","ff","updateWeightedPosition","compute_lm","postAction","_dfdv","lm","populateSplitBlock","traverse","visit","acc","findMinLM","findMinLMBetween","lv","rv","findPath","to","endFound","isActiveDirectedPathBetween","split","Block","createSplitBlock","startVar","splitBetween","vl","vr","bs","constraint","lb","rb","mergeAcross","dist","cost","sum","list","blockInd","last","swapBlock","merge","updateBlockPositions","inactive","LAGRANGIAN_TOLERANCE","nb","Blocks","mostViolated","minSlack","deletePoint","ZERO_UPPERBOUND","satisfy","lastcost","spans","lowerBound","upperBound","desiredCenter","leftMost","rightMost","leftMostSize","rightMostSize","vLower","vUpper","newCenters","pkg","version","PowerEdge","roots","initModulesFromGroup","ModuleSet","Module","R","outgoing","incoming","group","moduleSet","child","definition","prop","LinkSets","inInt","intersection","outInt","children","update","forAll","ms","linktype","nls","count","rootMerges","merges","ctr","i_","nEdges","greedyMerge","getGroupHierarchy","retargetedEdges","toGroups","isLeaf","gid","isIsland","isPredefined","allEdges","Configuration","getEdges","edgetype","table","other","result","contains","sets","forAllModules","lt","powerEdges","data","res","_root","iter","_comparator","_cursor","_ancestors","get_child","find","_bound","cmp","Iterator","each","cb","reach","cur","TreeBase","tree","_tree","_minNode","save","_maxNode","red","dir","set_child","val","comparator","ret","head","undefined","gp","ggp","is_red","dir2","single_rotate","double_rotate","found","sr","sibling","gpc","elem","subheaps","toString","selector","str","needComma","subheap","isHeap","lessThan","every","obj","PairingHeap","heap2","removeMin","mergePairs","firstPair","remaining","decreaseKey","newValue","setHeapNode","newHeap","pairingNode","top","arg","args","heapNode","newKey","Point","LineSegment","P0","P1","P2","above","vj","isLeft","below","Rtangent_PointPolyC","dnC","floor","Ltangent_PointPolyC","W","t1","t2","cmp1","cmp2","ix1","ix2","done","tangent_PolyPolyC","PolyPoint","S","minmax","maxmin","maxmax","bot","atan2","RLtangent_PolyPolyC","BiTangent","BiTangents","TVGPoint","polyid","polyvertid","vv","VisibilityVertex","VisibilityEdge","g0","pj","Pi","Pj","tangents","i1","i2","intersectsPolys","Vclosed","poly","rtan","ltan","intersects","int","bt","v1","v2","v3","w1","w3","v1v2w2","v2w1w2","v2w2w3","w1w2v2","w2v1v2","w2v2v3","ll","rr","lr","isAnyPInQ","isPointInsidePoly","packingOptions","node_size","desired_ratio","svg_width","svg_height","real_width","real_height","min_width","global_bottom","line","step","max_width","put_rect","space_left","bottom","graph","min_x","min_y","max_x","max_y","array","calculate_bb","curr_best_f","curr_best","get_entire_width","iterationCounter","f_x1","f_x2","flag","df","corner","put_nodes_to_right_positions","marks","ways","clusters","n1","n2","explore_node","is_new","adjacent","leaf","NodeWrapper","Vert","mf","LongestCommonSubsequence","findMatch","tr","mr","reversed","match","getSequence","originalnodes","accessor","groupPadding","getBounds","getChildren","cols","getGridLines","rows","ports","backToFront","getDepth","colMids","midPoints","rowMids","rowx","rowX","coly","colY","hlines","vlines","lines","verts","li","intersect","isHoriz","delta","avg","columns","ls","overlapping","toUpperCase","col","splice","indexOf","depth","mids","findLineage","lineage","findAncestorPathBetween","aa","ba","commonAncestor","lineages","siblingObstacles","lineageLookup","obstacles","getSegmentSets","routes","vsegments","ei","edgeid","sdx","vsegmentsets","segmentset","segments","nudgeSegs","leftOf","s2","e1","e2","lind","rind","nudgeSegments","GridRouter","ss","openCount","routeEdges","nudgeGap","routePaths","order","orderEdges","makeSegments","unreverseEdges","segment","angleBetween2Lines","line1","line2","angle1","angle2","diff","PI","getOrder","pairs","edgeOrder","lcs","copyPoint","isStraight","obstacleLookup","passableEdges","pathPoints","getRoutePath","cornerradius","arrowwidth","arrowheight","routepath","arrowpath","angle","arrowtip","arrowcorner1","arrowcorner2","AlgorithmxModel","DOMWidgetModel","super","defaults","_model_name","_model_module","_model_module_version","_view_name","_view_module","_view_module_version","show_buttons","serializers","AlgorithmxView","DOMWidgetView","client","canvas","eventIndex","stopped","eventStr","JSON","parse","dispatch","model","playEvents","newEvents","immediateCanvas","eventQ","duration","cancelall","startall","zoomkey","setTimeout","svgattr","resetCanvas","element","el","canvasDiv","querySelector","removeChild","buttonDiv","removeCanvas","playAllEvents","stopall","document","createElement","style","buttonPlay","buttonUtils","createButton","setIcon","clickStart","clickStop","buttonRestart","clickRestart","appendChild","setAttribute","algorithmx","subscribe","fullEvent","fullEventStr","stringify","send","renderButtons","eventsChanged","__WEBPACK_EXTERNAL_MODULE__17__","iconName","onclick","button","backgroundColor","display","textAlign","marginRight","cssFloat","onmouseover","cursor","onmousedown","onmouseup","onmouseleave","icon","fontSize","color","lineHeight","options","dragstart","dragend","eventType","LayoutAdaptor","d3Context","isD3V3","d3v3","D3StyleLayoutAdaptor","d3v4","d3","d3layout","behavior","d3event","timer","subject","actualLength","Link3D","z","Node3D","idealLinkLength","useJaccardLinkLengths","Layout3D","dims","linkLength","LinkAccessor","descent","pgLayout","margin","groupMargin","cola","routerNode","gridRouterNodes","powerGraph","grouppadding","sourceInd","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","space","local","creatorInherit","ownerDocument","uri","namespaceURI","documentElement","createElementNS","creatorFixed","fullname","namespace","none","querySelectorAll","matcher","matches","vendorMatches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector","EnterNode","datum","_next","_parent","__data__","constructor","insertBefore","bindIndex","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","ascending","NaN","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","classList","ClassList","_node","_names","getAttribute","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","join","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","parentNode","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","filterEvents","mouseenter","mouseleave","filterContextListener","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","parseTypenames","typenames","onRemove","typename","__on","removeEventListener","capture","onAdd","wrap","addEventListener","customEvent","that","sourceEvent","dispatchEvent","params","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","Selection","parents","_parents","select","subgroups","subnode","subgroup","selectAll","selectorAll","enterGroup","updateGroup","previous","i0","_enter","_exit","sparse","groups0","groups1","selection","m0","m1","group0","group1","compareNode","compare","sortgroups","sortgroup","callback","attr","getAttributeNS","classed","text","html","append","creator","before","clone","deep","nextId","Local","_","set","current","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","clientLeft","clientTop","changedTouches","identifier","touches","touch","noop","Error","Dispatch","types","T","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","delay","time","restart","wake","timerFlush","t0","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","elapsed","emptyOn","emptyTween","schedules","__transition","self","tween","state","ease","timing","init","schedule","factory","extend","Color","reI","reN","reP","reHex3","reHex6","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","format","toLowerCase","exec","Rgb","parseInt","rgbn","rgba","hsla","rgbConvert","rgb","opacity","hex","round","Hsl","hslConvert","hsl","hsl2rgb","m2","define","displayable","brighter","pow","darker","isNaN","deg2rad","rad2deg","labConvert","Lab","Hcl","cos","sin","rgb2lrgb","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","hcl","A","B","C","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","basis","v0","t3","cosh","sinh","linear","gamma","nogamma","exponential","rgbGamma","rgbSpline","spline","colors","values","reA","reB","cssNode","cssRoot","cssView","svgNode","am","bm","lastIndex","number","one","zero","degrees","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","atan","interpolateTransform","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","interpolateTransformCss","transform","decompose","interpolateTransformSvg","baseVal","consolidate","matrix","rho","SQRT2","exp","ux0","p0","uy0","w0","ux1","p1","uy1","d1","b0","b1","r0","r1","coshr0","hue","cubehelixGamma","cubehelix","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","_id","interpolate","value1","value00","interpolate0","value0","value10","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","styleTween","Transition","_name","newId","selection_prototype","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","inherit","id0","id1","styleRemoveEnd","polyIn","custom","exponent","polyOut","polyInOut","pi","halfPi","sinIn","sinOut","sinInOut","expIn","expOut","expInOut","circleIn","circleOut","circleInOut","bounceIn","bounceOut","bounceInOut","backIn","overshoot","backOut","backInOut","tau","elasticIn","asin","amplitude","period","elasticOut","elasticInOut","defaultTiming","interrupt","nopropagation","stopImmediatePropagation","preventDefault","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","DragEvent","defaultFilter","defaultContainer","defaultSubject","defaultTouchable","mousedownx","mousedowny","mousemoving","touchending","container","touchable","gestures","listeners","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mouse","mousemoved","mouseupped","nodrag","sublisteners","clickDistance","tauEpsilon","Path","_x0","_y0","_x1","_y1","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","a1","ccw","cw","da","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","x10","y10","x32","y32","cornerTangents","rc","lo","ox","oy","x11","y11","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cornerRadius","padRadius","context","buffer","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","oc","ax","ay","bx","by","kc","lc","centroid","Linear","_context","areaStart","_line","areaEnd","lineStart","_point","lineEnd","defined","curve","output","defined0","area","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","sortValues","descending","pie","arcs","pa","curveRadialLinear","curveRadial","Radial","_curve","radial","lineRadial","radius","lineStartAngle","lineEndAngle","lineInnerRadius","lineOuterRadius","linkSource","linkTarget","argv","curveHorizontal","curveVertical","pointRadial","p3","linkHorizontal","linkVertical","linkRadial","tan30","tan30_2","kr","kx","ky","sqrt3","symbols","circle","cross","diamond","square","star","triangle","wye","symbol","Basis","BasisClosed","_x2","_x3","_x4","_y2","_y3","_y4","BasisOpen","Bundle","_basis","_beta","_x","_y","bundle","_k","Cardinal","tension","cardinal","CardinalClosed","_x5","_y5","CardinalOpen","_l01_a","_l01_2a","_l12_a","_l12_2a","_l23_a","_l23_2a","CatmullRom","x23","y23","catmullRom","CatmullRomClosed","CatmullRomOpen","LinearClosed","sign","slope3","h0","h1","s0","slope2","MonotoneX","MonotoneY","ReflectContext","monotoneX","monotoneY","Natural","controlPoints","_t0","Step","_t","stepBefore","stepAfter","series","stackValue","oz","kz","sz","sij","ki","yp","yn","sij0","s3","sk","sums","tops","bottoms","ZoomEvent","Transform","applyX","applyY","invert","location","invertX","invertY","rescaleX","domain","rescaleY","defaultExtent","SVGElement","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","extent","translateExtent","EnumDispatchType","EnumReceiveType","EnumErrorType","touchstarting","constrain","wheelDelta","scaleExtent","zoom","wheeled","dblclicked","Gesture","wheel","wheelidled","moved","k1","shiftKey","started","touch0","touch1","l0","l1","dp","dl","collection","scaleBy","scaleTo","k0","translateBy","translateTo","emit","__assign","assign","mapDict","dict","func","newDict","enumValues","enumeration","isNumStr","isDict","isArray","isDictEmpty","filterError","filterDict","filterFn","entries","_a","_b","build","builder","instance","setPrototypeOf","AttrType","getAttrEntry","sel","createFullAttr","ids","createParentAttr","attrEvent","eventData","attributes","animation","highlight","queue","queueEvent","queues","String","mergeDictRec","merged","updateAnimation","animationAttr","addListener","fn","triggerListener","construct","visible","initattr","attrs","seconds","linger","pause","cancel","broadcast","message","listen","onReceive","onCallback","substr","svgMixinAttrBuilder","builder$1","align","font","labelSelection","builder$2","label","labels","shape","draggable","click","onClick","hoverin","onHoverin","hover","hoverout","onHoverout","builder$3","directed","thickness","flip","builder$4","edgeId","orderedNodes","initAttr","edgelengths","lengthInfo","pan","zoom$$1","panlimit","box","zoomlimit","limit","required","canvasSelection","handler","event$$1","entered","error","receiveHandler","getQueueState","busy","initQueue","updateQueue","executeNext","force","queueState","execute","event_1","executeQueueUpdate","stateFn","taskFn","resultTask","newState","task","modifyMultipleQueues","resultState","isQueueUpdateEvent","queueTask_1","nextTask_1","nextTask_2","d3$2","freeze","zoomIdentity","isTransition","COLORS","parseColor","parsedColor","dashToUpperCamel","includes","renderId","newHash","charCodeAt","selectOrAdd","addFn","selected","charAt","selectCanvasContainer","selectCanvas","selectCanvasInner","selectNodeGroup","selectNode","renderId$$1","selectEdge","flatten","renderData","mapped","getEntry","combine","renderDict","changesDict","changes","hasChanged","renderAttr","markKeysForUpdate","newChanges","canAnimate","transition$1","newTransition","parseTime","isAnimationImmediate","transAnimate","trans","easeFn","animate","onChanged","render","renderFn","renderHighlight","renderNoHighlight","renderStartFn","renderEndFn","initTrans","renderLookup","entry","renderLookupRemovals","MARKER_ARROW","viewBox","getFullId","edgeSel","markerId","markerSel","select$1","defsSel","fullId","marker","renderVisibleLookup","renderSvgAttr","valueFn","renderSvgAttrMixin","precessKey","renderVisible","transition$$1","animateAdd","animateRemove","renderRemove","preprocess","visibleData","renderElement","renderDataFull","renderElementLookup","renderElementRemove","getPathLength","pathSel","getTotalLength","reverseDirection","colorData","tweenOverlay","overlaySel","pathLengthFn","beginTraverse","pathLength","renderTraverse","overlaySelector","pathLengthInit","highlightTraverse","animDuration_1","endDuration_1","removeTrans","EnumAlign","extendRecordDef","extendDef","baseDef","keyOrder","Record","Boolean","animationDefaults","svgMixinDefEntries","Lookup","svgMixinDefKeys","svgMixinDefaults","angleToRad","angleDeg","angleToDeg","angleRad","restrictAngle","EnumVarSymbol","ALIGN_ANGLES","definition$1","validValues","defaults$1","animationDefaults$1","alignFromAngle","rotate$$1","testAngle","radialAligns","prevAngle","curAngle","nextAngle","init$1","isAlignTop","isAlignBottom","render$2","labelData","changedRadialAlign","alignData","textSel","combinedTextAlign","textData","splitText","line$$1","initOffset","renderText","combinedPos","posData","polarX","polarY","rotation","rotateStr","renderPos","renderAlign","selectLabelGroup$1","render$3","labelGroup","marketTarget","render$1","markerSelector","renderColor","overlay","selectOverlay","getChildDef","def","isDefRecord","isDefLookup","isDefArray","isDefPrimitive","prevAttr","isAttrEmpty","mergedChanges","emptyAttr","newLookupEntries","reduceAttr","reduceChanges","subtractPartial","subtract","subtractFull","keepIfDifferent","newAttr","getNullEntries","nullEntries","reduced","fillLookupEntries","referenceAttr","parseSingleTerm","term","reverseIndex","findIndex","substring","varIndex","rawNumStr","varStr","numStr","num","parseFloat","parseExprObj","formatted","formattedExpr","numExpr","isExpressionNum","isExpression","getExpressionVars","getEvaluatedChanges","varSymbols_1","expression","evaluateNum","EnumShape","getExpr","getNonExpr","getPermanentExpr","EnumCurve","definition$2","validVars","Radius","Width","Height","defaults$2","animationDefaults$2","radiusAtAngle","rx","ry","cornerAngle","radiusAtAngleRect","initChildren","newLabels","prevRadialLabels","newRadialLabelChanges","newOtherLabelChanges","newRadialLabels","defaultAngle","newOtherLabels","getVariables","_c","hasWidth","hasHeight","getLabelVariables","initPos","sqrtOffset","sizeInit","halfSize","difference","rawPos","getLiveNodeData","canvasSel","layoutState","canvasAttr","nodeId","nodeGroup","nodeAttr","nodeLayout","nodeSel","selWidth","selHeight","getPointAtNodeBoundary","fullOffset","getLiveEdgeData","edgeAttr","sourceData","targetData","targetOffset","MARKER_SIZE","adjNodes","adjacentNodes","sourcePos","anglesAbs","sortedAngles","angleDiffs","maxDifIndex","maxIndex","getLoopAngle","sourceOffset","sourceId","targetId","shouldFlip","renderEdgePath","edgePath","pointBeforeSource","pointBeforeTarget","angleAtSource","angleAtTarget","pointAtSource","pointAtTarget","pointAtSourceRel","pointAtTargetRel","curveFn","lineFunction","updateEdges","layout","origin_1","sourcePoint","targetPoint","getEdgeOrigin","updateCanvas","updateNodes","fromAttrChanges","changedHeight","initCola","init$3","didUpdateNodes","didUpdateLayout$1","didUpdateEdges","didUpdateLayout$2","didUpdateCanvas","didUpdateLayout","newNodes","nodeChanges","mergeLookup","updateCola$1","newEdges","updateCola$2","fromAttr","createLookup","updateCola","adjacency","initMatrix","withSource","calcAdjacency","EnumEdgeLengthType","definition$3","defaults$3","labelDefaults","animationDefaults$3","initChildren$1","pathMidY","pathMidYNum","incrementMatrix","sourceAdj","targetAdj","sourceLookup","targetLookup","initLookup","prevEdges","newMatrix","ceil","edgeDefaults","initEdge","EnumAnimationType","EnumAnimationEase","definition$4","CanvasWidth","CanvasHeight","horizontal","vertical","defaults$4","labelDefaults$1","animationDefaults$4","initChildren$2","initNode","defaultLabel","init$2","nodeChildrenInit","edgeChildrenInit","evaluate$2","evaluated","expr","evalChanges","getVariables$1","newEval","evalNodeChanges","labelExpr","evaluate$1","initialize","prevState","canvasSize","prevStateNew","svgBase","getCanvasSize","changesNew","evaluate$3","prevExpr","fullNonExprInit","changedExpr","changedExprEval","fullNonExpr","permanentExprEval","permanentExprChanges","changesEval","definition$5","defaults$5","createFullDef","bodyDef","endDef","definition$6","addEndpoints","anim","curAnim","newAnim","newCurAnim","getRelevantChanges","prevChild","process","changesForced","changesFull","animChanges","animDefaultsRegular","animDefaultsFull","formatPath","preprocess$1","info","newInfo","fullInfo","preprocessPrimitive","preprocessRecord","preprocessLookup","preprocessArray","errorText","replace","opIndex","lastIndexOf","term1","term2","exprObject","parseExpr","record","valueOrArrayOrDict","invalidEntries","processUpdate","attrData","preAttr","changesInit","prevNodes","changedNodes","removeInvalidEdges","attrMerged","attrRemoved","exprChanged","expressions","validateAnim","getRenderData","processed","preprocess$2","shapeUpdateKeys","render$4","renderDataInit","shapeSel","renderShape","shapeSelection","selectLabel$2","sizeData","renderSize","render$5","navigator","userAgent","test","canvasInner","selectLabelGroup","edgeGroup","selectEdgeGroup","selectLabel","updatedRenderData","renderCanvas","updatePanZoomLimit","panH","panV","zoomKey_1","newBehavior","requiresKey","ctrlKey","metaKey","update$1","zoomBehavior","updatePanZoom","render$6","panZoomData","panZoom","panCenter","renderPanZoom","_dragging","_mouseover","registerNodeHover","onHover","nodeDataInit","nodeData","nodeHover","hoverFn","enableHover","registerNodeClick","nodeClick","defaultPrevented","enableClick","renderWithLayout","colaLayout","enableDrag","disableDrag","dispatchError","executeReset","attribute","renderBehavior","render$7","liveSel","renderWithTick","executeUpdate","executeHighlight","processHighlight","newClient","setState","scheduler","receiveEvent","schedulerState","executeEvent","init$6","builder$5","realClient","subscriptions","realCanvas","client$2"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","export * from './src/adaptor'\r\nexport * from './src/d3adaptor'\r\nexport * from './src/descent'\r\nexport * from './src/geom'\r\nexport * from './src/gridrouter'\r\nexport * from './src/handledisconnected'\r\nexport * from './src/layout'\r\nexport * from './src/layout3d'\r\nexport * from './src/linklengths'\r\nexport * from './src/powergraph'\r\nexport * from './src/pqueue'\r\nexport * from './src/rbtree'\r\nexport * from './src/rectangle'\r\nexport * from './src/shortestpaths'\r\nexport * from './src/vpsc'\r\nexport * from './src/batch'\r\n","import * as powergraph from './powergraph'\r\nimport {LinkLengthAccessor, symmetricDiffLinkLengths, jaccardLinkLengths, generateDirectedEdgeConstraints} from './linklengths'\r\nimport {Descent} from './descent'\r\nimport {Rectangle, Projection, makeEdgeTo, makeEdgeBetween} from './rectangle'\r\nimport {Calculator} from './shortestpaths'\r\nimport {TangentVisibilityGraph, TVGPoint} from './geom'\r\nimport {separateGraphs, applyPacking} from './handledisconnected'\r\n    /**\r\n     * The layout process fires three events:\r\n     *  - start: layout iterations started\r\n     *  - tick: fired once per iteration, listen to this to animate\r\n     *  - end: layout converged, you might like to zoom-to-fit or something at notification of this event\r\n     */\r\n    export enum EventType { start, tick, end };\r\n    export interface Event {\r\n        type: EventType;\r\n        alpha: number;\r\n        stress?: number;\r\n        listener?: () => void;\r\n    }\r\n    export interface InputNode {\r\n        /**\r\n         * index in nodes array, this is initialized by Layout.start()\r\n         */\r\n        index?: number;\r\n        /**\r\n         * x and y will be computed by layout as the Node's centroid\r\n         */\r\n        x?: number;\r\n        /**\r\n         * x and y will be computed by layout as the Node's centroid\r\n         */\r\n        y?: number;\r\n        /**\r\n         * specify a width and height of the node's bounding box if you turn on avoidOverlaps\r\n         */\r\n        width?: number;\r\n        /**\r\n         * specify a width and height of the node's bounding box if you turn on avoidOverlaps\r\n         */\r\n        height?: number;\r\n        /**\r\n         * selective bit mask.  !=0 means layout will not move.\r\n         */\r\n        fixed?: number;\r\n    }\r\n    export interface Node extends InputNode {\r\n      // Client-passed node may be missing these properties, which will be set\r\n      // upon ingestion\r\n      x: number;\r\n      y: number;\r\n    }\r\n\r\n    export interface Group {\r\n        bounds?: Rectangle;\r\n        leaves?: Node[];\r\n        groups?: Group[];\r\n        padding: number;\r\n    }\r\n\r\n    function isGroup(g: any): g is Group {\r\n        return typeof g.leaves !== 'undefined' || typeof g.groups !== 'undefined';\r\n    }\r\n\r\n    export interface Link<NodeRefType> {\r\n        source: NodeRefType;\r\n        target: NodeRefType;\r\n\r\n        // ideal length the layout should try to achieve for this link\r\n        length?: number;\r\n\r\n        // how hard we should try to satisfy this link's ideal length\r\n        // must be in the range: 0 < weight <= 1\r\n        // if unspecified 1 is the default\r\n        weight?: number;\r\n    }\r\n\r\n    export type LinkNumericPropertyAccessor = (t: Link<Node | number>) => number;\r\n\r\n    export interface LinkLengthTypeAccessor extends LinkLengthAccessor<Link<Node | number>> {\r\n        getType: LinkNumericPropertyAccessor;\r\n    }\r\n    /**\r\n     * Main interface to cola layout.\r\n     * @class Layout\r\n     */\r\n    export class Layout {\r\n        private _canvasSize = [1, 1];\r\n        private _linkDistance: number | LinkNumericPropertyAccessor = 20;\r\n        private _defaultNodeSize: number = 10;\r\n        private _linkLengthCalculator = null;\r\n        private _linkType = null;\r\n        private _avoidOverlaps = false;\r\n        private _handleDisconnected = true;\r\n        private _alpha;\r\n        private _lastStress;\r\n        private _running = false;\r\n        private _nodes = [];\r\n        private _groups = [];\r\n        private _rootGroup = null;\r\n        private _links: Link<Node | number>[] = [];\r\n        private _constraints = [];\r\n        private _distanceMatrix = null;\r\n        private _descent: Descent = null;\r\n        private _directedLinkConstraints = null;\r\n        private _threshold = 0.01;\r\n        private _visibilityGraph = null;\r\n        private _groupCompactness = 1e-6;\r\n\r\n        // sub-class and override this property to replace with a more sophisticated eventing mechanism\r\n        protected event = null;\r\n\r\n        // subscribe a listener to an event\r\n        // sub-class and override this method to replace with a more sophisticated eventing mechanism\r\n        public on(e: EventType | string, listener: (event?: Event) => void): this {\r\n            // override me!\r\n            if (!this.event) this.event = {};\r\n            if (typeof e === 'string') {\r\n                this.event[EventType[e]] = listener;\r\n            } else {\r\n                this.event[e] = listener;\r\n            }\r\n            return this;\r\n        }\r\n\r\n        // a function that is notified of events like \"tick\"\r\n        // sub-classes can override this method to replace with a more sophisticated eventing mechanism\r\n        protected trigger(e: Event) {\r\n            if (this.event && typeof this.event[e.type] !== 'undefined') {\r\n                this.event[e.type](e);\r\n            }\r\n        }\r\n\r\n        // a function that kicks off the iteration tick loop\r\n        // it calls tick() repeatedly until tick returns true (is converged)\r\n        // subclass and override it with something fancier (e.g. dispatch tick on a timer)\r\n        protected kick(): void {\r\n            while (!this.tick());\r\n        }\r\n\r\n        /**\r\n         * iterate the layout.  Returns true when layout converged.\r\n         */\r\n        protected tick(): boolean {\r\n            if (this._alpha < this._threshold) {\r\n                this._running = false;\r\n                this.trigger({ type: EventType.end, alpha: this._alpha = 0, stress: this._lastStress });\r\n                return true;\r\n            }\r\n            const n = this._nodes.length,\r\n                  m = this._links.length;\r\n            let o, i;\r\n\r\n            this._descent.locks.clear();\r\n            for (i = 0; i < n; ++i) {\r\n                o = this._nodes[i];\r\n                if (o.fixed) {\r\n                    if (typeof o.px === 'undefined' || typeof o.py === 'undefined') {\r\n                        o.px = o.x;\r\n                        o.py = o.y;\r\n                    }\r\n                    var p = [o.px, o.py];\r\n                    this._descent.locks.add(i, p);\r\n                }\r\n            }\r\n\r\n            let s1 = this._descent.rungeKutta();\r\n            //var s1 = descent.reduceStress();\r\n            if (s1 === 0) {\r\n                this._alpha = 0;\r\n            } else if (typeof this._lastStress !== 'undefined') {\r\n                this._alpha = s1; //Math.abs(Math.abs(this._lastStress / s1) - 1);\r\n            }\r\n            this._lastStress = s1;\r\n\r\n            this.updateNodePositions();\r\n\r\n            this.trigger({ type: EventType.tick, alpha: this._alpha, stress: this._lastStress });\r\n            return false;\r\n        }\r\n\r\n        // copy positions out of descent instance into each of the nodes' center coords\r\n        private updateNodePositions(): void {\r\n            const x = this._descent.x[0], y = this._descent.x[1];\r\n            let o, i = this._nodes.length;\r\n            while (i--) {\r\n                o = this._nodes[i];\r\n                o.x = x[i];\r\n                o.y = y[i];\r\n            }\r\n        }\r\n\r\n        /**\r\n         * the list of nodes.\r\n         * If nodes has not been set, but links has, then we instantiate a nodes list here, of the correct size,\r\n         * before returning it.\r\n         * @property nodes {Array}\r\n         * @default empty list\r\n         */\r\n        nodes(): Array<Node>\r\n        nodes(v: Array<InputNode>): this\r\n        nodes(v?: any): any {\r\n            if (!v) {\r\n                if (this._nodes.length === 0 && this._links.length > 0) {\r\n                    // if we have links but no nodes, create the nodes array now with empty objects for the links to point at.\r\n                    // in this case the links are expected to be numeric indices for nodes in the range 0..n-1 where n is the number of nodes\r\n                    var n = 0;\r\n                    this._links.forEach(function (l) {\r\n                        n = Math.max(n, <number>l.source, <number>l.target);\r\n                    });\r\n                    this._nodes = new Array(++n);\r\n                    for (var i = 0; i < n; ++i) {\r\n                        this._nodes[i] = {};\r\n                    }\r\n                }\r\n                return this._nodes;\r\n            }\r\n            this._nodes = v;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * a list of hierarchical groups defined over nodes\r\n         * @property groups {Array}\r\n         * @default empty list\r\n         */\r\n        groups(): Array<Group>\r\n        groups(x: Array<Group>): this\r\n        groups(x?: Array<Group>): any {\r\n            if (!x) return this._groups;\r\n            this._groups = x;\r\n            this._rootGroup = {};\r\n            this._groups.forEach(g => {\r\n                if (typeof g.padding === \"undefined\")\r\n                    g.padding = 1;\r\n                if (typeof g.leaves !== \"undefined\") {\r\n                    g.leaves.forEach((v, i) => {\r\n                        if (typeof v === 'number')\r\n                            (g.leaves[i] = this._nodes[v]).parent = g\r\n                    });\r\n                }\r\n                if (typeof g.groups !== \"undefined\") {\r\n                    g.groups.forEach((gi, i) => {\r\n                        if (typeof gi === 'number')\r\n                            (g.groups[i] = this._groups[gi]).parent = g\r\n                    });\r\n                }\r\n            });\r\n            this._rootGroup.leaves = this._nodes.filter(v => typeof v.parent === 'undefined');\r\n            this._rootGroup.groups = this._groups.filter(g => typeof g.parent === 'undefined');\r\n            return this;\r\n        }\r\n\r\n        powerGraphGroups(f: Function): this {\r\n            var g = powergraph.getGroups(this._nodes, this._links, this.linkAccessor, this._rootGroup);\r\n            this.groups(g.groups);\r\n            f(g);\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * if true, the layout will not permit overlaps of the node bounding boxes (defined by the width and height properties on nodes)\r\n         * @property avoidOverlaps\r\n         * @type bool\r\n         * @default false\r\n         */\r\n        avoidOverlaps(): boolean\r\n        avoidOverlaps(v: boolean): this\r\n        avoidOverlaps(v?: boolean): any {\r\n            if (!arguments.length) return this._avoidOverlaps;\r\n            this._avoidOverlaps = v;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * if true, the final step of the start method will be to nicely pack connected components of the graph.\r\n         * works best if start() is called with a reasonable number of iterations specified and\r\n         * each node has a bounding box (defined by the width and height properties on nodes).\r\n         * @property handleDisconnected\r\n         * @type bool\r\n         * @default true\r\n         */\r\n        handleDisconnected(): boolean\r\n        handleDisconnected(v: boolean): this\r\n        handleDisconnected(v?: boolean): any {\r\n            if (!arguments.length) return this._handleDisconnected;\r\n            this._handleDisconnected = v;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * causes constraints to be generated such that directed graphs are laid out either from left-to-right or top-to-bottom.\r\n         * a separation constraint is generated in the selected axis for each edge that is not involved in a cycle (part of a strongly connected component)\r\n         * @param axis {string} 'x' for left-to-right, 'y' for top-to-bottom\r\n         * @param minSeparation {number|link=>number} either a number specifying a minimum spacing required across all links or a function to return the minimum spacing for each link\r\n         */\r\n        flowLayout(axis: string, minSeparation: number|((t: any)=>number)): this {\r\n            if (!arguments.length) axis = 'y';\r\n            this._directedLinkConstraints = {\r\n                axis: axis,\r\n                getMinSeparation: typeof minSeparation === 'number' ? function () { return minSeparation } : minSeparation\r\n            };\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * links defined as source, target pairs over nodes\r\n         * @property links {array}\r\n         * @default empty list\r\n         */\r\n        links(): Array<Link<Node|number>>\r\n        links(x: Array<Link<Node|number>>): this\r\n        links(x?: Array<Link<Node|number>>): any {\r\n            if (!arguments.length) return this._links;\r\n            this._links = x;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * list of constraints of various types\r\n         * @property constraints\r\n         * @type {array}\r\n         * @default empty list\r\n         */\r\n        constraints(): Array<any>\r\n        constraints(c: Array<any>): this\r\n        constraints(c?: Array<any>): any {\r\n            if (!arguments.length) return this._constraints;\r\n            this._constraints = c;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * Matrix of ideal distances between all pairs of nodes.\r\n         * If unspecified, the ideal distances for pairs of nodes will be based on the shortest path distance between them.\r\n         * @property distanceMatrix\r\n         * @type {Array of Array of Number}\r\n         * @default null\r\n         */\r\n        distanceMatrix(): Array<Array<number>>\r\n        distanceMatrix(d: Array<Array<number>>): this\r\n        distanceMatrix(d?: any): any {\r\n            if (!arguments.length) return this._distanceMatrix;\r\n            this._distanceMatrix = d;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * Size of the layout canvas dimensions [x,y]. Currently only used to determine the midpoint which is taken as the starting position\r\n         * for nodes with no preassigned x and y.\r\n         * @property size\r\n         * @type {Array of Number}\r\n         */\r\n        size(): Array<number>\r\n        size(x: Array<number>): this\r\n        size(x?: Array<number>): any {\r\n            if (!x) return this._canvasSize;\r\n            this._canvasSize = x;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * Default size (assume nodes are square so both width and height) to use in packing if node width/height are not specified.\r\n         * @property defaultNodeSize\r\n         * @type {Number}\r\n         */\r\n        defaultNodeSize(): number\r\n        defaultNodeSize(x: number): this\r\n        defaultNodeSize(x?: any): any {\r\n            if (!x) return this._defaultNodeSize;\r\n            this._defaultNodeSize = x;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * The strength of attraction between the group boundaries to each other.\r\n         * @property defaultNodeSize\r\n         * @type {Number}\r\n         */\r\n        groupCompactness(): number\r\n        groupCompactness(x: number): this\r\n        groupCompactness(x?: any): any {\r\n            if (!x) return this._groupCompactness;\r\n            this._groupCompactness = x;\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * links have an ideal distance, The automatic layout will compute layout that tries to keep links (AKA edges) as close as possible to this length.\r\n         */\r\n        linkDistance(): number\r\n        linkDistance(): LinkNumericPropertyAccessor\r\n        linkDistance(x: number): this\r\n        linkDistance(x: LinkNumericPropertyAccessor): this\r\n        linkDistance(x?: any): any {\r\n            if (!x) {\r\n                return this._linkDistance;\r\n            }\r\n            this._linkDistance = typeof x === \"function\" ? x : +x;\r\n            this._linkLengthCalculator = null;\r\n            return this;\r\n        }\r\n\r\n        linkType(f: Function | number): this {\r\n            this._linkType = f;\r\n            return this;\r\n        }\r\n\r\n        convergenceThreshold(): number\r\n        convergenceThreshold(x: number): this\r\n        convergenceThreshold(x?: number): any {\r\n            if (!x) return this._threshold;\r\n            this._threshold = typeof x === \"function\" ? x : +x;\r\n            return this;\r\n        }\r\n\r\n        alpha(): number\r\n        alpha(x: number): this\r\n        alpha(x?: number): any {\r\n            if (!arguments.length) return this._alpha;\r\n            else {\r\n                x = +x;\r\n                if (this._alpha) { // if we're already running\r\n                    if (x > 0) this._alpha = x; // we might keep it hot\r\n                    else this._alpha = 0; // or, next tick will dispatch \"end\"\r\n                } else if (x > 0) { // otherwise, fire it up!\r\n                    if (!this._running) {\r\n                        this._running = true;\r\n                        this.trigger({ type: EventType.start, alpha: this._alpha = x});\r\n                        this.kick();\r\n                    }\r\n                }\r\n                return this;\r\n            }\r\n        }\r\n\r\n        getLinkLength(link: Link<Node | number>): number {\r\n            return typeof this._linkDistance === \"function\" ? +((<LinkNumericPropertyAccessor>this._linkDistance)(link)) : <number>this._linkDistance;\r\n        }\r\n\r\n        static setLinkLength(link: Link<Node|number>, length: number) {\r\n            link.length = length;\r\n        }\r\n\r\n        getLinkType(link: Link<Node | number>): number {\r\n            return typeof this._linkType === \"function\" ? this._linkType(link) : 0;\r\n        }\r\n\r\n        linkAccessor: LinkLengthTypeAccessor = {\r\n            getSourceIndex: Layout.getSourceIndex,\r\n            getTargetIndex: Layout.getTargetIndex,\r\n            setLength: Layout.setLinkLength,\r\n            getType: l => typeof this._linkType === \"function\" ? this._linkType(l) : 0\r\n        };\r\n\r\n        /**\r\n         * compute an ideal length for each link based on the graph structure around that link.\r\n         * you can use this (for example) to create extra space around hub-nodes in dense graphs.\r\n         * In particular this calculation is based on the \"symmetric difference\" in the neighbour sets of the source and target:\r\n         * i.e. if neighbours of source is a and neighbours of target are b then calculation is: sqrt(|a union b| - |a intersection b|)\r\n         * Actual computation based on inspection of link structure occurs in start(), so links themselves\r\n         * don't have to have been assigned before invoking this function.\r\n         * @param {number} [idealLength] the base length for an edge when its source and start have no other common neighbours (e.g. 40)\r\n         * @param {number} [w] a multiplier for the effect of the length adjustment (e.g. 0.7)\r\n         */\r\n        symmetricDiffLinkLengths(idealLength: number, w: number = 1): this {\r\n            this.linkDistance(l => idealLength * l.length);\r\n            this._linkLengthCalculator = () => symmetricDiffLinkLengths(this._links, this.linkAccessor, w);\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * compute an ideal length for each link based on the graph structure around that link.\r\n         * you can use this (for example) to create extra space around hub-nodes in dense graphs.\r\n         * In particular this calculation is based on the \"symmetric difference\" in the neighbour sets of the source and target:\r\n         * i.e. if neighbours of source is a and neighbours of target are b then calculation is: |a intersection b|/|a union b|\r\n         * Actual computation based on inspection of link structure occurs in start(), so links themselves\r\n         * don't have to have been assigned before invoking this function.\r\n         * @param {number} [idealLength] the base length for an edge when its source and start have no other common neighbours (e.g. 40)\r\n         * @param {number} [w] a multiplier for the effect of the length adjustment (e.g. 0.7)\r\n         */\r\n        jaccardLinkLengths(idealLength: number, w: number = 1): this {\r\n            this.linkDistance(l => idealLength * l.length);\r\n            this._linkLengthCalculator = () => jaccardLinkLengths(this._links, this.linkAccessor, w);\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * start the layout process\r\n         * @method start\r\n         * @param {number} [initialUnconstrainedIterations=0] unconstrained initial layout iterations\r\n         * @param {number} [initialUserConstraintIterations=0] initial layout iterations with user-specified constraints\r\n         * @param {number} [initialAllConstraintsIterations=0] initial layout iterations with all constraints including non-overlap\r\n         * @param {number} [gridSnapIterations=0] iterations of \"grid snap\", which pulls nodes towards grid cell centers - grid of size node[0].width - only really makes sense if all nodes have the same width and height\r\n         * @param [keepRunning=true] keep iterating asynchronously via the tick method\r\n         */\r\n        start(\r\n            initialUnconstrainedIterations: number = 0,\r\n            initialUserConstraintIterations: number = 0,\r\n            initialAllConstraintsIterations: number = 0,\r\n            gridSnapIterations: number = 0,\r\n            keepRunning = true\r\n        ): this {\r\n            var i: number,\r\n                j: number,\r\n                n = (<Array<any>>this.nodes()).length,\r\n                N = n + 2 * this._groups.length,\r\n                m = this._links.length,\r\n                w = this._canvasSize[0],\r\n                h = this._canvasSize[1];\r\n\r\n            var x = new Array(N), y = new Array(N);\r\n\r\n            var G = null;\r\n\r\n            var ao = this._avoidOverlaps;\r\n\r\n            this._nodes.forEach((v, i) => {\r\n                v.index = i;\r\n                if (typeof v.x === 'undefined') {\r\n                    v.x = w / 2, v.y = h / 2;\r\n                }\r\n                x[i] = v.x, y[i] = v.y;\r\n            });\r\n\r\n            if (this._linkLengthCalculator) this._linkLengthCalculator();\r\n\r\n            //should we do this to clearly label groups?\r\n            //this._groups.forEach((g, i) => g.groupIndex = i);\r\n\r\n            var distances;\r\n            if (this._distanceMatrix) {\r\n                // use the user specified distanceMatrix\r\n                distances = this._distanceMatrix;\r\n            } else {\r\n                // construct an n X n distance matrix based on shortest paths through graph (with respect to edge.length).\r\n                distances = (new Calculator(N, this._links, Layout.getSourceIndex, Layout.getTargetIndex, l=> this.getLinkLength(l))).DistanceMatrix();\r\n\r\n                // G is a square matrix with G[i][j] = 1 iff there exists an edge between node i and node j\r\n                // otherwise 2. (\r\n                G = Descent.createSquareMatrix(N, () => 2);\r\n                this._links.forEach(l => {\r\n                    if (typeof l.source == \"number\") l.source = this._nodes[<number>l.source];\r\n                    if (typeof l.target == \"number\") l.target = this._nodes[<number>l.target];\r\n                });\r\n                this._links.forEach(e => {\r\n                    const u = Layout.getSourceIndex(e), v = Layout.getTargetIndex(e);\r\n                    G[u][v] = G[v][u] = e.weight || 1;\r\n                });\r\n            }\r\n\r\n            var D = Descent.createSquareMatrix(N, function (i, j) {\r\n                return distances[i][j];\r\n            });\r\n\r\n            if (this._rootGroup && typeof this._rootGroup.groups !== 'undefined') {\r\n                var i = n;\r\n                var addAttraction = (i, j, strength, idealDistance) => {\r\n                    G[i][j] = G[j][i] = strength;\r\n                    D[i][j] = D[j][i] = idealDistance;\r\n                };\r\n                this._groups.forEach(g => {\r\n                    addAttraction(i, i + 1, this._groupCompactness, 0.1);\r\n\r\n                    // todo: add terms here attracting children of the group to the group dummy nodes\r\n                    //if (typeof g.leaves !== 'undefined')\r\n                    //    g.leaves.forEach(l => {\r\n                    //        addAttraction(l.index, i, 1e-4, 0.1);\r\n                    //        addAttraction(l.index, i + 1, 1e-4, 0.1);\r\n                    //    });\r\n                    //if (typeof g.groups !== 'undefined')\r\n                    //    g.groups.forEach(g => {\r\n                    //        var gid = n + g.groupIndex * 2;\r\n                    //        addAttraction(gid, i, 0.1, 0.1);\r\n                    //        addAttraction(gid + 1, i, 0.1, 0.1);\r\n                    //        addAttraction(gid, i + 1, 0.1, 0.1);\r\n                    //        addAttraction(gid + 1, i + 1, 0.1, 0.1);\r\n                    //    });\r\n\r\n                    x[i] = 0, y[i++] = 0;\r\n                    x[i] = 0, y[i++] = 0;\r\n                });\r\n            } else this._rootGroup = { leaves: this._nodes, groups: [] };\r\n\r\n            var curConstraints = this._constraints || [];\r\n            if (this._directedLinkConstraints) {\r\n                (<any>this.linkAccessor).getMinSeparation = this._directedLinkConstraints.getMinSeparation;\r\n                curConstraints = curConstraints.concat(generateDirectedEdgeConstraints(n, this._links, this._directedLinkConstraints.axis, <any>(this.linkAccessor)));\r\n\r\n                // todo: add containment constraints between group dummy nodes and their children\r\n            }\r\n\r\n            this.avoidOverlaps(false);\r\n            this._descent = new Descent([x, y], D);\r\n\r\n            this._descent.locks.clear();\r\n            for (var i = 0; i < n; ++i) {\r\n                var o = this._nodes[i];\r\n                if (o.fixed) {\r\n                    o.px = o.x;\r\n                    o.py = o.y;\r\n                    var p = [o.x, o.y];\r\n                    this._descent.locks.add(i, p);\r\n                }\r\n            }\r\n            this._descent.threshold = this._threshold;\r\n\r\n            // apply initialIterations without user constraints or nonoverlap constraints\r\n            // if groups are specified, dummy nodes and edges will be added to untangle\r\n            // with respect to group connectivity\r\n            this.initialLayout(initialUnconstrainedIterations, x, y);\r\n\r\n            // apply initialIterations with user constraints but no nonoverlap constraints\r\n            if (curConstraints.length > 0) this._descent.project = new Projection(this._nodes, this._groups, this._rootGroup, curConstraints).projectFunctions();\r\n            this._descent.run(initialUserConstraintIterations);\r\n            this.separateOverlappingComponents(w, h);\r\n\r\n            // subsequent iterations will apply all constraints\r\n            this.avoidOverlaps(ao);\r\n            if (ao) {\r\n                this._nodes.forEach(function (v, i) { v.x = x[i], v.y = y[i]; });\r\n                this._descent.project = new Projection(this._nodes, this._groups, this._rootGroup, curConstraints, true).projectFunctions();\r\n                this._nodes.forEach(function (v, i) { x[i] = v.x, y[i] = v.y; });\r\n            }\r\n\r\n            // allow not immediately connected nodes to relax apart (p-stress)\r\n            this._descent.G = G;\r\n            this._descent.run(initialAllConstraintsIterations);\r\n\r\n            if (gridSnapIterations) {\r\n                this._descent.snapStrength = 1000;\r\n                this._descent.snapGridSize = this._nodes[0].width;\r\n                this._descent.numGridSnapNodes = n;\r\n                this._descent.scaleSnapByMaxH = n != N; // if we have groups then need to scale hessian so grid forces still apply\r\n                var G0 = Descent.createSquareMatrix(N,(i, j) => {\r\n                    if (i >= n || j >= n) return G[i][j];\r\n                    return 0\r\n                });\r\n                this._descent.G = G0;\r\n                this._descent.run(gridSnapIterations);\r\n            }\r\n\r\n            this.updateNodePositions();\r\n            this.separateOverlappingComponents(w, h);\r\n            return keepRunning ? this.resume() : this;\r\n        }\r\n\r\n        private initialLayout(iterations: number, x: number[], y: number[]) {\r\n            if (this._groups.length > 0 && iterations > 0) {\r\n                // construct a flat graph with dummy nodes for the groups and edges connecting group dummy nodes to their children\r\n                // todo: edges attached to groups are replaced with edges connected to the corresponding group dummy node\r\n                var n = this._nodes.length;\r\n                var edges = this._links.map(e => <any>{ source: (<Node>e.source).index, target: (<Node>e.target).index });\r\n                var vs = this._nodes.map(v => <any>{ index: v.index });\r\n                this._groups.forEach((g, i) => {\r\n                    vs.push(<any>{ index: g.index = n + i });\r\n                });\r\n                this._groups.forEach((g, i) => {\r\n                    if (typeof g.leaves !== 'undefined')\r\n                        g.leaves.forEach(v => edges.push({ source: g.index, target: v.index }));\r\n                    if (typeof g.groups !== 'undefined')\r\n                        g.groups.forEach(gg => edges.push({ source: g.index, target: gg.index }));\r\n                });\r\n\r\n                // layout the flat graph with dummy nodes and edges\r\n                new Layout()\r\n                    .size(this.size())\r\n                    .nodes(vs)\r\n                    .links(edges)\r\n                    .avoidOverlaps(false)\r\n                    .linkDistance(this.linkDistance())\r\n                    .symmetricDiffLinkLengths(5)\r\n                    .convergenceThreshold(1e-4)\r\n                    .start(iterations, 0, 0, 0, false);\r\n\r\n                this._nodes.forEach(v => {\r\n                    x[v.index] = vs[v.index].x;\r\n                    y[v.index] = vs[v.index].y;\r\n                });\r\n            } else {\r\n                this._descent.run(iterations);\r\n            }\r\n        }\r\n\r\n        // recalculate nodes position for disconnected graphs\r\n        private separateOverlappingComponents(width: number, height: number): void {\r\n            // recalculate nodes position for disconnected graphs\r\n            if (!this._distanceMatrix && this._handleDisconnected) {\r\n                let x = this._descent.x[0], y = this._descent.x[1];\r\n                this._nodes.forEach(function (v, i) { v.x = x[i], v.y = y[i]; });\r\n                var graphs = separateGraphs(this._nodes, this._links);\r\n                applyPacking(graphs, width, height, this._defaultNodeSize);\r\n                this._nodes.forEach((v, i) => {\r\n                    this._descent.x[0][i] = v.x, this._descent.x[1][i] = v.y;\r\n                    if (v.bounds) {\r\n                        v.bounds.setXCentre(v.x);\r\n                        v.bounds.setYCentre(v.y);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        resume(): this {\r\n            return this.alpha(0.1);\r\n        }\r\n\r\n        stop(): this {\r\n            return this.alpha(0);\r\n        }\r\n\r\n        /// find a visibility graph over the set of nodes.  assumes all nodes have a\r\n        /// bounds property (a rectangle) and that no pair of bounds overlaps.\r\n        prepareEdgeRouting(nodeMargin: number = 0) {\r\n            this._visibilityGraph = new TangentVisibilityGraph(\r\n                this._nodes.map(function (v) {\r\n                    return v.bounds.inflate(-nodeMargin).vertices();\r\n                }));\r\n        }\r\n\r\n        /**\r\n         * find a route avoiding node bounds for the given edge.\r\n         * assumes the visibility graph has been created (by prepareEdgeRouting method)\r\n         * and also assumes that nodes have an index property giving their position in the\r\n         * node array.  This index property is created by the start() method.\r\n         * @param [edge] The edge to generate a route for.\r\n         * @param {number} [ah] The size of the arrow head, a distance to shorten the end\r\n         *                      of the edge by.  Defaults to 5.\r\n         */\r\n        routeEdge(edge, ah: number = 5, draw) {\r\n            var lineData = [];\r\n            //if (d.source.id === 10 && d.target.id === 11) {\r\n            //    debugger;\r\n            //}\r\n            var vg2 = new TangentVisibilityGraph(this._visibilityGraph.P, { V: this._visibilityGraph.V, E: this._visibilityGraph.E }),\r\n                port1 = <TVGPoint>{ x: edge.source.x, y: edge.source.y },\r\n                port2 = <TVGPoint>{ x: edge.target.x, y: edge.target.y },\r\n                start = vg2.addPoint(port1, edge.source.index),\r\n                end = vg2.addPoint(port2, edge.target.index);\r\n            vg2.addEdgeIfVisible(port1, port2, edge.source.index, edge.target.index);\r\n            if (typeof draw !== 'undefined') {\r\n                draw(vg2);\r\n            }\r\n            var sourceInd = e => e.source.id, targetInd = e => e.target.id, length = e => e.length(),\r\n                spCalc = new Calculator(vg2.V.length, vg2.E, sourceInd, targetInd, length),\r\n                shortestPath = spCalc.PathFromNodeToNode(start.id, end.id);\r\n            if (shortestPath.length === 1 || shortestPath.length === vg2.V.length) {\r\n                let route = makeEdgeBetween(edge.source.innerBounds, edge.target.innerBounds, ah);\r\n                lineData = [route.sourceIntersection, route.arrowStart];\r\n            } else {\r\n                var n = shortestPath.length - 2,\r\n                    p = vg2.V[shortestPath[n]].p,\r\n                    q = vg2.V[shortestPath[0]].p,\r\n                    lineData = [edge.source.innerBounds.rayIntersection(p.x, p.y)];\r\n                for (var i = n; i >= 0; --i)\r\n                    lineData.push(vg2.V[shortestPath[i]].p);\r\n                lineData.push(makeEdgeTo(q, edge.target.innerBounds, ah));\r\n            }\r\n            //lineData.forEach((v, i) => {\r\n            //    if (i > 0) {\r\n            //        var u = lineData[i - 1];\r\n            //        this._nodes.forEach(function (node) {\r\n            //            if (node.id === getSourceIndex(d) || node.id === getTargetIndex(d)) return;\r\n            //            var ints = node.innerBounds.lineIntersections(u.x, u.y, v.x, v.y);\r\n            //            if (ints.length > 0) {\r\n            //                debugger;\r\n            //            }\r\n            //        })\r\n            //    }\r\n            //})\r\n            return lineData;\r\n        }\r\n\r\n        //The link source and target may be just a node index, or they may be references to nodes themselves.\r\n        static getSourceIndex(e: Link<Node | number>): number {\r\n            return typeof e.source === 'number' ? <number>e.source : (<Node>e.source).index;\r\n        }\r\n\r\n        //The link source and target may be just a node index, or they may be references to nodes themselves.\r\n        static getTargetIndex(e: Link<Node | number>): number {\r\n            return typeof e.target === 'number' ? <number>e.target : (<Node>e.target).index;\r\n        }\r\n\r\n        // Get a string ID for a given link.\r\n        static linkId(e: Link<Node | number>): string {\r\n            return Layout.getSourceIndex(e) + \"-\" + Layout.getTargetIndex(e);\r\n        }\r\n\r\n        // The fixed property has three bits:\r\n        // Bit 1 can be set externally (e.g., d.fixed = true) and show persist.\r\n        // Bit 2 stores the dragging state, from mousedown to mouseup.\r\n        // Bit 3 stores the hover state, from mouseover to mouseout.\r\n        static dragStart(d: Node | Group) {\r\n            if (isGroup(d)) {\r\n                Layout.storeOffset(d, Layout.dragOrigin(d));\r\n            } else {\r\n                Layout.stopNode(d);\r\n                d.fixed |= 2; // set bit 2\r\n            }\r\n        }\r\n\r\n        // we clobber any existing desired positions for nodes\r\n        // in case another tick event occurs before the drag\r\n        private static stopNode(v: Node) {\r\n            (<any>v).px = v.x;\r\n            (<any>v).py = v.y;\r\n        }\r\n\r\n        // we store offsets for each node relative to the centre of the ancestor group\r\n        // being dragged in a pair of properties on the node\r\n        private static storeOffset(d: Group, origin: { x: number, y: number }) {\r\n            if (typeof d.leaves !== 'undefined') {\r\n                d.leaves.forEach(v => {\r\n                    v.fixed |= 2;\r\n                    Layout.stopNode(v);\r\n                    (<any>v)._dragGroupOffsetX = v.x - origin.x;\r\n                    (<any>v)._dragGroupOffsetY = v.y - origin.y;\r\n                });\r\n            }\r\n            if (typeof d.groups !== 'undefined') {\r\n                d.groups.forEach(g => Layout.storeOffset(g, origin));\r\n            }\r\n        }\r\n\r\n        // the drag origin is taken as the centre of the node or group\r\n        static dragOrigin(d: Node | Group): { x: number, y: number } {\r\n            if (isGroup(d)) {\r\n                return {\r\n                    x: d.bounds.cx(),\r\n                    y: d.bounds.cy()\r\n                };\r\n            } else {\r\n                return d;\r\n            }\r\n        }\r\n\r\n        // for groups, the drag translation is propagated down to all of the children of\r\n        // the group.\r\n        static drag(d: Node | Group, position: { x: number, y: number }) {\r\n            if (isGroup(d)) {\r\n                if (typeof d.leaves !== 'undefined') {\r\n                    d.leaves.forEach(v => {\r\n                        d.bounds.setXCentre(position.x);\r\n                        d.bounds.setYCentre(position.y);\r\n                        (<any>v).px = (<any>v)._dragGroupOffsetX + position.x;\r\n                        (<any>v).py = (<any>v)._dragGroupOffsetY + position.y;\r\n                    });\r\n                }\r\n                if (typeof d.groups !== 'undefined') {\r\n                    d.groups.forEach(g => Layout.drag(g, position));\r\n                }\r\n            } else {\r\n                (<any>d).px = position.x;\r\n                (<any>d).py = position.y;\r\n            }\r\n        }\r\n\r\n        // we unset only bits 2 and 3 so that the user can fix nodes with another a different\r\n        // bit such that the lock persists between drags\r\n        static dragEnd(d) {\r\n            if (isGroup(d)) {\r\n                if (typeof d.leaves !== 'undefined') {\r\n                    d.leaves.forEach(v => {\r\n                        Layout.dragEnd(v);\r\n                        delete (<any>v)._dragGroupOffsetX;\r\n                        delete (<any>v)._dragGroupOffsetY;\r\n                    });\r\n                }\r\n                if (typeof d.groups !== 'undefined') {\r\n                    d.groups.forEach(Layout.dragEnd);\r\n                }\r\n            } else {\r\n                d.fixed &= ~6; // unset bits 2 and 3\r\n                //d.fixed = 0;\r\n            }\r\n        }\r\n\r\n        // in d3 hover temporarily locks nodes, currently not used in cola\r\n        static mouseOver(d) {\r\n            d.fixed |= 4; // set bit 3\r\n            d.px = d.x, d.py = d.y; // set velocity to zero\r\n        }\r\n\r\n        // in d3 hover temporarily locks nodes, currently not used in cola\r\n        static mouseOut(d) {\r\n            d.fixed &= ~4; // unset bit 3\r\n        }\r\n    }\r\n","import {Constraint, Variable, Solver} from './vpsc'\r\nimport {RBTree} from './rbtree'\r\nimport {Point} from './geom'\r\n\r\n    export interface Leaf {\r\n        bounds: Rectangle;\r\n        variable: Variable;\r\n    }\r\n\r\n    export interface ProjectionGroup {\r\n        bounds: Rectangle;\r\n        padding: number;\r\n        stiffness: number;\r\n        leaves: Leaf[];\r\n        groups: ProjectionGroup[];\r\n        minVar: Variable;\r\n        maxVar: Variable;\r\n    }\r\n\r\n    export function computeGroupBounds(g: ProjectionGroup): Rectangle {\r\n        g.bounds = typeof g.leaves !== \"undefined\" ?\r\n            g.leaves.reduce((r: Rectangle, c) => c.bounds.union(r), Rectangle.empty()) :\r\n            Rectangle.empty();\r\n        if (typeof g.groups !== \"undefined\")\r\n            g.bounds = <Rectangle>g.groups.reduce((r: Rectangle, c) => computeGroupBounds(c).union(r), g.bounds);\r\n        g.bounds = g.bounds.inflate(g.padding);\r\n        return g.bounds;\r\n    }\r\n\r\n    export class Rectangle {\r\n        constructor(\r\n            public x: number,\r\n            public X: number,\r\n            public y: number,\r\n            public Y: number) { }\r\n\r\n        static empty(): Rectangle { return new Rectangle(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY); }\r\n\r\n        cx(): number { return (this.x + this.X) / 2; }\r\n\r\n        cy(): number { return (this.y + this.Y) / 2; }\r\n\r\n        overlapX(r: Rectangle): number {\r\n            var ux = this.cx(), vx = r.cx();\r\n            if (ux <= vx && r.x < this.X) return this.X - r.x;\r\n            if (vx <= ux && this.x < r.X) return r.X - this.x;\r\n            return 0;\r\n        }\r\n\r\n        overlapY(r: Rectangle): number {\r\n            var uy = this.cy(), vy = r.cy();\r\n            if (uy <= vy && r.y < this.Y) return this.Y - r.y;\r\n            if (vy <= uy && this.y < r.Y) return r.Y - this.y;\r\n            return 0;\r\n        }\r\n\r\n        setXCentre(cx: number): void {\r\n            var dx = cx - this.cx();\r\n            this.x += dx;\r\n            this.X += dx;\r\n        }\r\n\r\n        setYCentre(cy: number): void {\r\n            var dy = cy - this.cy();\r\n            this.y += dy;\r\n            this.Y += dy;\r\n        }\r\n\r\n        width(): number {\r\n            return this.X - this.x;\r\n        }\r\n\r\n        height(): number {\r\n            return this.Y - this.y;\r\n        }\r\n\r\n        union(r: Rectangle): Rectangle {\r\n            return new Rectangle(Math.min(this.x, r.x), Math.max(this.X, r.X), Math.min(this.y, r.y), Math.max(this.Y, r.Y));\r\n        }\r\n\r\n        /**\r\n         * return any intersection points between the given line and the sides of this rectangle\r\n         * @method lineIntersection\r\n         * @param x1 number first x coord of line\r\n         * @param y1 number first y coord of line\r\n         * @param x2 number second x coord of line\r\n         * @param y2 number second y coord of line\r\n         * @return any intersection points found\r\n         */\r\n        lineIntersections(x1: number, y1: number, x2: number, y2: number): Array<Point> {\r\n            var sides = [[this.x, this.y, this.X, this.y],\r\n                    [this.X, this.y, this.X, this.Y],\r\n                    [this.X, this.Y, this.x, this.Y],\r\n                [this.x, this.Y, this.x, this.y]];\r\n            var intersections = [];\r\n            for (var i = 0; i < 4; ++i) {\r\n                var r = Rectangle.lineIntersection(x1, y1, x2, y2, sides[i][0], sides[i][1], sides[i][2], sides[i][3]);\r\n                if (r !== null) intersections.push({ x: r.x, y: r.y });\r\n            }\r\n            return intersections;\r\n        }\r\n\r\n        /**\r\n         * return any intersection points between a line extending from the centre of this rectangle to the given point,\r\n         *  and the sides of this rectangle\r\n         * @method lineIntersection\r\n         * @param x2 number second x coord of line\r\n         * @param y2 number second y coord of line\r\n         * @return any intersection points found\r\n         */\r\n        rayIntersection(x2: number, y2: number): Point {\r\n            var ints = this.lineIntersections(this.cx(), this.cy(), x2, y2);\r\n            return ints.length > 0 ? ints[0] : null;\r\n        }\r\n\r\n        vertices(): Point[] {\r\n            return [\r\n                { x: this.x, y: this.y },\r\n                { x: this.X, y: this.y },\r\n                { x: this.X, y: this.Y },\r\n                { x: this.x, y: this.Y }];\r\n        }\r\n\r\n        static lineIntersection(\r\n            x1: number, y1: number,\r\n            x2: number, y2: number,\r\n            x3: number, y3: number,\r\n            x4: number, y4: number): Point {\r\n            var dx12 = x2 - x1, dx34 = x4 - x3,\r\n                dy12 = y2 - y1, dy34 = y4 - y3,\r\n                denominator = dy34 * dx12 - dx34 * dy12;\r\n            if (denominator == 0) return null;\r\n            var dx31 = x1 - x3, dy31 = y1 - y3,\r\n                numa = dx34 * dy31 - dy34 * dx31,\r\n                a = numa / denominator,\r\n                numb = dx12 * dy31 - dy12 * dx31,\r\n                b = numb / denominator;\r\n            if (a >= 0 && a <= 1 && b >= 0 && b <= 1) {\r\n                return {\r\n                    x: x1 + a * dx12,\r\n                    y: y1 + a * dy12\r\n                };\r\n            }\r\n            return null;\r\n        }\r\n\r\n        inflate(pad: number): Rectangle {\r\n            return new Rectangle(this.x - pad, this.X + pad, this.y - pad, this.Y + pad);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the endpoints of a line that connects the centre of two rectangles.\r\n     * @param {Rectangle} [source] The source Rectangle.\r\n     * @param {Rectangle} [target] The target Rectangle.\r\n     * @param {number} [ah] The size of the arrow head, a distance to shorten the\r\n     *                      line by.\r\n     * @return An object with three point properties, the intersection with the\r\n     *         source rectangle (sourceIntersection), the intersection with then\r\n     *         target rectangle (targetIntersection), and the point an arrow\r\n     *         head of the specified size would need to start (arrowStart).\r\n     */\r\n    export function makeEdgeBetween(source: Rectangle, target: Rectangle, ah: number)\r\n        : { sourceIntersection: Point; targetIntersection: Point; arrowStart: Point } {\r\n        const si = source.rayIntersection(target.cx(), target.cy()) || { x: source.cx(), y: source.cy() },\r\n            ti = target.rayIntersection(source.cx(), source.cy()) || { x: target.cx(), y: target.cy() },\r\n            dx = ti.x - si.x,\r\n            dy = ti.y - si.y,\r\n            l = Math.sqrt(dx * dx + dy * dy), al = l - ah;\r\n        return {\r\n            sourceIntersection: si,\r\n            targetIntersection: ti,\r\n            arrowStart: { x: si.x + al * dx / l, y: si.y + al * dy / l }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the intersection of a line from the given point to the centre\r\n     * of the target rectangle where it intersects the rectanngle.\r\n     * @param [source] The source point.\r\n     * @param {Rectangle} [target] The target Rectangle.\r\n     * @param {number} [ah] The size of the arrow head, a distance to shorten the\r\n     *                      line by.\r\n     * @return The point an arrow head of the specified size would need to start.\r\n     */\r\n    export function makeEdgeTo(s: { x: number; y: number }, target: Rectangle, ah: number): Point {\r\n        var ti = target.rayIntersection(s.x, s.y);\r\n        if (!ti) ti = { x: target.cx(), y: target.cy() };\r\n        var dx = ti.x - s.x,\r\n            dy = ti.y - s.y,\r\n            l = Math.sqrt(dx * dx + dy * dy);\r\n        return { x: ti.x - ah * dx / l, y: ti.y - ah * dy / l };\r\n    }\r\n\r\n    class Node {\r\n        prev: RBTree<Node>;\r\n        next: RBTree<Node>;\r\n\r\n        constructor(public v: Variable, public r: Rectangle, public pos: number) {\r\n            this.prev = makeRBTree();\r\n            this.next = makeRBTree();\r\n        }\r\n    }\r\n\r\n    class Event {\r\n        constructor(public isOpen: boolean, public v: Node, public pos: number) {}\r\n    }\r\n\r\n    function compareEvents(a: Event, b: Event): number {\r\n        if (a.pos > b.pos) {\r\n            return 1;\r\n        }\r\n        if (a.pos < b.pos) {\r\n            return -1;\r\n        }\r\n        if (a.isOpen) {\r\n            // open must come before close\r\n            return -1;\r\n        }\r\n        if (b.isOpen) {\r\n            // open must come before close\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function makeRBTree(): RBTree<Node> {\r\n        return new RBTree<Node>((a, b) => a.pos - b.pos);\r\n    }\r\n\r\n    interface RectAccessors {\r\n        getCentre: (r: Rectangle) => number;\r\n        getOpen: (r: Rectangle) => number;\r\n        getClose: (r: Rectangle) => number;\r\n        getSize: (r: Rectangle) => number;\r\n        makeRect: (open: number, close: number, center: number, size: number) => Rectangle;\r\n        findNeighbours: (v: Node, scanline: RBTree<Node>) => void;\r\n    }\r\n\r\n    var xRect: RectAccessors = {\r\n        getCentre: r=> r.cx(),\r\n        getOpen: r=> r.y,\r\n        getClose: r=> r.Y,\r\n        getSize: r=> r.width(),\r\n        makeRect: (open, close, center, size) => new Rectangle(center - size / 2, center + size / 2, open, close) ,\r\n        findNeighbours: findXNeighbours\r\n    };\r\n\r\n    var yRect: RectAccessors = {\r\n        getCentre: r=> r.cy(),\r\n        getOpen: r=> r.x,\r\n        getClose: r=> r.X,\r\n        getSize: r=> r.height(),\r\n        makeRect: (open, close, center, size) => new Rectangle(open, close, center - size / 2, center + size / 2),\r\n        findNeighbours: findYNeighbours\r\n    };\r\n\r\n    function generateGroupConstraints(root: ProjectionGroup, f: RectAccessors, minSep: number, isContained: boolean = false): Constraint[]\r\n    {\r\n        var padding = root.padding,\r\n            gn = typeof root.groups !== 'undefined' ? root.groups.length : 0,\r\n            ln = typeof root.leaves !== 'undefined' ? root.leaves.length : 0,\r\n            childConstraints: Constraint[] = !gn ? []\r\n            : root.groups.reduce((ccs: Constraint[], g) => ccs.concat(generateGroupConstraints(g, f, minSep, true)), []),\r\n            n = (isContained ? 2 : 0) + ln + gn,\r\n            vs: Variable[] = new Array(n),\r\n            rs: Rectangle[] = new Array(n),\r\n            i = 0,\r\n            add = (r, v) => { rs[i] = r; vs[i++] = v };\r\n        if (isContained) {\r\n            // if this group is contained by another, then we add two dummy vars and rectangles for the borders\r\n            var b: Rectangle = root.bounds,\r\n                c = f.getCentre(b), s = f.getSize(b) / 2,\r\n                open = f.getOpen(b), close = f.getClose(b),\r\n                min = c - s + padding / 2, max = c + s - padding / 2;\r\n            root.minVar.desiredPosition = min;\r\n            add(f.makeRect(open, close, min, padding), root.minVar);\r\n            root.maxVar.desiredPosition = max;\r\n            add(f.makeRect(open, close, max, padding), root.maxVar);\r\n        }\r\n        if (ln) root.leaves.forEach(l => add(l.bounds, l.variable));\r\n        if (gn) root.groups.forEach(g => {\r\n            var b: Rectangle = g.bounds;\r\n            add(f.makeRect(f.getOpen(b), f.getClose(b), f.getCentre(b), f.getSize(b)), g.minVar);\r\n        });\r\n        var cs = generateConstraints(rs, vs, f, minSep);\r\n        if (gn) {\r\n            vs.forEach(v => { v.cOut = [], v.cIn = [] });\r\n            cs.forEach(c => { c.left.cOut.push(c), c.right.cIn.push(c) });\r\n            root.groups.forEach(g => {\r\n                var gapAdjustment = (g.padding - f.getSize(g.bounds)) / 2;\r\n                g.minVar.cIn.forEach(c => c.gap += gapAdjustment);\r\n                g.minVar.cOut.forEach(c => { c.left = g.maxVar; c.gap += gapAdjustment; });\r\n            });\r\n        }\r\n        return childConstraints.concat(cs);\r\n    }\r\n\r\n    function generateConstraints(rs: Rectangle[], vars: Variable[],\r\n        rect: RectAccessors, minSep: number): Constraint[]\r\n    {\r\n        var i, n = rs.length;\r\n        var N = 2 * n;\r\n        console.assert(vars.length >= n);\r\n        var events = new Array<Event>(N);\r\n        for (i = 0; i < n; ++i) {\r\n            var r = rs[i];\r\n            var v = new Node(vars[i], r, rect.getCentre(r));\r\n            events[i] = new Event(true, v, rect.getOpen(r));\r\n            events[i + n] = new Event(false, v, rect.getClose(r));\r\n        }\r\n        events.sort(compareEvents);\r\n        var cs = new Array<Constraint>();\r\n        var scanline = makeRBTree();\r\n        for (i = 0; i < N; ++i) {\r\n            var e = events[i];\r\n            var v = e.v;\r\n            if (e.isOpen) {\r\n                scanline.insert(v);\r\n                rect.findNeighbours(v, scanline);\r\n            } else {\r\n                // close event\r\n                scanline.remove(v);\r\n                var makeConstraint = (l, r) => {\r\n                    var sep = (rect.getSize(l.r) + rect.getSize(r.r)) / 2 + minSep;\r\n                    cs.push(new Constraint(l.v, r.v, sep));\r\n                };\r\n                var visitNeighbours = (forward, reverse, mkcon) => {\r\n                    var u, it = v[forward].iterator();\r\n                    while ((u = it[forward]()) !== null) {\r\n                        mkcon(u, v);\r\n                        u[reverse].remove(v);\r\n                    }\r\n                };\r\n                visitNeighbours(\"prev\", \"next\", (u, v) => makeConstraint(u, v));\r\n                visitNeighbours(\"next\", \"prev\", (u, v) => makeConstraint(v, u));\r\n            }\r\n        }\r\n        console.assert(scanline.size === 0);\r\n        return cs;\r\n    }\r\n\r\n    function findXNeighbours(v: Node, scanline: RBTree<Node>): void {\r\n        var f = (forward, reverse) => {\r\n            var it = scanline.findIter(v);\r\n            var u;\r\n            while ((u = it[forward]()) !== null) {\r\n                var uovervX = u.r.overlapX(v.r);\r\n                if (uovervX <= 0 || uovervX <= u.r.overlapY(v.r)) {\r\n                    v[forward].insert(u);\r\n                    u[reverse].insert(v);\r\n                }\r\n                if (uovervX <= 0) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        f(\"next\", \"prev\");\r\n        f(\"prev\", \"next\");\r\n    }\r\n\r\n    function findYNeighbours(v: Node, scanline: RBTree<Node>): void {\r\n        var f = (forward, reverse) => {\r\n            var u = scanline.findIter(v)[forward]();\r\n            if (u !== null && u.r.overlapX(v.r) > 0) {\r\n                v[forward].insert(u);\r\n                u[reverse].insert(v);\r\n            }\r\n        }\r\n        f(\"next\", \"prev\");\r\n        f(\"prev\", \"next\");\r\n    }\r\n\r\n    export function generateXConstraints(rs: Rectangle[], vars: Variable[]): Constraint[] {\r\n        return generateConstraints(rs, vars, xRect, 1e-6);\r\n    }\r\n\r\n    export function generateYConstraints(rs: Rectangle[], vars: Variable[]): Constraint[] {\r\n        return generateConstraints(rs, vars, yRect, 1e-6);\r\n    }\r\n\r\n    export function generateXGroupConstraints(root: ProjectionGroup): Constraint[] {\r\n        return generateGroupConstraints(root, xRect, 1e-6);\r\n    }\r\n\r\n    export function generateYGroupConstraints(root: ProjectionGroup): Constraint[] {\r\n        return generateGroupConstraints(root, yRect, 1e-6);\r\n    }\r\n\r\n    export function removeOverlaps(rs: Rectangle[]): void {\r\n        var vs = rs.map(r => new Variable(r.cx()));\r\n        var cs = generateXConstraints(rs, vs);\r\n        var solver = new Solver(vs, cs);\r\n        solver.solve();\r\n        vs.forEach((v, i) => rs[i].setXCentre(v.position()));\r\n        vs = rs.map(r=> new Variable(r.cy()));\r\n        cs = generateYConstraints(rs, vs);\r\n        solver = new Solver(vs, cs);\r\n        solver.solve();\r\n        vs.forEach((v, i) => rs[i].setYCentre(v.position()));\r\n    }\r\n\r\n    export interface GraphNode extends Leaf {\r\n        fixed: boolean;\r\n        fixedWeight?: number;\r\n        width: number;\r\n        height: number;\r\n        x: number;\r\n        y: number;\r\n        px: number;\r\n        py: number;\r\n    }\r\n\r\n    export class IndexedVariable extends Variable {\r\n        constructor(public index: number, w: number) {\r\n            super(0, w);\r\n        }\r\n    }\r\n\r\n    export class Projection {\r\n        private xConstraints: Constraint[];\r\n        private yConstraints: Constraint[];\r\n        private variables: Variable[];\r\n\r\n        constructor(private nodes: GraphNode[],\r\n            private groups: ProjectionGroup[],\r\n            private rootGroup: ProjectionGroup = null,\r\n            constraints: any[]= null,\r\n            private avoidOverlaps: boolean = false)\r\n        {\r\n            this.variables = nodes.map((v, i) => {\r\n                return v.variable = new IndexedVariable(i, 1);\r\n            });\r\n\r\n            if (constraints) this.createConstraints(constraints);\r\n\r\n            if (avoidOverlaps && rootGroup && typeof rootGroup.groups !== 'undefined') {\r\n                nodes.forEach(v => {\r\n\t\t\t\t\tif (!v.width || !v.height)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//If undefined, default to nothing\r\n\t\t\t\t\t\tv.bounds = new Rectangle(v.x, v.x, v.y, v.y);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n                    var w2 = v.width / 2, h2 = v.height / 2;\r\n                    v.bounds = new Rectangle(v.x - w2, v.x + w2, v.y - h2, v.y + h2);\r\n                });\r\n                computeGroupBounds(rootGroup);\r\n                var i = nodes.length;\r\n                groups.forEach(g => {\r\n                    this.variables[i] = g.minVar = new IndexedVariable(i++, typeof g.stiffness !== \"undefined\" ? g.stiffness : 0.01);\r\n                    this.variables[i] = g.maxVar = new IndexedVariable(i++, typeof g.stiffness !== \"undefined\" ? g.stiffness : 0.01);\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        private createSeparation(c: any) : Constraint {\r\n            return new Constraint(\r\n                this.nodes[c.left].variable,\r\n                this.nodes[c.right].variable,\r\n                c.gap,\r\n                typeof c.equality !== \"undefined\" ? c.equality : false);\r\n        }\r\n\r\n        // simple satisfaction of alignment constraints to ensure initial feasibility\r\n        private makeFeasible(c: any) {\r\n            if (!this.avoidOverlaps) return;\r\n            // sort nodes in constraint by position (along \"guideline\")\r\n            var axis = 'x', dim = 'width';\r\n            if (c.axis === 'x') axis = 'y', dim = 'height';\r\n            var vs: GraphNode[] = c.offsets.map(o => this.nodes[o.node]).sort((a, b) => a[axis] - b[axis]);\r\n            var p: GraphNode = null;\r\n            vs.forEach(v => {\r\n                // if two nodes overlap then shove the second one along\r\n                if (p) {\r\n                    let nextPos = p[axis] + p[dim];\r\n                    if (nextPos > v[axis]) {\r\n                        v[axis] = nextPos;\r\n                    }\r\n                }\r\n                p = v;\r\n            });\r\n        }\r\n\r\n        private createAlignment(c: any) {\r\n            var u = this.nodes[c.offsets[0].node].variable;\r\n            this.makeFeasible(c);\r\n            var cs = c.axis === 'x' ? this.xConstraints : this.yConstraints;\r\n            c.offsets.slice(1).forEach(o => {\r\n                var v = this.nodes[o.node].variable;\r\n                cs.push(new Constraint(u, v, o.offset, true));\r\n            });\r\n        }\r\n\r\n        private createConstraints(constraints: any[]) {\r\n            var isSep = c => typeof c.type === 'undefined' || c.type === 'separation';\r\n            this.xConstraints = constraints\r\n                .filter(c => c.axis === \"x\" && isSep(c))\r\n                .map(c => this.createSeparation(c));\r\n            this.yConstraints = constraints\r\n                .filter(c => c.axis === \"y\" && isSep(c))\r\n                .map(c => this.createSeparation(c));\r\n            constraints\r\n                .filter(c => c.type === 'alignment')\r\n                .forEach(c => this.createAlignment(c));\r\n        }\r\n\r\n        private setupVariablesAndBounds(x0: number[], y0: number[], desired: number[], getDesired: (v: GraphNode) => number) {\r\n            this.nodes.forEach((v, i) => {\r\n                if (v.fixed) {\r\n                    v.variable.weight = v.fixedWeight ? v.fixedWeight : 1000;\r\n                    desired[i] = getDesired(v);\r\n                } else {\r\n                    v.variable.weight = 1;\r\n                }\r\n                var w = (v.width || 0) / 2, h = (v.height || 0) / 2;\r\n                var ix = x0[i], iy = y0[i];\r\n                v.bounds = new Rectangle(ix - w, ix + w, iy - h, iy + h);\r\n            });\r\n        }\r\n\r\n        xProject(x0: number[], y0: number[], x: number[]) {\r\n            if (!this.rootGroup && !(this.avoidOverlaps || this.xConstraints)) return;\r\n            this.project(x0, y0, x0, x, v=> v.px, this.xConstraints, generateXGroupConstraints,\r\n                v => v.bounds.setXCentre(x[(<IndexedVariable>v.variable).index] = v.variable.position()),\r\n                g => {\r\n                    var xmin = x[(<IndexedVariable>g.minVar).index] = g.minVar.position();\r\n                    var xmax = x[(<IndexedVariable>g.maxVar).index] = g.maxVar.position();\r\n                    var p2 = g.padding / 2;\r\n                    g.bounds.x = xmin - p2;\r\n                    g.bounds.X = xmax + p2;\r\n                });\r\n        }\r\n\r\n        yProject(x0: number[], y0: number[], y: number[]) {\r\n            if (!this.rootGroup && !this.yConstraints) return;\r\n            this.project(x0, y0, y0, y, v=> v.py, this.yConstraints, generateYGroupConstraints,\r\n                v => v.bounds.setYCentre(y[(<IndexedVariable>v.variable).index] = v.variable.position()),\r\n                g => {\r\n                    var ymin = y[(<IndexedVariable>g.minVar).index] = g.minVar.position();\r\n                    var ymax = y[(<IndexedVariable>g.maxVar).index] = g.maxVar.position();\r\n                    var p2 = g.padding / 2;\r\n                    g.bounds.y = ymin - p2;;\r\n                    g.bounds.Y = ymax + p2;\r\n                });\r\n        }\r\n\r\n        projectFunctions(): { (x0: number[], y0: number[], r: number[]): void }[]{\r\n            return [\r\n                (x0, y0, x) => this.xProject(x0, y0, x),\r\n                (x0, y0, y) => this.yProject(x0, y0, y)\r\n            ];\r\n        }\r\n\r\n        private project(x0: number[], y0: number[], start: number[], desired: number[],\r\n            getDesired: (v: GraphNode) => number,\r\n            cs: Constraint[],\r\n            generateConstraints: (g: ProjectionGroup) => Constraint[],\r\n            updateNodeBounds: (v: GraphNode) => any,\r\n            updateGroupBounds: (g: ProjectionGroup) => any)\r\n        {\r\n            this.setupVariablesAndBounds(x0, y0, desired, getDesired);\r\n            if (this.rootGroup && this.avoidOverlaps) {\r\n                computeGroupBounds(this.rootGroup);\r\n                cs = cs.concat(generateConstraints(this.rootGroup));\r\n            }\r\n            this.solve(this.variables, cs, start, desired);\r\n            this.nodes.forEach(updateNodeBounds);\r\n            if (this.rootGroup && this.avoidOverlaps) {\r\n                this.groups.forEach(updateGroupBounds);\r\n                computeGroupBounds(this.rootGroup);\r\n            }\r\n        }\r\n\r\n        private solve(vs: Variable[], cs: Constraint[], starting: number[], desired: number[]) {\r\n            var solver = new Solver(vs, cs);\r\n            solver.setStartingPositions(starting);\r\n            solver.setDesiredPositions(desired);\r\n            solver.solve();\r\n        }\r\n    }\r\n","import {PairingHeap, PriorityQueue} from './pqueue'\r\n\r\nclass Neighbour {\r\n    constructor(public id: number, public distance: number) { }\r\n}\r\n\r\nclass Node {\r\n    constructor(public id: number) {\r\n        this.neighbours = [];\r\n    }\r\n    neighbours: Neighbour[];\r\n    d: number;\r\n    prev: Node;\r\n    q: PairingHeap<Node>;\r\n}\r\n\r\nclass QueueEntry {\r\n    constructor(public node: Node, public prev: QueueEntry, public d: number) {}\r\n}\r\n\r\n/**\r\n * calculates all-pairs shortest paths or shortest paths from a single node\r\n * @class Calculator\r\n * @constructor\r\n * @param n {number} number of nodes\r\n * @param es {Edge[]} array of edges\r\n */\r\nexport class Calculator<Link> {\r\n    private neighbours: Node[];\r\n\r\n    constructor(public n: number, public es: Link[], getSourceIndex: (l: Link) => number, getTargetIndex: (l: Link) => number, getLength: (l: Link) => number) {\r\n        this.neighbours = new Array(this.n);\r\n        var i = this.n; while (i--) this.neighbours[i] = new Node(i);\r\n\r\n        i = this.es.length; while (i--) {\r\n            var e = this.es[i];\r\n            var u: number = getSourceIndex(e), v: number = getTargetIndex(e);\r\n            var d = getLength(e);\r\n            this.neighbours[u].neighbours.push(new Neighbour(v, d));\r\n            this.neighbours[v].neighbours.push(new Neighbour(u, d));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * compute shortest paths for graph over n nodes with edges an array of source/target pairs\r\n     * edges may optionally have a length attribute.  1 is the default.\r\n     * Uses Johnson's algorithm.\r\n     *\r\n     * @method DistanceMatrix\r\n     * @return the distance matrix\r\n     */\r\n    DistanceMatrix(): number[][] {\r\n        var D = new Array(this.n);\r\n        for (var i = 0; i < this.n; ++i) {\r\n            D[i] = this.dijkstraNeighbours(i);\r\n        }\r\n        return D;\r\n    }\r\n\r\n    /**\r\n     * get shortest paths from a specified start node\r\n     * @method DistancesFromNode\r\n     * @param start node index\r\n     * @return array of path lengths\r\n     */\r\n    DistancesFromNode(start: number): number[] {\r\n        return this.dijkstraNeighbours(start);\r\n    }\r\n\r\n    PathFromNodeToNode(start: number, end: number): number[] {\r\n        return this.dijkstraNeighbours(start, end);\r\n    }\r\n\r\n    // find shortest path from start to end, with the opportunity at\r\n    // each edge traversal to compute a custom cost based on the\r\n    // previous edge.  For example, to penalise bends.\r\n    PathFromNodeToNodeWithPrevCost(\r\n        start: number,\r\n        end: number,\r\n        prevCost: (u:number,v:number,w:number)=>number): number[]\r\n    {\r\n        var q = new PriorityQueue<QueueEntry>((a, b) => a.d <= b.d),\r\n            u: Node = this.neighbours[start],\r\n            qu: QueueEntry = new QueueEntry(u,null,0),\r\n            visitedFrom = {};\r\n        q.push(qu);\r\n        while(!q.empty()) {\r\n            qu = q.pop();\r\n            u = qu.node;\r\n            if (u.id === end) {\r\n                break;\r\n            }\r\n            var i = u.neighbours.length; while (i--) {\r\n                var neighbour = u.neighbours[i],\r\n                    v = this.neighbours[neighbour.id];\r\n\r\n                // don't double back\r\n                if (qu.prev && v.id === qu.prev.node.id) continue;\r\n\r\n                // don't retraverse an edge if it has already been explored\r\n                // from a lower cost route\r\n                var viduid = v.id + ',' + u.id;\r\n                if(viduid in visitedFrom && visitedFrom[viduid] <= qu.d)\r\n                    continue;\r\n\r\n                var cc = qu.prev ? prevCost(qu.prev.node.id, u.id, v.id) : 0,\r\n                    t = qu.d + neighbour.distance + cc;\r\n\r\n                // store cost of this traversal\r\n                visitedFrom[viduid] = t;\r\n                q.push(new QueueEntry(v, qu, t));\r\n            }\r\n        }\r\n        var path:number[] = [];\r\n        while (qu.prev) {\r\n            qu = qu.prev;\r\n            path.push(qu.node.id);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    private dijkstraNeighbours(start: number, dest: number = -1): number[] {\r\n        var q = new PriorityQueue<Node>((a, b) => a.d <= b.d),\r\n            i = this.neighbours.length,\r\n            d: number[] = new Array(i);\r\n        while (i--) {\r\n            var node: Node = this.neighbours[i];\r\n            node.d = i === start ? 0 : Number.POSITIVE_INFINITY;\r\n            node.q = q.push(node);\r\n        }\r\n        while (!q.empty()) {\r\n            // console.log(q.toString(function (u) { return u.id + \"=\" + (u.d === Number.POSITIVE_INFINITY ? \"\\u221E\" : u.d.toFixed(2) )}));\r\n            var u = q.pop();\r\n            d[u.id] = u.d;\r\n            if (u.id === dest) {\r\n                var path: number[] = [];\r\n                var v = u;\r\n                while (typeof v.prev !== 'undefined') {\r\n                    path.push(v.prev.id);\r\n                    v = v.prev;\r\n                }\r\n                return path;\r\n            }\r\n            i = u.neighbours.length; while (i--) {\r\n                var neighbour = u.neighbours[i];\r\n                var v = this.neighbours[neighbour.id];\r\n                var t = u.d + neighbour.distance;\r\n                if (u.d !== Number.MAX_VALUE && v.d > t) {\r\n                    v.d = t;\r\n                    v.prev = u;\r\n                    q.reduceKey(v.q, v, (e,q)=>e.q = q);\r\n                }\r\n            }\r\n        }\r\n        return d;\r\n    }\r\n}\r\n","    export interface LinkAccessor<Link> {\r\n        getSourceIndex(l: Link): number;\r\n        getTargetIndex(l: Link): number;\r\n    }\r\n\r\n    export interface LinkLengthAccessor<Link> extends LinkAccessor<Link> {\r\n        setLength(l: Link, value: number): void;\r\n    }\r\n\r\n    // compute the size of the union of two sets a and b\r\n    function unionCount(a: any, b: any): number {\r\n        var u = {};\r\n        for (var i in a) u[i] = {};\r\n        for (var i in b) u[i] = {};\r\n        return Object.keys(u).length;\r\n    }\r\n\r\n    // compute the size of the intersection of two sets a and b\r\n    function intersectionCount(a: number[], b: number[]): number {\r\n        var n = 0;\r\n        for (var i in a) if (typeof b[i] !== 'undefined') ++n;\r\n        return n;\r\n    }\r\n\r\n    function getNeighbours<Link>(links: Link[], la: LinkAccessor<Link>): any {\r\n        var neighbours = {};\r\n        var addNeighbours = (u, v) => {\r\n            if (typeof neighbours[u] === 'undefined')\r\n                neighbours[u] = {};\r\n            neighbours[u][v] = {};\r\n        };\r\n        links.forEach(e => {\r\n            var u = la.getSourceIndex(e), v = la.getTargetIndex(e);\r\n            addNeighbours(u, v);\r\n            addNeighbours(v, u);\r\n        });\r\n        return neighbours;\r\n    }\r\n\r\n    // modify the lengths of the specified links by the result of function f weighted by w\r\n    function computeLinkLengths<Link>(links: Link[], w: number, f: (a: any, b: any) => number, la: LinkLengthAccessor<Link>) {\r\n        var neighbours = getNeighbours(links, la);\r\n        links.forEach(l => {\r\n            var a = neighbours[la.getSourceIndex(l)];\r\n            var b = neighbours[la.getTargetIndex(l)];\r\n            la.setLength(l, 1 + w * f(a, b));\r\n        });\r\n    }\r\n\r\n    /** modify the specified link lengths based on the symmetric difference of their neighbours\r\n     * @class symmetricDiffLinkLengths\r\n     */\r\n    export function symmetricDiffLinkLengths<Link>(links: Link[], la: LinkLengthAccessor<Link>, w: number = 1) {\r\n        computeLinkLengths(links, w, (a, b) => Math.sqrt(unionCount(a, b) - intersectionCount(a, b)), la);\r\n    }\r\n\r\n    /** modify the specified links lengths based on the jaccard difference between their neighbours\r\n     * @class jaccardLinkLengths\r\n     */\r\n    export function jaccardLinkLengths<Link>(links: Link[], la: LinkLengthAccessor<Link>, w: number = 1) {\r\n        computeLinkLengths(links, w, (a, b) =>\r\n            Math.min(Object.keys(a).length, Object.keys(b).length) < 1.1 ? 0 : intersectionCount(a, b) / unionCount(a, b)\r\n            , la);\r\n    }\r\n\r\n    export interface IConstraint {\r\n        left: number;\r\n        right: number;\r\n        gap: number;\r\n    }\r\n\r\n    export interface DirectedEdgeConstraints {\r\n        axis: string;\r\n        gap: number;\r\n    }\r\n\r\n    export interface LinkSepAccessor<Link> extends LinkAccessor<Link> {\r\n        getMinSeparation(l: Link): number;\r\n    }\r\n\r\n    /** generate separation constraints for all edges unless both their source and sink are in the same strongly connected component\r\n     * @class generateDirectedEdgeConstraints\r\n     */\r\n    export function generateDirectedEdgeConstraints<Link>(n: number, links: Link[], axis: string,\r\n        la: LinkSepAccessor<Link>): IConstraint[]\r\n    {\r\n        var components = stronglyConnectedComponents(n, links, la);\r\n        var nodes = {};\r\n        components.forEach((c,i) =>\r\n            c.forEach(v => nodes[v] = i)\r\n        );\r\n        var constraints: any[] = [];\r\n        links.forEach(l => {\r\n            var ui = la.getSourceIndex(l), vi = la.getTargetIndex(l),\r\n                u = nodes[ui], v = nodes[vi];\r\n            if (u !== v) {\r\n                constraints.push({\r\n                    axis: axis,\r\n                    left: ui,\r\n                    right: vi,\r\n                    gap: la.getMinSeparation(l)\r\n                });\r\n            }\r\n        });\r\n        return constraints;\r\n    }\r\n\r\n    /**\r\n     * Tarjan's strongly connected components algorithm for directed graphs\r\n     * returns an array of arrays of node indicies in each of the strongly connected components.\r\n     * a vertex not in a SCC of two or more nodes is it's own SCC.\r\n     * adaptation of https://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm\r\n     */\r\n    export function stronglyConnectedComponents<Link>(numVertices: number, edges: Link[], la: LinkAccessor<Link>): number[][]{\r\n        var nodes = [];\r\n        var index = 0;\r\n        var stack = [];\r\n        var components = [];\r\n        function strongConnect(v) {\r\n            // Set the depth index for v to the smallest unused index\r\n            v.index = v.lowlink = index++;\r\n            stack.push(v);\r\n            v.onStack = true;\r\n\r\n            // Consider successors of v\r\n            for (var w of v.out) {\r\n                if (typeof w.index === 'undefined') {\r\n                    // Successor w has not yet been visited; recurse on it\r\n                    strongConnect(w);\r\n                    v.lowlink = Math.min(v.lowlink, w.lowlink);\r\n                } else if (w.onStack) {\r\n                    // Successor w is in stack S and hence in the current SCC\r\n                    v.lowlink = Math.min(v.lowlink, w.index);\r\n                }\r\n            }\r\n\r\n            // If v is a root node, pop the stack and generate an SCC\r\n            if (v.lowlink === v.index) {\r\n                // start a new strongly connected component\r\n                var component = [];\r\n                while (stack.length) {\r\n                    w = stack.pop();\r\n                    w.onStack = false;\r\n                    //add w to current strongly connected component\r\n                    component.push(w);\r\n                    if (w === v) break;\r\n                }\r\n                // output the current strongly connected component\r\n                components.push(component.map(v => v.id));\r\n            }\r\n        }\r\n        for (var i = 0; i < numVertices; i++) {\r\n            nodes.push({id: i, out: []});\r\n        }\r\n        for (var e of edges) {\r\n            let v = nodes[la.getSourceIndex(e)],\r\n                w = nodes[la.getTargetIndex(e)];\r\n            v.out.push(w);\r\n        }\r\n        for (var v of nodes) if (typeof v.index === 'undefined') strongConnect(v);\r\n        return components;\r\n    }\r\n","    /**\r\n     * Descent respects a collection of locks over nodes that should not move\r\n     * @class Locks\r\n     */\r\n    export class Locks {\r\n        locks: { [key:number]:number[]} = {};\r\n        /**\r\n         * add a lock on the node at index id\r\n         * @method add\r\n         * @param id index of node to be locked\r\n         * @param x required position for node\r\n         */\r\n        add(id: number, x: number[]) {\r\n/* DEBUG\r\n            if (isNaN(x[0]) || isNaN(x[1])) debugger;\r\nDEBUG */\r\n            this.locks[id] = x;\r\n        }\r\n        /**\r\n         * @method clear clear all locks\r\n         */\r\n        clear() {\r\n            this.locks = {};\r\n        }\r\n        /**\r\n         * @isEmpty\r\n         * @returns false if no locks exist\r\n         */\r\n        isEmpty(): boolean {\r\n            for (var l in this.locks) return false;\r\n            return true;\r\n        }\r\n        /**\r\n         * perform an operation on each lock\r\n         * @apply\r\n         */\r\n        apply(f: (id: number, x: number[]) => void) {\r\n            for (var l in this.locks) {\r\n                f(Number(l), this.locks[l]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Uses a gradient descent approach to reduce a stress or p-stress goal function over a graph with specified ideal edge lengths or a square matrix of dissimilarities.\r\n     * The standard stress function over a graph nodes with position vectors x,y,z is (mathematica input):\r\n     *   stress[x_,y_,z_,D_,w_]:=Sum[w[[i,j]] (length[x[[i]],y[[i]],z[[i]],x[[j]],y[[j]],z[[j]]]-d[[i,j]])^2,{i,Length[x]-1},{j,i+1,Length[x]}]\r\n     * where: D is a square matrix of ideal separations between nodes, w is matrix of weights for those separations\r\n     *        length[x1_, y1_, z1_, x2_, y2_, z2_] = Sqrt[(x1 - x2)^2 + (y1 - y2)^2 + (z1 - z2)^2]\r\n     * below, we use wij = 1/(Dij^2)\r\n     *\r\n     * @class Descent\r\n     */\r\n    export class Descent {\r\n        public threshold: number = 0.0001;\r\n        /** Hessian Matrix\r\n         * @property H {number[][][]}\r\n         */\r\n        public H: number[][][];\r\n        /** gradient vector\r\n         * @property G {number[][]}\r\n         */\r\n        public g: number[][];\r\n        /** positions vector\r\n         * @property x {number[][]}\r\n         */\r\n        public x: number[][];\r\n        /**\r\n         * @property k {number} dimensionality\r\n         */\r\n        public k: number;\r\n        /**\r\n         * number of data-points / nodes / size of vectors/matrices\r\n         * @property n {number}\r\n         */\r\n        public n: number;\r\n\r\n        public locks: Locks;\r\n\r\n        private static zeroDistance: number = 1e-10;\r\n        private minD: number;\r\n\r\n        // pool of arrays of size n used internally, allocated in constructor\r\n        private Hd: number[][];\r\n        private a: number[][];\r\n        private b: number[][];\r\n        private c: number[][];\r\n        private d: number[][];\r\n        private e: number[][];\r\n        private ia: number[][];\r\n        private ib: number[][];\r\n        private xtmp: number[][];\r\n\r\n\r\n        // Parameters for grid snap stress.\r\n        // TODO: Make a pluggable \"StressTerm\" class instead of this\r\n        // mess.\r\n        public numGridSnapNodes: number = 0;\r\n        public snapGridSize: number = 100;\r\n        public snapStrength: number = 1000;\r\n        public scaleSnapByMaxH: boolean = false;\r\n\r\n        private random = new PseudoRandom();\r\n\r\n        public project: { (x0: number[], y0: number[], r: number[]): void }[] = null;\r\n\r\n        /**\r\n         * @method constructor\r\n         * @param x {number[][]} initial coordinates for nodes\r\n         * @param D {number[][]} matrix of desired distances between pairs of nodes\r\n         * @param G {number[][]} [default=null] if specified, G is a matrix of weights for goal terms between pairs of nodes.\r\n         * If G[i][j] > 1 and the separation between nodes i and j is greater than their ideal distance, then there is no contribution for this pair to the goal\r\n         * If G[i][j] <= 1 then it is used as a weighting on the contribution of the variance between ideal and actual separation between i and j to the goal function\r\n         */\r\n        constructor(x: number[][], public D: number[][], public G: number[][]= null) {\r\n            this.x = x;\r\n            this.k = x.length; // dimensionality\r\n            var n = this.n = x[0].length; // number of nodes\r\n            this.H = new Array(this.k);\r\n            this.g = new Array(this.k);\r\n            this.Hd = new Array(this.k);\r\n            this.a = new Array(this.k);\r\n            this.b = new Array(this.k);\r\n            this.c = new Array(this.k);\r\n            this.d = new Array(this.k);\r\n            this.e = new Array(this.k);\r\n            this.ia = new Array(this.k);\r\n            this.ib = new Array(this.k);\r\n            this.xtmp = new Array(this.k);\r\n            this.locks = new Locks();\r\n            this.minD = Number.MAX_VALUE;\r\n            var i = n, j;\r\n            while (i--) {\r\n                j = n;\r\n                while (--j > i) {\r\n                    var d = D[i][j];\r\n                    if (d > 0 && d < this.minD) {\r\n                        this.minD = d;\r\n                    }\r\n                }\r\n            }\r\n            if (this.minD === Number.MAX_VALUE) this.minD = 1;\r\n            i = this.k;\r\n            while (i--) {\r\n                this.g[i] = new Array(n);\r\n                this.H[i] = new Array(n);\r\n                j = n;\r\n                while (j--) {\r\n                    this.H[i][j] = new Array(n);\r\n                }\r\n                this.Hd[i] = new Array(n);\r\n                this.a[i] = new Array(n);\r\n                this.b[i] = new Array(n);\r\n                this.c[i] = new Array(n);\r\n                this.d[i] = new Array(n);\r\n                this.e[i] = new Array(n);\r\n                this.ia[i] = new Array(n);\r\n                this.ib[i] = new Array(n);\r\n                this.xtmp[i] = new Array(n);\r\n            }\r\n        }\r\n\r\n        public static createSquareMatrix(n: number, f: (i: number, j: number) => number): number[][] {\r\n            var M = new Array(n);\r\n            for (var i = 0; i < n; ++i) {\r\n                M[i] = new Array(n);\r\n                for (var j = 0; j < n; ++j) {\r\n                    M[i][j] = f(i, j);\r\n                }\r\n            }\r\n            return M;\r\n        }\r\n\r\n        private offsetDir(): number[] {\r\n            var u = new Array(this.k);\r\n            var l = 0;\r\n            for (var i = 0; i < this.k; ++i) {\r\n                var x = u[i] = this.random.getNextBetween(0.01, 1) - 0.5;\r\n                l += x * x;\r\n            }\r\n            l = Math.sqrt(l);\r\n            return u.map(x=> x *= this.minD / l);\r\n        }\r\n\r\n        // compute first and second derivative information storing results in this.g and this.H\r\n        public computeDerivatives(x: number[][]) {\r\n            var n: number = this.n;\r\n            if (n < 1) return;\r\n            var i: number;\r\n/* DEBUG\r\n            for (var u: number = 0; u < n; ++u)\r\n                for (i = 0; i < this.k; ++i)\r\n                    if (isNaN(x[i][u])) debugger;\r\nDEBUG */\r\n            var d: number[] = new Array(this.k);\r\n            var d2: number[] = new Array(this.k);\r\n            var Huu: number[] = new Array(this.k);\r\n            var maxH: number = 0;\r\n            for (var u: number = 0; u < n; ++u) {\r\n                for (i = 0; i < this.k; ++i) Huu[i] = this.g[i][u] = 0;\r\n                for (var v = 0; v < n; ++v) {\r\n                    if (u === v) continue;\r\n\r\n                    // The following loop randomly displaces nodes that are at identical positions\r\n                    var maxDisplaces = n; // avoid infinite loop in the case of numerical issues, such as huge values\r\n                    while (maxDisplaces--) {\r\n                        var sd2 = 0;\r\n                        for (i = 0; i < this.k; ++i) {\r\n                            var dx = d[i] = x[i][u] - x[i][v];\r\n                            sd2 += d2[i] = dx * dx;\r\n                        }\r\n                        if (sd2 > 1e-9) break;\r\n                        var rd = this.offsetDir();\r\n                        for (i = 0; i < this.k; ++i) x[i][v] += rd[i];\r\n                    }\r\n                    var l: number = Math.sqrt(sd2);\r\n                    var D: number = this.D[u][v];\r\n                    var weight = this.G != null ? this.G[u][v] : 1;\r\n                    if (weight > 1 && l > D || !isFinite(D)) {\r\n                        for (i = 0; i < this.k; ++i) this.H[i][u][v] = 0;\r\n                        continue;\r\n                    }\r\n                    if (weight > 1) {\r\n                        weight = 1;\r\n                    }\r\n                    var D2: number = D * D;\r\n                    var gs: number = 2 * weight * (l - D) / (D2 * l);\r\n                    var l3 = l * l * l;\r\n                    var hs: number = 2 * -weight / (D2 * l3);\r\n                    if (!isFinite(gs))\r\n                        console.log(gs);\r\n                    for (i = 0; i < this.k; ++i) {\r\n                        this.g[i][u] += d[i] * gs;\r\n                        Huu[i] -= this.H[i][u][v] = hs * (l3 + D * (d2[i] - sd2) + l * sd2);\r\n                    }\r\n                }\r\n                for (i = 0; i < this.k; ++i) maxH = Math.max(maxH, this.H[i][u][u] = Huu[i]);\r\n            }\r\n            // Grid snap forces\r\n            var r = this.snapGridSize/2;\r\n            var g = this.snapGridSize;\r\n            var w = this.snapStrength;\r\n            var k = w / (r * r);\r\n            var numNodes = this.numGridSnapNodes;\r\n            //var numNodes = n;\r\n            for (var u: number = 0; u < numNodes; ++u) {\r\n                for (i = 0; i < this.k; ++i) {\r\n                    var xiu = this.x[i][u];\r\n                    var m = xiu / g;\r\n                    var f = m % 1;\r\n                    var q = m - f;\r\n                    var a = Math.abs(f);\r\n                    var dx = (a <= 0.5) ? xiu - q * g :\r\n                        (xiu > 0) ? xiu - (q + 1) * g : xiu - (q - 1) * g;\r\n                    if (-r < dx && dx <= r) {\r\n                        if (this.scaleSnapByMaxH) {\r\n                            this.g[i][u] += maxH * k * dx;\r\n                            this.H[i][u][u] += maxH * k;\r\n                        } else {\r\n                            this.g[i][u] += k * dx;\r\n                            this.H[i][u][u] += k;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!this.locks.isEmpty()) {\r\n                this.locks.apply((u, p) => {\r\n                    for (i = 0; i < this.k; ++i) {\r\n                        this.H[i][u][u] += maxH;\r\n                        this.g[i][u] -= maxH * (p[i] - x[i][u]);\r\n                    }\r\n                });\r\n            }\r\n/* DEBUG\r\n            for (var u: number = 0; u < n; ++u)\r\n                for (i = 0; i < this.k; ++i) {\r\n                    if (isNaN(this.g[i][u])) debugger;\r\n                    for (var v: number = 0; v < n; ++v)\r\n                        if (isNaN(this.H[i][u][v])) debugger;\r\n                }\r\nDEBUG */\r\n        }\r\n\r\n        private static dotProd(a: number[], b: number[]): number {\r\n            var x = 0, i = a.length;\r\n            while (i--) x += a[i] * b[i];\r\n            return x;\r\n        }\r\n\r\n        // result r = matrix m * vector v\r\n        private static rightMultiply(m: number[][], v: number[], r: number[]) {\r\n            var i = m.length;\r\n            while (i--) r[i] = Descent.dotProd(m[i], v);\r\n        }\r\n\r\n        // computes the optimal step size to take in direction d using the\r\n        // derivative information in this.g and this.H\r\n        // returns the scalar multiplier to apply to d to get the optimal step\r\n        public computeStepSize(d: number[][]): number {\r\n            var numerator = 0, denominator = 0;\r\n            for (var i = 0; i < this.k; ++i) {\r\n                numerator += Descent.dotProd(this.g[i], d[i]);\r\n                Descent.rightMultiply(this.H[i], d[i], this.Hd[i]);\r\n                denominator += Descent.dotProd(d[i], this.Hd[i]);\r\n            }\r\n            if (denominator === 0 || !isFinite(denominator)) return 0;\r\n            return 1 * numerator / denominator;\r\n        }\r\n\r\n        public reduceStress(): number {\r\n            this.computeDerivatives(this.x);\r\n            var alpha = this.computeStepSize(this.g);\r\n            for (var i = 0; i < this.k; ++i) {\r\n                this.takeDescentStep(this.x[i], this.g[i], alpha);\r\n            }\r\n            return this.computeStress();\r\n        }\r\n\r\n        private static copy(a: number[][], b: number[][]): void {\r\n            var m = a.length, n = b[0].length;\r\n            for (var i = 0; i < m; ++i) {\r\n                for (var j = 0; j < n; ++j) {\r\n                    b[i][j] = a[i][j];\r\n                }\r\n            }\r\n        }\r\n\r\n        // takes a step of stepSize * d from x0, and then project against any constraints.\r\n        // result is returned in r.\r\n        // x0: starting positions\r\n        // r: result positions will be returned here\r\n        // d: unconstrained descent vector\r\n        // stepSize: amount to step along d\r\n        private stepAndProject(x0: number[][], r: number[][], d: number[][], stepSize: number): void {\r\n            Descent.copy(x0, r);\r\n            this.takeDescentStep(r[0], d[0], stepSize);\r\n            if (this.project) this.project[0](x0[0], x0[1], r[0]);\r\n            this.takeDescentStep(r[1], d[1], stepSize);\r\n            if (this.project) this.project[1](r[0], x0[1], r[1]);\r\n\r\n            // todo: allow projection against constraints in higher dimensions\r\n            for (var i = 2; i < this.k; i++)\r\n                this.takeDescentStep(r[i], d[i], stepSize);\r\n\r\n            // the following makes locks extra sticky... but hides the result of the projection from the consumer\r\n            //if (!this.locks.isEmpty()) {\r\n            //    this.locks.apply((u, p) => {\r\n            //        for (var i = 0; i < this.k; i++) {\r\n            //            r[i][u] = p[i];\r\n            //        }\r\n            //    });\r\n            //}\r\n        }\r\n\r\n        private static mApply(m: number, n: number, f: (i: number, j: number) => any) {\r\n            var i = m; while (i-- > 0) {\r\n                var j = n; while (j-- > 0) f(i, j);\r\n            }\r\n        }\r\n        private matrixApply(f: (i: number, j: number) => any) {\r\n            Descent.mApply(this.k, this.n, f);\r\n        }\r\n\r\n        private computeNextPosition(x0: number[][], r: number[][]): void {\r\n            this.computeDerivatives(x0);\r\n            var alpha = this.computeStepSize(this.g);\r\n            this.stepAndProject(x0, r, this.g, alpha);\r\n/* DEBUG\r\n            for (var u: number = 0; u < this.n; ++u)\r\n                for (var i = 0; i < this.k; ++i)\r\n                    if (isNaN(r[i][u])) debugger;\r\nDEBUG */\r\n            if (this.project) {\r\n                this.matrixApply((i, j) => this.e[i][j] = x0[i][j] - r[i][j]);\r\n                var beta = this.computeStepSize(this.e);\r\n                beta = Math.max(0.2, Math.min(beta, 1));\r\n                this.stepAndProject(x0, r, this.e, beta);\r\n            }\r\n        }\r\n\r\n        public run(iterations: number): number {\r\n            var stress = Number.MAX_VALUE, converged = false;\r\n            while (!converged && iterations-- > 0) {\r\n                var s = this.rungeKutta();\r\n                converged = Math.abs(stress / s - 1) < this.threshold;\r\n                stress = s;\r\n            }\r\n            return stress;\r\n        }\r\n\r\n        public rungeKutta(): number {\r\n            this.computeNextPosition(this.x, this.a);\r\n            Descent.mid(this.x, this.a, this.ia);\r\n            this.computeNextPosition(this.ia, this.b);\r\n            Descent.mid(this.x, this.b, this.ib);\r\n            this.computeNextPosition(this.ib, this.c);\r\n            this.computeNextPosition(this.c, this.d);\r\n            var disp = 0;\r\n            this.matrixApply((i, j) => {\r\n                var x = (this.a[i][j] + 2.0 * this.b[i][j] + 2.0 * this.c[i][j] + this.d[i][j]) / 6.0,\r\n                    d = this.x[i][j] - x;\r\n                disp += d * d;\r\n                this.x[i][j] = x;\r\n            });\r\n            return disp;\r\n        }\r\n\r\n        private static mid(a: number[][], b: number[][], m: number[][]): void {\r\n            Descent.mApply(a.length, a[0].length, (i, j) =>\r\n                m[i][j] = a[i][j] + (b[i][j] - a[i][j]) / 2.0);\r\n        }\r\n\r\n        public takeDescentStep(x: number[], d: number[], stepSize: number): void {\r\n            for (var i = 0; i < this.n; ++i) {\r\n                x[i] = x[i] - stepSize * d[i];\r\n            }\r\n        }\r\n\r\n        public computeStress(): number {\r\n            var stress = 0;\r\n            for (var u = 0, nMinus1 = this.n - 1; u < nMinus1; ++u) {\r\n                for (var v = u + 1, n = this.n; v < n; ++v) {\r\n                    var l = 0;\r\n                    for (var i = 0; i < this.k; ++i) {\r\n                        var dx = this.x[i][u] - this.x[i][v];\r\n                        l += dx * dx;\r\n                    }\r\n                    l = Math.sqrt(l);\r\n                    var d = this.D[u][v];\r\n                    if (!isFinite(d)) continue;\r\n                    var rl = d - l;\r\n                    var d2 = d * d;\r\n                    stress += rl * rl / d2;\r\n                }\r\n            }\r\n            return stress;\r\n        }\r\n    }\r\n\r\n    // Linear congruential pseudo random number generator\r\n    export class PseudoRandom {\r\n        private a: number = 214013;\r\n        private c: number = 2531011;\r\n        private m: number = 2147483648;\r\n        private range: number = 32767;\r\n\r\n        constructor(public seed: number = 1) { }\r\n\r\n        // random real between 0 and 1\r\n        getNext(): number {\r\n            this.seed = (this.seed * this.a + this.c) % this.m;\r\n            return (this.seed >> 16) / this.range;\r\n        }\r\n\r\n        // random real between min and max\r\n        getNextBetween(min: number, max: number) {\r\n            return min + this.getNext() * (max - min);\r\n        }\r\n    }\r\n","    export class PositionStats {\r\n        AB: number = 0;\r\n        AD: number = 0;\r\n        A2: number = 0;\r\n\r\n        constructor(public scale: number) {}\r\n\r\n        addVariable(v: Variable): void {\r\n            var ai = this.scale / v.scale;\r\n            var bi = v.offset / v.scale;\r\n            var wi = v.weight;\r\n            this.AB += wi * ai * bi;\r\n            this.AD += wi * ai * v.desiredPosition;\r\n            this.A2 += wi * ai * ai;\r\n        }\r\n\r\n        getPosn(): number {\r\n            return (this.AD - this.AB) / this.A2;\r\n        }\r\n    }\r\n\r\n    export class Constraint {\r\n        lm: number;\r\n        active: boolean = false;\r\n        unsatisfiable: boolean = false;\r\n\r\n        constructor(public left: Variable, public right: Variable, public gap: number, public equality: boolean = false) {\r\n            this.left = left;\r\n            this.right = right;\r\n            this.gap = gap;\r\n            this.equality = equality;\r\n        }\r\n\r\n        slack(): number {\r\n            return this.unsatisfiable ? Number.MAX_VALUE\r\n                : this.right.scale * this.right.position() - this.gap\r\n                - this.left.scale * this.left.position();\r\n        }\r\n    }\r\n\r\n    export class Variable {\r\n        offset: number = 0;\r\n        block: Block;\r\n        cIn: Constraint[];\r\n        cOut: Constraint[];\r\n\r\n        constructor(public desiredPosition: number, public weight: number = 1, public scale: number = 1) {}\r\n\r\n        dfdv(): number {\r\n            return 2.0 * this.weight * (this.position() - this.desiredPosition);\r\n        }\r\n\r\n        position(): number {\r\n            return (this.block.ps.scale * this.block.posn + this.offset) / this.scale;\r\n        }\r\n\r\n        // visit neighbours by active constraints within the same block\r\n        visitNeighbours(prev: Variable, f: (c: Constraint, next: Variable) => void ): void {\r\n            var ff = (c, next) => c.active && prev !== next && f(c, next);\r\n            this.cOut.forEach(c=> ff(c, c.right));\r\n            this.cIn.forEach(c=> ff(c, c.left));\r\n        }\r\n    }\r\n\r\n    export class Block {\r\n        vars: Variable[] = [];\r\n        posn: number;\r\n        ps: PositionStats;\r\n        blockInd: number;\r\n\r\n        constructor(v: Variable) {\r\n            v.offset = 0;\r\n            this.ps = new PositionStats(v.scale);\r\n            this.addVariable(v);\r\n        }\r\n\r\n        private addVariable(v: Variable): void {\r\n            v.block = this;\r\n            this.vars.push(v);\r\n            this.ps.addVariable(v);\r\n            this.posn = this.ps.getPosn();\r\n        }\r\n\r\n        // move the block where it needs to be to minimize cost\r\n        updateWeightedPosition(): void {\r\n            this.ps.AB = this.ps.AD = this.ps.A2 = 0;\r\n            for (var i = 0, n = this.vars.length; i < n; ++i)\r\n                this.ps.addVariable(this.vars[i]);\r\n            this.posn = this.ps.getPosn();\r\n        }\r\n\r\n        private compute_lm(v: Variable, u: Variable, postAction: (c: Constraint)=>void): number {\r\n            var dfdv = v.dfdv();\r\n            v.visitNeighbours(u, (c, next) => {\r\n                var _dfdv = this.compute_lm(next, v, postAction);\r\n                if (next === c.right) {\r\n                    dfdv += _dfdv * c.left.scale;\r\n                    c.lm = _dfdv;\r\n                } else {\r\n                    dfdv += _dfdv * c.right.scale;\r\n                    c.lm = -_dfdv;\r\n                }\r\n                postAction(c);\r\n            });\r\n            return dfdv / v.scale;\r\n        }\r\n\r\n        private populateSplitBlock(v: Variable, prev: Variable): void {\r\n            v.visitNeighbours(prev, (c, next) => {\r\n                next.offset = v.offset + (next === c.right ? c.gap : -c.gap);\r\n                this.addVariable(next);\r\n                this.populateSplitBlock(next, v);\r\n            });\r\n        }\r\n\r\n        // traverse the active constraint tree applying visit to each active constraint\r\n        traverse(visit: (c: Constraint) => any, acc: any[], v: Variable = this.vars[0], prev: Variable=null) {\r\n            v.visitNeighbours(prev, (c, next) => {\r\n                acc.push(visit(c));\r\n                this.traverse(visit, acc, next, v);\r\n            });\r\n        }\r\n\r\n        // calculate lagrangian multipliers on constraints and\r\n        // find the active constraint in this block with the smallest lagrangian.\r\n        // if the lagrangian is negative, then the constraint is a split candidate.\r\n        findMinLM(): Constraint {\r\n            var m: Constraint = null;\r\n            this.compute_lm(this.vars[0], null, c=> {\r\n                if (!c.equality && (m === null || c.lm < m.lm)) m = c;\r\n            });\r\n            return m;\r\n        }\r\n\r\n        private findMinLMBetween(lv: Variable, rv: Variable): Constraint {\r\n            this.compute_lm(lv, null, () => {});\r\n            var m = null;\r\n            this.findPath(lv, null, rv, (c, next)=> {\r\n                if (!c.equality && c.right === next && (m === null || c.lm < m.lm)) m = c;\r\n            });\r\n            return m;\r\n        }\r\n\r\n        private findPath(v: Variable, prev: Variable, to: Variable, visit: (c: Constraint, next:Variable)=>void): boolean {\r\n            var endFound = false;\r\n            v.visitNeighbours(prev, (c, next) => {\r\n                if (!endFound && (next === to || this.findPath(next, v, to, visit)))\r\n                {\r\n                    endFound = true;\r\n                    visit(c, next);\r\n                }\r\n            });\r\n            return endFound;\r\n        }\r\n\r\n        // Search active constraint tree from u to see if there is a directed path to v.\r\n        // Returns true if path is found.\r\n        isActiveDirectedPathBetween(u: Variable, v: Variable) : boolean {\r\n            if (u === v) return true;\r\n            var i = u.cOut.length;\r\n            while(i--) {\r\n                var c = u.cOut[i];\r\n                if (c.active && this.isActiveDirectedPathBetween(c.right, v))\r\n                    return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // split the block into two by deactivating the specified constraint\r\n        static split(c: Constraint): Block[]{\r\n/* DEBUG\r\n            console.log(\"split on \" + c);\r\n            console.assert(c.active, \"attempt to split on inactive constraint\");\r\nDEBUG */\r\n            c.active = false;\r\n            return [Block.createSplitBlock(c.left), Block.createSplitBlock(c.right)];\r\n        }\r\n\r\n        private static createSplitBlock(startVar: Variable): Block {\r\n            var b = new Block(startVar);\r\n            b.populateSplitBlock(startVar, null);\r\n            return b;\r\n        }\r\n\r\n        // find a split point somewhere between the specified variables\r\n        splitBetween(vl: Variable, vr: Variable): { constraint: Constraint; lb: Block; rb: Block } {\r\n/* DEBUG\r\n            console.assert(vl.block === this);\r\n            console.assert(vr.block === this);\r\nDEBUG */\r\n            var c = this.findMinLMBetween(vl, vr);\r\n            if (c !== null) {\r\n                var bs = Block.split(c);\r\n                return { constraint: c, lb: bs[0], rb: bs[1] };\r\n            }\r\n            // couldn't find a split point - for example the active path is all equality constraints\r\n            return null;\r\n        }\r\n\r\n        mergeAcross(b: Block, c: Constraint, dist: number): void {\r\n            c.active = true;\r\n            for (var i = 0, n = b.vars.length; i < n; ++i) {\r\n                var v = b.vars[i];\r\n                v.offset += dist;\r\n                this.addVariable(v);\r\n            }\r\n            this.posn = this.ps.getPosn();\r\n        }\r\n\r\n        cost(): number {\r\n            var sum = 0, i = this.vars.length;\r\n            while (i--) {\r\n                var v = this.vars[i],\r\n                    d = v.position() - v.desiredPosition;\r\n                sum += d * d * v.weight;\r\n            }\r\n            return sum;\r\n        }\r\n\r\n/* DEBUG\r\n        toString(): string {\r\n            var cs = [];\r\n            this.traverse(c=> c.toString() + \"\\n\", cs)\r\n            return \"b\"+this.blockInd + \"@\" + this.posn + \": vars=\" + this.vars.map(v=> v.toString()+\":\"+v.offset) + \";\\n cons=\\n\" + cs;\r\n        }\r\nDEBUG */\r\n    }\r\n\r\n    export class Blocks {\r\n        private list: Block[];\r\n\r\n        constructor(public vs: Variable[]) {\r\n            var n = vs.length;\r\n            this.list = new Array(n);\r\n            while (n--) {\r\n                var b = new Block(vs[n]);\r\n                this.list[n] = b;\r\n                b.blockInd = n;\r\n            }\r\n        }\r\n\r\n        cost(): number {\r\n            var sum = 0, i = this.list.length;\r\n            while (i--) sum += this.list[i].cost();\r\n            return sum;\r\n        }\r\n\r\n        insert(b: Block) {\r\n/* DEBUG\r\n            console.assert(!this.contains(b), \"blocks error: tried to reinsert block \" + b.blockInd)\r\nDEBUG */\r\n            b.blockInd = this.list.length;\r\n            this.list.push(b);\r\n/* DEBUG\r\n            console.log(\"insert block: \" + b.blockInd);\r\n            this.contains(b);\r\nDEBUG */\r\n        }\r\n\r\n        remove(b: Block) {\r\n/* DEBUG\r\n            console.log(\"remove block: \" + b.blockInd);\r\n            console.assert(this.contains(b));\r\nDEBUG */\r\n            var last = this.list.length - 1;\r\n            var swapBlock = this.list[last];\r\n            this.list.length = last;\r\n            if (b !== swapBlock) {\r\n                this.list[b.blockInd] = swapBlock;\r\n                swapBlock.blockInd = b.blockInd;\r\n/* DEBUG\r\n                console.assert(this.contains(swapBlock));\r\nDEBUG */\r\n            }\r\n        }\r\n\r\n        // merge the blocks on either side of the specified constraint, by copying the smaller block into the larger\r\n        // and deleting the smaller.\r\n        merge(c: Constraint): void {\r\n            var l = c.left.block, r = c.right.block;\r\n/* DEBUG\r\n            console.assert(l!==r, \"attempt to merge within the same block\");\r\nDEBUG */\r\n            var dist = c.right.offset - c.left.offset - c.gap;\r\n            if (l.vars.length < r.vars.length) {\r\n                r.mergeAcross(l, c, dist);\r\n                this.remove(l);\r\n            } else {\r\n                l.mergeAcross(r, c, -dist);\r\n                this.remove(r);\r\n            }\r\n/* DEBUG\r\n            console.assert(Math.abs(c.slack()) < 1e-6, \"Error: Constraint should be at equality after merge!\");\r\n            console.log(\"merged on \" + c);\r\nDEBUG */\r\n        }\r\n\r\n        forEach(f: (b: Block, i: number) => void ) {\r\n            this.list.forEach(f);\r\n        }\r\n\r\n        // useful, for example, after variable desired positions change.\r\n        updateBlockPositions(): void {\r\n            this.list.forEach(b=> b.updateWeightedPosition());\r\n        }\r\n\r\n        // split each block across its constraint with the minimum lagrangian\r\n        split(inactive: Constraint[]): void {\r\n            this.updateBlockPositions();\r\n            this.list.forEach(b=> {\r\n                var v = b.findMinLM();\r\n                if (v !== null && v.lm < Solver.LAGRANGIAN_TOLERANCE) {\r\n                    b = v.left.block;\r\n                    Block.split(v).forEach(nb=>this.insert(nb));\r\n                    this.remove(b);\r\n                    inactive.push(v);\r\n/* DEBUG\r\n                    console.assert(this.contains(v.left.block));\r\n                    console.assert(this.contains(v.right.block));\r\nDEBUG */\r\n                }\r\n            });\r\n        }\r\n\r\n/* DEBUG\r\n        // checks b is in the block, and does a sanity check over list index integrity\r\n        contains(b: Block): boolean {\r\n            var result = false;\r\n            this.list.forEach((bb, i) => {\r\n                if (bb.blockInd !== i) {\r\n                    console.error(\"blocks error, blockInd \" + b.blockInd + \" found at \" + i);\r\n                    return false;\r\n                }\r\n                result = result || b === bb;\r\n            });\r\n            return result;\r\n        }\r\n\r\n        toString(): string {\r\n            return this.list.toString();\r\n        }\r\nDEBUG */\r\n    }\r\n\r\n    export class Solver {\r\n        bs: Blocks;\r\n        inactive: Constraint[];\r\n\r\n        static LAGRANGIAN_TOLERANCE = -1e-4;\r\n        static ZERO_UPPERBOUND = -1e-10;\r\n\r\n        constructor(public vs: Variable[], public cs: Constraint[]) {\r\n            this.vs = vs;\r\n            vs.forEach(v => {\r\n                v.cIn = [], v.cOut = [];\r\n/* DEBUG\r\n                v.toString = () => \"v\" + vs.indexOf(v);\r\nDEBUG */\r\n            });\r\n            this.cs = cs;\r\n            cs.forEach(c => {\r\n                c.left.cOut.push(c);\r\n                c.right.cIn.push(c);\r\n/* DEBUG\r\n                c.toString = () => c.left + \"+\" + c.gap + \"<=\" + c.right + \" slack=\" + c.slack() + \" active=\" + c.active;\r\nDEBUG */\r\n            });\r\n            this.inactive = cs.map(c=> { c.active = false; return c; });\r\n            this.bs = null;\r\n        }\r\n\r\n        cost(): number {\r\n            return this.bs.cost();\r\n        }\r\n\r\n        // set starting positions without changing desired positions.\r\n        // Note: it throws away any previous block structure.\r\n        setStartingPositions(ps: number[]): void {\r\n            this.inactive = this.cs.map(c=> { c.active = false; return c; });\r\n            this.bs = new Blocks(this.vs);\r\n            this.bs.forEach((b, i) => b.posn = ps[i]);\r\n        }\r\n\r\n        setDesiredPositions(ps: number[]): void {\r\n            this.vs.forEach((v, i) => v.desiredPosition = ps[i]);\r\n        }\r\n\r\n/* DEBUG\r\n        private getId(v: Variable): number {\r\n            return this.vs.indexOf(v);\r\n        }\r\n\r\n        // sanity check of the index integrity of the inactive list\r\n        checkInactive(): void {\r\n            var inactiveCount = 0;\r\n            this.cs.forEach(c=> {\r\n                var i = this.inactive.indexOf(c);\r\n                console.assert(!c.active && i >= 0 || c.active && i < 0, \"constraint should be in the inactive list if it is not active: \" + c);\r\n                if (i >= 0) {\r\n                    inactiveCount++;\r\n                } else {\r\n                    console.assert(c.active, \"inactive constraint not found in inactive list: \" + c);\r\n                }\r\n            });\r\n            console.assert(inactiveCount === this.inactive.length, inactiveCount + \" inactive constraints found, \" + this.inactive.length + \"in inactive list\");\r\n        }\r\n        // after every call to satisfy the following should check should pass\r\n        checkSatisfied(): void {\r\n            this.cs.forEach(c=>console.assert(c.slack() >= vpsc.Solver.ZERO_UPPERBOUND, \"Error: Unsatisfied constraint! \"+c));\r\n        }\r\nDEBUG */\r\n\r\n        private mostViolated(): Constraint {\r\n            var minSlack = Number.MAX_VALUE,\r\n                v: Constraint = null,\r\n                l = this.inactive,\r\n                n = l.length,\r\n                deletePoint = n;\r\n            for (var i = 0; i < n; ++i) {\r\n                var c = l[i];\r\n                if (c.unsatisfiable) continue;\r\n                var slack = c.slack();\r\n                if (c.equality || slack < minSlack) {\r\n                    minSlack = slack;\r\n                    v = c;\r\n                    deletePoint = i;\r\n                    if (c.equality) break;\r\n                }\r\n            }\r\n            if (deletePoint !== n &&\r\n                (minSlack < Solver.ZERO_UPPERBOUND && !v.active || v.equality))\r\n            {\r\n                l[deletePoint] = l[n - 1];\r\n                l.length = n - 1;\r\n            }\r\n            return v;\r\n        }\r\n\r\n        // satisfy constraints by building block structure over violated constraints\r\n        // and moving the blocks to their desired positions\r\n        satisfy(): void {\r\n            if (this.bs == null) {\r\n                this.bs = new Blocks(this.vs);\r\n            }\r\n/* DEBUG\r\n            console.log(\"satisfy: \" + this.bs);\r\nDEBUG */\r\n            this.bs.split(this.inactive);\r\n            var v: Constraint = null;\r\n            while ((v = this.mostViolated()) && (v.equality || v.slack() < Solver.ZERO_UPPERBOUND && !v.active)) {\r\n                var lb = v.left.block, rb = v.right.block;\r\n/* DEBUG\r\n                console.log(\"most violated is: \" + v);\r\n                this.bs.contains(lb);\r\n                this.bs.contains(rb);\r\nDEBUG */\r\n                if (lb !== rb) {\r\n                    this.bs.merge(v);\r\n                } else {\r\n                    if (lb.isActiveDirectedPathBetween(v.right, v.left)) {\r\n                        // cycle found!\r\n                        v.unsatisfiable = true;\r\n                        continue;\r\n                    }\r\n                    // constraint is within block, need to split first\r\n                    var split = lb.splitBetween(v.left, v.right);\r\n                    if (split !== null) {\r\n                        this.bs.insert(split.lb);\r\n                        this.bs.insert(split.rb);\r\n                        this.bs.remove(lb);\r\n                        this.inactive.push(split.constraint);\r\n                    } else {\r\n/* DEBUG\r\n                        console.log(\"unsatisfiable constraint found\");\r\nDEBUG */\r\n                        v.unsatisfiable = true;\r\n                        continue;\r\n                    }\r\n                    if (v.slack() >= 0) {\r\n/* DEBUG\r\n                        console.log(\"violated constraint indirectly satisfied: \" + v);\r\nDEBUG */\r\n                        // v was satisfied by the above split!\r\n                        this.inactive.push(v);\r\n                    } else {\r\n/* DEBUG\r\n                        console.log(\"merge after split:\");\r\nDEBUG */\r\n                        this.bs.merge(v);\r\n                    }\r\n                }\r\n/* DEBUG\r\n                this.bs.contains(v.left.block);\r\n                this.bs.contains(v.right.block);\r\n                this.checkInactive();\r\nDEBUG */\r\n            }\r\n/* DEBUG\r\n            this.checkSatisfied();\r\nDEBUG */\r\n        }\r\n\r\n        // repeatedly build and split block structure until we converge to an optimal solution\r\n        solve(): number {\r\n            this.satisfy();\r\n            var lastcost = Number.MAX_VALUE, cost = this.bs.cost();\r\n            while (Math.abs(lastcost - cost) > 0.0001) {\r\n                this.satisfy();\r\n                lastcost = cost;\r\n                cost = this.bs.cost();\r\n            }\r\n            return cost;\r\n        }\r\n    }\r\n    /**\r\n      * Remove overlap between spans while keeping their centers as close as possible to the specified desiredCenters.\r\n      * Lower and upper bounds will be respected if the spans physically fit between them\r\n      * (otherwise they'll be moved and their new position returned).\r\n      * If no upper/lower bound is specified then the bounds of the moved spans will be returned.\r\n      * returns a new center for each span.\r\n      */\r\n    export function removeOverlapInOneDimension(spans: { size: number, desiredCenter: number }[], lowerBound?: number, upperBound?: number)\r\n        : { newCenters: number[], lowerBound: number, upperBound: number }\r\n    {\r\n        const vs: Variable[] = spans.map(s => new Variable(s.desiredCenter));\r\n        const cs: Constraint[] = [];\r\n        const n = spans.length;\r\n        for (var i = 0; i < n - 1; i++) {\r\n            const left = spans[i], right = spans[i + 1];\r\n            cs.push(new Constraint(vs[i], vs[i + 1], (left.size + right.size) / 2));\r\n        }\r\n        const leftMost = vs[0],\r\n            rightMost = vs[n - 1],\r\n            leftMostSize = spans[0].size / 2,\r\n            rightMostSize = spans[n - 1].size / 2;\r\n        let vLower: Variable = null, vUpper: Variable = null;\r\n        if (lowerBound) {\r\n            vLower = new Variable(lowerBound, leftMost.weight * 1000);\r\n            vs.push(vLower);\r\n            cs.push(new Constraint(vLower, leftMost, leftMostSize));\r\n        }\r\n        if (upperBound) {\r\n            vUpper = new Variable(upperBound, rightMost.weight * 1000);\r\n            vs.push(vUpper);\r\n            cs.push(new Constraint(rightMost, vUpper, rightMostSize));\r\n        }\r\n        var solver = new Solver(vs, cs);\r\n        solver.solve();\r\n        return {\r\n            newCenters: vs.slice(0, spans.length).map(v => v.position()),\r\n            lowerBound: vLower ? vLower.position() : leftMost.position() - leftMostSize,\r\n            upperBound: vUpper ? vUpper.position() : rightMost.position() + rightMostSize\r\n        };\r\n    }\r\n","const pkg = require('../package.json')\n\nexport const version = pkg.version\nexport const name = pkg.name\n","import {LinkAccessor} from './linklengths'\r\n\r\nexport interface LinkTypeAccessor<Link> extends LinkAccessor<Link> {\r\n        // return a unique identifier for the type of the link\r\n        getType(l: Link): number;\r\n    }\r\n\r\n    export class PowerEdge {\r\n        constructor(\r\n            public source: any,\r\n            public target: any,\r\n            public type: number) { }\r\n    }\r\n\r\n    export class Configuration<Link> {\r\n        // canonical list of modules.\r\n        // Initialized to a module for each leaf node, such that the ids and indexes of the module in the array match the indexes of the nodes in links\r\n        // Modules created through merges are appended to the end of this.\r\n        modules: Module[];\r\n        // top level modules and candidates for merges\r\n        roots: ModuleSet[];\r\n        // remaining edge count\r\n        R: number;\r\n        constructor(n: number, edges: Link[], private linkAccessor: LinkTypeAccessor<Link>, rootGroup?: any[]) {\r\n            this.modules = new Array(n);\r\n            this.roots = [];\r\n            if (rootGroup) {\r\n                this.initModulesFromGroup(rootGroup);\r\n            } else {\r\n                this.roots.push(new ModuleSet());\r\n                for (var i = 0; i < n; ++i)\r\n                    this.roots[0].add(this.modules[i] = new Module(i));\r\n            }\r\n            this.R = edges.length;\r\n            edges.forEach(e => {\r\n                var s = this.modules[linkAccessor.getSourceIndex(e)],\r\n                    t = this.modules[linkAccessor.getTargetIndex(e)],\r\n                    type = linkAccessor.getType(e);\r\n                s.outgoing.add(type, t);\r\n                t.incoming.add(type, s);\r\n            });\r\n        }\r\n\r\n        private initModulesFromGroup(group): ModuleSet {\r\n            var moduleSet = new ModuleSet();\r\n            this.roots.push(moduleSet);\r\n            for (var i = 0; i < group.leaves.length; ++i) {\r\n                var node = group.leaves[i];\r\n                var module = new Module(node.id);\r\n                this.modules[node.id] = module;\r\n                moduleSet.add(module);\r\n            }\r\n            if (group.groups) {\r\n                for (var j = 0; j < group.groups.length; ++j) {\r\n                    var child = group.groups[j];\r\n                    // Propagate group properties (like padding, stiffness, ...) as module definition so that the generated power graph group will inherit it\r\n                    var definition = {};\r\n                    for (var prop in child)\r\n                        if (prop !== \"leaves\" && prop !== \"groups\" && child.hasOwnProperty(prop))\r\n                            definition[prop] = child[prop];\r\n                    // Use negative module id to avoid clashes between predefined and generated modules\r\n                    moduleSet.add(new Module(-1-j, new LinkSets(), new LinkSets(), this.initModulesFromGroup(child), definition));\r\n                }\r\n            }\r\n            return moduleSet;\r\n         }\r\n\r\n        // merge modules a and b keeping track of their power edges and removing the from roots\r\n        merge(a: Module, b: Module, k: number = 0): Module {\r\n            var inInt = a.incoming.intersection(b.incoming),\r\n                outInt = a.outgoing.intersection(b.outgoing);\r\n            var children = new ModuleSet();\r\n            children.add(a);\r\n            children.add(b);\r\n            var m = new Module(this.modules.length, outInt, inInt, children);\r\n            this.modules.push(m);\r\n            var update = (s: LinkSets, i: string, o: string) => {\r\n                s.forAll((ms, linktype) => {\r\n                    ms.forAll(n => {\r\n                        var nls = <LinkSets>n[i];\r\n                        nls.add(linktype, m);\r\n                        nls.remove(linktype, a);\r\n                        nls.remove(linktype, b);\r\n                        (<LinkSets>a[o]).remove(linktype, n);\r\n                        (<LinkSets>b[o]).remove(linktype, n);\r\n                    });\r\n                });\r\n            };\r\n            update(outInt, \"incoming\", \"outgoing\");\r\n            update(inInt, \"outgoing\", \"incoming\");\r\n            this.R -= inInt.count() + outInt.count();\r\n            this.roots[k].remove(a);\r\n            this.roots[k].remove(b);\r\n            this.roots[k].add(m);\r\n            return m;\r\n        }\r\n\r\n        private rootMerges(k: number = 0): {\r\n            id: number;\r\n            nEdges: number;\r\n            a: Module;\r\n            b: Module;\r\n        }[] {\r\n            var rs = this.roots[k].modules();\r\n            var n = rs.length;\r\n            var merges = new Array(n * (n - 1));\r\n            var ctr = 0;\r\n            for (var i = 0, i_ = n - 1; i < i_; ++i) {\r\n                for (var j = i+1; j < n; ++j) {\r\n                    var a = rs[i], b = rs[j];\r\n                    merges[ctr] = { id: ctr, nEdges: this.nEdges(a, b), a: a, b: b };\r\n                    ctr++;\r\n                }\r\n            }\r\n            return merges;\r\n        }\r\n\r\n        greedyMerge(): boolean {\r\n            for (var i = 0; i < this.roots.length; ++i) {\r\n                // Handle single nested module case\r\n                if (this.roots[i].modules().length < 2) continue;\r\n\r\n                // find the merge that allows for the most edges to be removed.  secondary ordering based on arbitrary id (for predictability)\r\n                var ms = this.rootMerges(i).sort((a, b) => a.nEdges == b.nEdges ? a.id - b.id : a.nEdges - b.nEdges);\r\n                var m = ms[0];\r\n                if (m.nEdges >= this.R) continue;\r\n                this.merge(m.a, m.b, i);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        private nEdges(a: Module, b: Module): number {\r\n            var inInt = a.incoming.intersection(b.incoming),\r\n                outInt = a.outgoing.intersection(b.outgoing);\r\n            return this.R - inInt.count() - outInt.count();\r\n        }\r\n\r\n        getGroupHierarchy(retargetedEdges: PowerEdge[]): any[]{\r\n            var groups = [];\r\n            var root = {};\r\n            toGroups(this.roots[0], root, groups);\r\n            var es = this.allEdges();\r\n            es.forEach(e => {\r\n                var a = this.modules[e.source];\r\n                var b = this.modules[e.target];\r\n                retargetedEdges.push(new PowerEdge(\r\n                    typeof a.gid === \"undefined\" ? e.source : groups[a.gid],\r\n                    typeof b.gid === \"undefined\" ? e.target : groups[b.gid],\r\n                    e.type\r\n                ));\r\n            });\r\n            return groups;\r\n        }\r\n\r\n        allEdges(): PowerEdge[] {\r\n            var es = [];\r\n            Configuration.getEdges(this.roots[0], es);\r\n            return es;\r\n        }\r\n\r\n        static getEdges(modules: ModuleSet, es: PowerEdge[]) {\r\n            modules.forAll(m => {\r\n                m.getEdges(es);\r\n                Configuration.getEdges(m.children, es);\r\n            });\r\n        }\r\n    }\r\n\r\n    function toGroups(modules: ModuleSet, group, groups) {\r\n        modules.forAll(m => {\r\n            if (m.isLeaf()) {\r\n                if (!group.leaves) group.leaves = [];\r\n                group.leaves.push(m.id);\r\n            } else {\r\n                var g = group;\r\n                m.gid = groups.length;\r\n                if (!m.isIsland() || m.isPredefined()) {\r\n                    g = { id: m.gid };\r\n                    if (m.isPredefined())\r\n                        // Apply original group properties\r\n                        for (var prop in m.definition)\r\n                            g[prop] = m.definition[prop];\r\n                    if (!group.groups) group.groups = [];\r\n                    group.groups.push(m.gid);\r\n                    groups.push(g);\r\n                }\r\n                toGroups(m.children, g, groups);\r\n            }\r\n        });\r\n    }\r\n\r\n    export class Module {\r\n        gid: number;\r\n\r\n        constructor(\r\n            public id: number,\r\n            public outgoing: LinkSets = new LinkSets(),\r\n            public incoming: LinkSets = new LinkSets(),\r\n            public children: ModuleSet = new ModuleSet(),\r\n            public definition?: any) { }\r\n\r\n        getEdges(es: PowerEdge[]) {\r\n            this.outgoing.forAll((ms, edgetype) => {\r\n                ms.forAll(target => {\r\n                    es.push(new PowerEdge(this.id, target.id, edgetype));\r\n                });\r\n            });\r\n        }\r\n\r\n        isLeaf() {\r\n            return this.children.count() === 0;\r\n        }\r\n\r\n        isIsland() {\r\n            return this.outgoing.count() === 0 && this.incoming.count() === 0;\r\n        }\r\n\r\n        isPredefined(): boolean {\r\n            return typeof this.definition !== \"undefined\";\r\n        }\r\n    }\r\n\r\n    function intersection(m: any, n: any): any {\r\n        var i = {};\r\n        for (var v in m) if (v in n) i[v] = m[v];\r\n        return i;\r\n    }\r\n\r\n    export class ModuleSet {\r\n        table: any = {};\r\n        count() {\r\n            return Object.keys(this.table).length;\r\n        }\r\n        intersection(other: ModuleSet): ModuleSet {\r\n            var result = new ModuleSet();\r\n            result.table = intersection(this.table, other.table);\r\n            return result;\r\n        }\r\n        intersectionCount(other: ModuleSet): number {\r\n            return this.intersection(other).count();\r\n        }\r\n        contains(id: number): boolean {\r\n            return id in this.table;\r\n        }\r\n        add(m: Module): void {\r\n            this.table[m.id] = m;\r\n        }\r\n        remove(m: Module): void {\r\n            delete this.table[m.id];\r\n        }\r\n        forAll(f: (m: Module) => void) {\r\n            for (var mid in this.table) {\r\n                f(this.table[mid]);\r\n            }\r\n        }\r\n        modules(): Module[] {\r\n            var vs = [];\r\n            this.forAll(m => {\r\n                if (!m.isPredefined())\r\n                    vs.push(m);\r\n            });\r\n            return vs;\r\n        }\r\n    }\r\n\r\n    export class LinkSets {\r\n        sets: any = {};\r\n        n: number = 0;\r\n        count(): number {\r\n            return this.n;\r\n        }\r\n        contains(id: number) {\r\n            var result = false;\r\n            this.forAllModules(m => {\r\n                if (!result && m.id == id) {\r\n                    result = true;\r\n                }\r\n            });\r\n            return result;\r\n        }\r\n        add(linktype: number, m: Module) {\r\n            var s: ModuleSet = linktype in this.sets ? this.sets[linktype] : this.sets[linktype] = new ModuleSet();\r\n            s.add(m);\r\n            ++this.n;\r\n        }\r\n        remove(linktype: number, m: Module) {\r\n            var ms = <ModuleSet>this.sets[linktype];\r\n            ms.remove(m);\r\n            if (ms.count() === 0) {\r\n                delete this.sets[linktype];\r\n            }\r\n            --this.n;\r\n        }\r\n        forAll(f: (ms: ModuleSet, linktype: number) => void) {\r\n            for (var linktype in this.sets) {\r\n                f(<ModuleSet>this.sets[linktype], Number(linktype));\r\n            }\r\n        }\r\n        forAllModules(f: (m: Module) => void) {\r\n            this.forAll((ms, lt) => ms.forAll(f));\r\n        }\r\n        intersection(other: LinkSets): LinkSets {\r\n            var result: LinkSets = new LinkSets();\r\n            this.forAll((ms, lt) => {\r\n                if (lt in other.sets) {\r\n                    var i = ms.intersection(other.sets[lt]),\r\n                        n = i.count();\r\n                    if (n > 0) {\r\n                        result.sets[lt] = i;\r\n                        result.n += n;\r\n                    }\r\n                }\r\n            });\r\n            return result;\r\n        }\r\n    }\r\n\r\n    function intersectionCount(m: any, n: any): number {\r\n        return Object.keys(intersection(m, n)).length\r\n    }\r\n\r\n    export function getGroups<Link>(nodes: any[], links: Link[], la: LinkTypeAccessor<Link>, rootGroup?: any[]): { groups: any[]; powerEdges: PowerEdge[] } {\r\n        var n = nodes.length,\r\n            c = new Configuration(n, links, la, rootGroup);\r\n        while (c.greedyMerge());\r\n        var powerEdges: PowerEdge[] = [];\r\n        var g = c.getGroupHierarchy(powerEdges);\r\n        powerEdges.forEach(function (e) {\r\n            var f = (end) => {\r\n                var g = e[end];\r\n                if (typeof g == \"number\") e[end] = nodes[g];\r\n            };\r\n            f(\"source\");\r\n            f(\"target\");\r\n        });\r\n        return { groups: g, powerEdges: powerEdges };\r\n    }\r\n","    //Based on js_es:\r\n    //\r\n    //https://github.com/vadimg/js_bintrees\r\n    //\r\n    //Copyright (C) 2011 by Vadim Graboys\r\n    //\r\n    //Permission is hereby granted, free of charge, to any person obtaining a copy\r\n    //of this software and associated documentation files (the \"Software\"), to deal\r\n    //in the Software without restriction, including without limitation the rights\r\n    //to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n    //copies of the Software, and to permit persons to whom the Software is\r\n    //furnished to do so, subject to the following conditions:\r\n    //\r\n    //The above copyright notice and this permission notice shall be included in\r\n    //all copies or substantial portions of the Software.\r\n    //\r\n    //THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n    //IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n    //FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n    //AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n    //LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n    //OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n    //THE SOFTWARE.\r\n    export class TreeBase {\r\n        _root;\r\n        size;\r\n        _comparator;\r\n        // removes all nodes from the tree\r\n        clear() {\r\n            this._root = null;\r\n            this.size = 0;\r\n        };\r\n\r\n        // returns node data if found, null otherwise\r\n        find(data) {\r\n            var res = this._root;\r\n\r\n            while (res !== null) {\r\n                var c = this._comparator(data, res.data);\r\n                if (c === 0) {\r\n                    return res.data;\r\n                }\r\n                else {\r\n                    res = res.get_child(c > 0);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n        // returns iterator to node if found, null otherwise\r\n        findIter = function (data) {\r\n            var res = this._root;\r\n            var iter = this.iterator();\r\n\r\n            while (res !== null) {\r\n                var c = this._comparator(data, res.data);\r\n                if (c === 0) {\r\n                    iter._cursor = res;\r\n                    return iter;\r\n                }\r\n                else {\r\n                    iter._ancestors.push(res);\r\n                    res = res.get_child(c > 0);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n        // Returns an interator to the tree node immediately before (or at) the element\r\n        lowerBound(data) {\r\n            return this._bound(data, this._comparator);\r\n        };\r\n\r\n        // Returns an interator to the tree node immediately after (or at) the element\r\n        upperBound(data) {\r\n            var cmp = this._comparator;\r\n\r\n            function reverse_cmp(a, b) {\r\n                return cmp(b, a);\r\n            }\r\n\r\n            return this._bound(data, reverse_cmp);\r\n        };\r\n\r\n        // returns null if tree is empty\r\n        min() {\r\n            var res = this._root;\r\n            if (res === null) {\r\n                return null;\r\n            }\r\n\r\n            while (res.left !== null) {\r\n                res = res.left;\r\n            }\r\n\r\n            return res.data;\r\n        };\r\n\r\n        // returns null if tree is empty\r\n        max() {\r\n            var res = this._root;\r\n            if (res === null) {\r\n                return null;\r\n            }\r\n\r\n            while (res.right !== null) {\r\n                res = res.right;\r\n            }\r\n\r\n            return res.data;\r\n        };\r\n\r\n        // returns a null iterator\r\n        // call next() or prev() to point to an element\r\n        iterator(): Iterator {\r\n            return new Iterator(this);\r\n        };\r\n\r\n        // calls cb on each node's data, in order\r\n        each(cb) {\r\n            var it = this.iterator(), data;\r\n            while ((data = it.next()) !== null) {\r\n                cb(data);\r\n            }\r\n        };\r\n\r\n        // calls cb on each node's data, in reverse order\r\n        reach(cb) {\r\n            var it = this.iterator(), data;\r\n            while ((data = it.prev()) !== null) {\r\n                cb(data);\r\n            }\r\n        };\r\n\r\n        // used for lowerBound and upperBound\r\n        _bound(data, cmp) {\r\n            var cur = this._root;\r\n            var iter = this.iterator();\r\n\r\n            while (cur !== null) {\r\n                var c = this._comparator(data, cur.data);\r\n                if (c === 0) {\r\n                    iter._cursor = cur;\r\n                    return iter;\r\n                }\r\n                iter._ancestors.push(cur);\r\n                cur = cur.get_child(c > 0);\r\n            }\r\n\r\n            for (var i = iter._ancestors.length - 1; i >= 0; --i) {\r\n                cur = iter._ancestors[i];\r\n                if (cmp(data, cur.data) > 0) {\r\n                    iter._cursor = cur;\r\n                    iter._ancestors.length = i;\r\n                    return iter;\r\n                }\r\n            }\r\n\r\n            iter._ancestors.length = 0;\r\n            return iter;\r\n        };\r\n    }\r\n    export class Iterator {\r\n        _tree;\r\n        _ancestors;\r\n        _cursor;\r\n        constructor(tree) {\r\n            this._tree = tree;\r\n            this._ancestors = [];\r\n            this._cursor = null;\r\n        }\r\n\r\n        data() {\r\n            return this._cursor !== null ? this._cursor.data : null;\r\n        };\r\n\r\n        // if null-iterator, returns first node\r\n        // otherwise, returns next node\r\n        next() {\r\n            if (this._cursor === null) {\r\n                var root = this._tree._root;\r\n                if (root !== null) {\r\n                    this._minNode(root);\r\n                }\r\n            }\r\n            else {\r\n                if (this._cursor.right === null) {\r\n                    // no greater node in subtree, go up to parent\r\n                    // if coming from a right child, continue up the stack\r\n                    var save;\r\n                    do {\r\n                        save = this._cursor;\r\n                        if (this._ancestors.length) {\r\n                            this._cursor = this._ancestors.pop();\r\n                        }\r\n                        else {\r\n                            this._cursor = null;\r\n                            break;\r\n                        }\r\n                    } while (this._cursor.right === save);\r\n                }\r\n                else {\r\n                    // get the next node from the subtree\r\n                    this._ancestors.push(this._cursor);\r\n                    this._minNode(this._cursor.right);\r\n                }\r\n            }\r\n            return this._cursor !== null ? this._cursor.data : null;\r\n        };\r\n\r\n        // if null-iterator, returns last node\r\n        // otherwise, returns previous node\r\n        prev() {\r\n            if (this._cursor === null) {\r\n                var root = this._tree._root;\r\n                if (root !== null) {\r\n                    this._maxNode(root);\r\n                }\r\n            }\r\n            else {\r\n                if (this._cursor.left === null) {\r\n                    var save;\r\n                    do {\r\n                        save = this._cursor;\r\n                        if (this._ancestors.length) {\r\n                            this._cursor = this._ancestors.pop();\r\n                        }\r\n                        else {\r\n                            this._cursor = null;\r\n                            break;\r\n                        }\r\n                    } while (this._cursor.left === save);\r\n                }\r\n                else {\r\n                    this._ancestors.push(this._cursor);\r\n                    this._maxNode(this._cursor.left);\r\n                }\r\n            }\r\n            return this._cursor !== null ? this._cursor.data : null;\r\n        };\r\n\r\n        _minNode(start) {\r\n            while (start.left !== null) {\r\n                this._ancestors.push(start);\r\n                start = start.left;\r\n            }\r\n            this._cursor = start;\r\n        };\r\n\r\n        _maxNode(start) {\r\n            while (start.right !== null) {\r\n                this._ancestors.push(start);\r\n                start = start.right;\r\n            }\r\n            this._cursor = start;\r\n        };\r\n    }\r\n\r\n    class Node {\r\n        data;\r\n        left;\r\n        right;\r\n        red;\r\n        constructor(data) {\r\n            this.data = data;\r\n            this.left = null;\r\n            this.right = null;\r\n            this.red = true;\r\n        }\r\n\r\n        get_child(dir) {\r\n            return dir ? this.right : this.left;\r\n        };\r\n\r\n        set_child(dir, val) {\r\n            if (dir) {\r\n                this.right = val;\r\n            }\r\n            else {\r\n                this.left = val;\r\n            }\r\n        };\r\n    }\r\n\r\n    export class RBTree<T> extends TreeBase {\r\n\r\n        _root;\r\n        _comparator;\r\n        size;\r\n        constructor(comparator: (a: T, b: T) => number) {\r\n            super();\r\n            this._root = null;\r\n            this._comparator = comparator;\r\n            this.size = 0;\r\n        }\r\n\r\n        // returns true if inserted, false if duplicate\r\n        insert(data) {\r\n            var ret = false;\r\n\r\n            if (this._root === null) {\r\n                // empty tree\r\n                this._root = new Node(data);\r\n                ret = true;\r\n                this.size++;\r\n            }\r\n            else {\r\n                var head = new Node(undefined); // fake tree root\r\n\r\n                var dir = false;\r\n                var last = false;\r\n\r\n                // setup\r\n                var gp = null; // grandparent\r\n                var ggp = head; // grand-grand-parent\r\n                var p = null; // parent\r\n                var node = this._root;\r\n                ggp.right = this._root;\r\n\r\n                // search down\r\n                while (true) {\r\n                    if (node === null) {\r\n                        // insert new node at the bottom\r\n                        node = new Node(data);\r\n                        p.set_child(dir, node);\r\n                        ret = true;\r\n                        this.size++;\r\n                    }\r\n                    else if (RBTree.is_red(node.left) && RBTree.is_red(node.right)) {\r\n                        // color flip\r\n                        node.red = true;\r\n                        node.left.red = false;\r\n                        node.right.red = false;\r\n                    }\r\n\r\n                    // fix red violation\r\n                    if (RBTree.is_red(node) && RBTree.is_red(p)) {\r\n                        var dir2 = ggp.right === gp;\r\n\r\n                        if (node === p.get_child(last)) {\r\n                            ggp.set_child(dir2, RBTree.single_rotate(gp, !last));\r\n                        }\r\n                        else {\r\n                            ggp.set_child(dir2, RBTree.double_rotate(gp, !last));\r\n                        }\r\n                    }\r\n\r\n                    var cmp = this._comparator(node.data, data);\r\n\r\n                    // stop if found\r\n                    if (cmp === 0) {\r\n                        break;\r\n                    }\r\n\r\n                    last = dir;\r\n                    dir = cmp < 0;\r\n\r\n                    // update helpers\r\n                    if (gp !== null) {\r\n                        ggp = gp;\r\n                    }\r\n                    gp = p;\r\n                    p = node;\r\n                    node = node.get_child(dir);\r\n                }\r\n\r\n                // update root\r\n                this._root = head.right;\r\n            }\r\n\r\n            // make root black\r\n            this._root.red = false;\r\n\r\n            return ret;\r\n        };\r\n\r\n        // returns true if removed, false if not found\r\n        remove(data) {\r\n            if (this._root === null) {\r\n                return false;\r\n            }\r\n\r\n            var head = new Node(undefined); // fake tree root\r\n            var node = head;\r\n            node.right = this._root;\r\n            var p = null; // parent\r\n            var gp = null; // grand parent\r\n            var found = null; // found item\r\n            var dir = true;\r\n\r\n            while (node.get_child(dir) !== null) {\r\n                var last = dir;\r\n\r\n                // update helpers\r\n                gp = p;\r\n                p = node;\r\n                node = node.get_child(dir);\r\n\r\n                var cmp = this._comparator(data, node.data);\r\n\r\n                dir = cmp > 0;\r\n\r\n                // save found node\r\n                if (cmp === 0) {\r\n                    found = node;\r\n                }\r\n\r\n                // push the red node down\r\n                if (!RBTree.is_red(node) && !RBTree.is_red(node.get_child(dir))) {\r\n                    if (RBTree.is_red(node.get_child(!dir))) {\r\n                        var sr = RBTree.single_rotate(node, dir);\r\n                        p.set_child(last, sr);\r\n                        p = sr;\r\n                    }\r\n                    else if (!RBTree.is_red(node.get_child(!dir))) {\r\n                        var sibling = p.get_child(!last);\r\n                        if (sibling !== null) {\r\n                            if (!RBTree.is_red(sibling.get_child(!last)) && !RBTree.is_red(sibling.get_child(last))) {\r\n                                // color flip\r\n                                p.red = false;\r\n                                sibling.red = true;\r\n                                node.red = true;\r\n                            }\r\n                            else {\r\n                                var dir2 = gp.right === p;\r\n\r\n                                if (RBTree.is_red(sibling.get_child(last))) {\r\n                                    gp.set_child(dir2, RBTree.double_rotate(p, last));\r\n                                }\r\n                                else if (RBTree.is_red(sibling.get_child(!last))) {\r\n                                    gp.set_child(dir2, RBTree.single_rotate(p, last));\r\n                                }\r\n\r\n                                // ensure correct coloring\r\n                                var gpc = gp.get_child(dir2);\r\n                                gpc.red = true;\r\n                                node.red = true;\r\n                                gpc.left.red = false;\r\n                                gpc.right.red = false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // replace and remove if found\r\n            if (found !== null) {\r\n                found.data = node.data;\r\n                p.set_child(p.right === node, node.get_child(node.left === null));\r\n                this.size--;\r\n            }\r\n\r\n            // update root and make it black\r\n            this._root = head.right;\r\n            if (this._root !== null) {\r\n                this._root.red = false;\r\n            }\r\n\r\n            return found !== null;\r\n        };\r\n\r\n        static is_red(node) {\r\n            return node !== null && node.red;\r\n        }\r\n\r\n        static single_rotate(root, dir) {\r\n            var save = root.get_child(!dir);\r\n\r\n            root.set_child(!dir, save.get_child(dir));\r\n            save.set_child(dir, root);\r\n\r\n            root.red = true;\r\n            save.red = false;\r\n\r\n            return save;\r\n        }\r\n\r\n        static double_rotate(root, dir) {\r\n            root.set_child(!dir, RBTree.single_rotate(root.get_child(!dir), !dir));\r\n            return RBTree.single_rotate(root, dir);\r\n        }\r\n    }\r\n","\r\nexport class PairingHeap<T> {\r\n    private subheaps : PairingHeap<T>[];\r\n    // from: https://gist.github.com/nervoussystem\r\n    //{elem:object, subheaps:[array of heaps]}\r\n    constructor(public elem: T) {\r\n        this.subheaps = [];\r\n    }\r\n\r\n    public toString(selector) : string {\r\n        var str = \"\", needComma = false;\r\n        for (var i = 0; i < this.subheaps.length; ++i) {\r\n            var subheap: PairingHeap<T> = this.subheaps[i];\r\n            if (!subheap.elem) {\r\n                needComma = false;\r\n                continue;\r\n            }\r\n            if (needComma) {\r\n                str = str + \",\";\r\n            }\r\n            str = str + subheap.toString(selector);\r\n            needComma = true;\r\n        }\r\n        if (str !== \"\") {\r\n            str = \"(\" + str + \")\";\r\n        }\r\n        return (this.elem ? selector(this.elem) : \"\") + str;\r\n    }\r\n\r\n    public forEach(f) {\r\n        if (!this.empty()) {\r\n            f(this.elem, this);\r\n            this.subheaps.forEach(s => s.forEach(f));\r\n        }\r\n    }\r\n\r\n    public count(): number {\r\n        return this.empty() ? 0 : 1 + this.subheaps.reduce((n: number, h: PairingHeap<T>) => {\r\n            return n + h.count();\r\n        }, 0);\r\n    }\r\n\r\n    public min() : T {\r\n        return this.elem;\r\n    }\r\n\r\n    public empty() : boolean {\r\n        return this.elem == null;\r\n    }\r\n\r\n    public contains(h: PairingHeap<T>): boolean {\r\n        if (this === h) return true;\r\n        for (var i = 0; i < this.subheaps.length; i++) {\r\n            if (this.subheaps[i].contains(h)) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public isHeap(lessThan: (a: T, b: T) => boolean): boolean {\r\n        return this.subheaps.every(h=> lessThan(this.elem, h.elem) && h.isHeap(lessThan));\r\n    }\r\n\r\n    public insert(obj : T, lessThan) : PairingHeap<T> {\r\n        return this.merge(new PairingHeap<T>(obj), lessThan);\r\n    }\r\n\r\n    public merge(heap2: PairingHeap<T>, lessThan): PairingHeap<T> {\r\n        if (this.empty()) return heap2;\r\n        else if (heap2.empty()) return this;\r\n        else if (lessThan(this.elem, heap2.elem)) {\r\n            this.subheaps.push(heap2);\r\n            return this;\r\n        } else {\r\n            heap2.subheaps.push(this);\r\n            return heap2;\r\n        }\r\n    }\r\n\r\n    public removeMin(lessThan: (a: T, b: T) => boolean): PairingHeap<T> {\r\n        if (this.empty()) return null;\r\n        else return this.mergePairs(lessThan);\r\n    }\r\n\r\n    public mergePairs(lessThan: (a: T, b: T) => boolean) : PairingHeap<T> {\r\n        if (this.subheaps.length == 0) return new PairingHeap<T>(null);\r\n        else if (this.subheaps.length == 1) { return this.subheaps[0]; }\r\n        else {\r\n            var firstPair = this.subheaps.pop().merge(this.subheaps.pop(), lessThan);\r\n            var remaining = this.mergePairs(lessThan);\r\n            return firstPair.merge(remaining, lessThan);\r\n        }\r\n    }\r\n    public decreaseKey(subheap: PairingHeap<T>, newValue: T, setHeapNode: (e: T, h: PairingHeap<T>)=>void, lessThan: (a: T, b: T) => boolean): PairingHeap<T> {\r\n        var newHeap = subheap.removeMin(lessThan);\r\n        //reassign subheap values to preserve tree\r\n        subheap.elem = newHeap.elem;\r\n        subheap.subheaps = newHeap.subheaps;\r\n        if (setHeapNode !== null && newHeap.elem !== null) {\r\n            setHeapNode(subheap.elem, subheap);\r\n        }\r\n        var pairingNode = new PairingHeap(newValue);\r\n        if (setHeapNode !== null) {\r\n            setHeapNode(newValue, pairingNode);\r\n        }\r\n        return this.merge(pairingNode, lessThan);\r\n    }\r\n}\r\n\r\n/**\r\n * @class PriorityQueue a min priority queue backed by a pairing heap\r\n */\r\nexport class PriorityQueue<T> {\r\n    private root : PairingHeap<T>;\r\n    constructor(private lessThan: (a: T, b: T) => boolean) { }\r\n    /**\r\n     * @method top\r\n     * @return the top element (the min element as defined by lessThan)\r\n     */\r\n    public top() : T {\r\n        if (this.empty()) { return null; }\r\n        return this.root.elem;\r\n    }\r\n    /**\r\n     * @method push\r\n     * put things on the heap\r\n     */\r\n    public push(...args: T[]): PairingHeap<T> {\r\n        var pairingNode;\r\n        for (var i = 0, arg; arg=args[i]; ++i) {\r\n            pairingNode = new PairingHeap(arg);\r\n            this.root = this.empty() ?\r\n                pairingNode : this.root.merge(pairingNode, this.lessThan);\r\n        }\r\n        return pairingNode;\r\n    }\r\n    /**\r\n     * @method empty\r\n     * @return true if no more elements in queue\r\n     */\r\n    public empty(): boolean {\r\n        return !this.root || !this.root.elem;\r\n    }\r\n    /**\r\n     * @method isHeap check heap condition (for testing)\r\n     * @return true if queue is in valid state\r\n     */\r\n    public isHeap(): boolean {\r\n        return this.root.isHeap(this.lessThan);\r\n    }\r\n    /**\r\n     * @method forEach apply f to each element of the queue\r\n     * @param f function to apply\r\n     */\r\n    public forEach(f) {\r\n        this.root.forEach(f);\r\n    }\r\n    /**\r\n     * @method pop remove and return the min element from the queue\r\n     */\r\n    public pop(): T {\r\n        if (this.empty()) {\r\n            return null;\r\n        }\r\n        var obj = this.root.min();\r\n        this.root = this.root.removeMin(this.lessThan);\r\n        return obj;\r\n    }\r\n    /**\r\n     * @method reduceKey reduce the key value of the specified heap node\r\n     */\r\n    public reduceKey(heapNode: PairingHeap<T>, newKey: T, setHeapNode: (e: T, h: PairingHeap<T>)=>void = null): void {\r\n        this.root = this.root.decreaseKey(heapNode, newKey, setHeapNode, this.lessThan);\r\n    }\r\n    public toString(selector) {\r\n        return this.root.toString(selector);\r\n    }\r\n    /**\r\n     * @method count\r\n     * @return number of elements in queue\r\n     */\r\n    public count() {\r\n        return this.root.count();\r\n    }\r\n}\r\n","import {Rectangle} from './rectangle'\r\n    export class Point {\r\n        x: number;\r\n        y: number;\r\n    }\r\n\r\n    export class LineSegment {\r\n        constructor(public x1: number, public y1: number, public x2: number, public y2: number) { }\r\n    }\r\n\r\n    export class PolyPoint extends Point {\r\n        polyIndex: number;\r\n    }\r\n\r\n    /** tests if a point is Left|On|Right of an infinite line.\r\n     * @param points P0, P1, and P2\r\n     * @return >0 for P2 left of the line through P0 and P1\r\n     *            =0 for P2 on the line\r\n     *            <0 for P2 right of the line\r\n     */\r\n    export function isLeft(P0: Point, P1: Point, P2: Point): number {\r\n        return (P1.x - P0.x) * (P2.y - P0.y) - (P2.x - P0.x) * (P1.y - P0.y);\r\n    }\r\n\r\n    function above(p: Point, vi: Point, vj: Point): boolean {\r\n        return isLeft(p, vi, vj) > 0;\r\n    }\r\n\r\n    function below(p: Point, vi: Point, vj: Point): boolean {\r\n        return isLeft(p, vi, vj) < 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * returns the convex hull of a set of points using Andrew's monotone chain algorithm\r\n     * see: http://geomalgorithms.com/a10-_hull-1.html#Monotone%20Chain\r\n     * @param S array of points\r\n     * @return the convex hull as an array of points\r\n     */\r\n    export function ConvexHull(S: Point[]): Point[] {\r\n        var P = S.slice(0).sort((a, b) => a.x !== b.x ? b.x - a.x : b.y - a.y);\r\n        var n = S.length, i;\r\n        var minmin = 0;\r\n        var xmin = P[0].x;\r\n        for (i = 1; i < n; ++i) {\r\n            if (P[i].x !== xmin) break;\r\n        }\r\n        var minmax = i - 1;\r\n        var H: Point[] = [];\r\n        H.push(P[minmin]); // push minmin point onto stack\r\n        if (minmax === n - 1) { // degenerate case: all x-coords == xmin\r\n            if (P[minmax].y !== P[minmin].y) // a  nontrivial segment\r\n                H.push(P[minmax]);\r\n        } else {\r\n            // Get the indices of points with max x-coord and min|max y-coord\r\n            var maxmin, maxmax = n - 1;\r\n            var xmax = P[n - 1].x;\r\n            for (i = n - 2; i >= 0; i--)\r\n                if (P[i].x !== xmax) break;\r\n            maxmin = i + 1;\r\n\r\n            // Compute the lower hull on the stack H\r\n            i = minmax;\r\n            while (++i <= maxmin) {\r\n                // the lower line joins P[minmin]  with P[maxmin]\r\n                if (isLeft(P[minmin], P[maxmin], P[i]) >= 0 && i < maxmin)\r\n                    continue; // ignore P[i] above or on the lower line\r\n\r\n                while (H.length > 1) // there are at least 2 points on the stack\r\n                {\r\n                    // test if  P[i] is left of the line at the stack top\r\n                    if (isLeft(H[H.length - 2], H[H.length - 1], P[i]) > 0)\r\n                        break; // P[i] is a new hull  vertex\r\n                    else\r\n                        H.length -= 1; // pop top point off  stack\r\n                }\r\n                if (i != minmin) H.push(P[i]);\r\n            }\r\n\r\n            // Next, compute the upper hull on the stack H above the bottom hull\r\n            if (maxmax != maxmin) // if  distinct xmax points\r\n                H.push(P[maxmax]); // push maxmax point onto stack\r\n            var bot = H.length; // the bottom point of the upper hull stack\r\n            i = maxmin;\r\n            while (--i >= minmax) {\r\n                // the upper line joins P[maxmax]  with P[minmax]\r\n                if (isLeft(P[maxmax], P[minmax], P[i]) >= 0 && i > minmax)\r\n                    continue; // ignore P[i] below or on the upper line\r\n\r\n                while (H.length > bot) // at least 2 points on the upper stack\r\n                {\r\n                    // test if  P[i] is left of the line at the stack top\r\n                    if (isLeft(H[H.length - 2], H[H.length - 1], P[i]) > 0)\r\n                        break; // P[i] is a new hull  vertex\r\n                    else\r\n                        H.length -= 1; // pop top point off  stack\r\n                }\r\n                if (i != minmin) H.push(P[i]); // push P[i] onto stack\r\n            }\r\n        }\r\n        return H;\r\n    }\r\n\r\n    // apply f to the points in P in clockwise order around the point p\r\n    export function clockwiseRadialSweep(p: Point, P: Point[], f: (p: Point) => void) {\r\n        P.slice(0).sort(\r\n            (a, b) => Math.atan2(a.y - p.y, a.x - p.x) - Math.atan2(b.y - p.y, b.x - p.x)\r\n            ).forEach(f);\r\n    }\r\n\r\n    function nextPolyPoint(p: PolyPoint, ps: PolyPoint[]): PolyPoint {\r\n        if (p.polyIndex === ps.length - 1) return ps[0];\r\n        return ps[p.polyIndex + 1];\r\n    }\r\n\r\n    function prevPolyPoint(p: PolyPoint, ps: PolyPoint[]): PolyPoint {\r\n        if (p.polyIndex === 0) return ps[ps.length - 1];\r\n        return ps[p.polyIndex - 1];\r\n    }\r\n\r\n    // tangent_PointPolyC(): fast binary search for tangents to a convex polygon\r\n    //    Input:  P = a 2D point (exterior to the polygon)\r\n    //            n = number of polygon vertices\r\n    //            V = array of vertices for a 2D convex polygon\r\n    //    Output: rtan = index of rightmost tangent point V[rtan]\r\n    //            ltan = index of leftmost tangent point V[ltan]\r\n    function tangent_PointPolyC(P: Point, V: Point[]): { rtan: number; ltan: number } {\r\n        // Rtangent_PointPolyC and Ltangent_PointPolyC require polygon to be\r\n        // \"closed\" with the first vertex duplicated at end, so V[n-1] = V[0].\r\n        let Vclosed = V.slice(0);  // Copy V\r\n        Vclosed.push(V[0]);        // Add V[0] at end\r\n\r\n        return { rtan: Rtangent_PointPolyC(P, Vclosed), ltan: Ltangent_PointPolyC(P, Vclosed) };\r\n    }\r\n\r\n\r\n    // Rtangent_PointPolyC(): binary search for convex polygon right tangent\r\n    //    Input:  P = a 2D point (exterior to the polygon)\r\n    //            n = number of polygon vertices\r\n    //            V = array of vertices for a 2D convex polygon with first\r\n    //                vertex duplicated as last, so V[n-1] = V[0]\r\n    //    Return: index \"i\" of rightmost tangent point V[i]\r\n    function Rtangent_PointPolyC(P: Point, V: Point[]): number {\r\n        var n = V.length - 1;\r\n\r\n        // use binary search for large convex polygons\r\n        var a: number, b: number, c: number;            // indices for edge chain endpoints\r\n        var upA: boolean, dnC: boolean;           // test for up direction of edges a and c\r\n\r\n        // rightmost tangent = maximum for the isLeft() ordering\r\n        // test if V[0] is a local maximum\r\n        if (below(P, V[1], V[0]) && !above(P, V[n - 1], V[0]))\r\n            return 0;               // V[0] is the maximum tangent point\r\n\r\n        for (a = 0, b = n; ;) {          // start chain = [0,n] with V[n]=V[0]\r\n            if (b - a === 1)\r\n                if (above(P, V[a], V[b]))\r\n                    return a;\r\n                else\r\n                    return b;\r\n\r\n            c = Math.floor((a + b) / 2);        // midpoint of [a,b], and 0<c<n\r\n            dnC = below(P, V[c + 1], V[c]);\r\n            if (dnC && !above(P, V[c - 1], V[c]))\r\n                return c;          // V[c] is the maximum tangent point\r\n\r\n            // no max yet, so continue with the binary search\r\n            // pick one of the two subchains [a,c] or [c,b]\r\n            upA = above(P, V[a + 1], V[a]);\r\n            if (upA) {                       // edge a points up\r\n                if (dnC)                         // edge c points down\r\n                    b = c;                           // select [a,c]\r\n                else {                           // edge c points up\r\n                    if (above(P, V[a], V[c]))     // V[a] above V[c]\r\n                        b = c;                       // select [a,c]\r\n                    else                          // V[a] below V[c]\r\n                        a = c;                       // select [c,b]\r\n                }\r\n            }\r\n            else {                           // edge a points down\r\n                if (!dnC)                        // edge c points up\r\n                    a = c;                           // select [c,b]\r\n                else {                           // edge c points down\r\n                    if (below(P, V[a], V[c]))     // V[a] below V[c]\r\n                        b = c;                       // select [a,c]\r\n                    else                          // V[a] above V[c]\r\n                        a = c;                       // select [c,b]\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Ltangent_PointPolyC(): binary search for convex polygon left tangent\r\n    //    Input:  P = a 2D point (exterior to the polygon)\r\n    //            n = number of polygon vertices\r\n    //            V = array of vertices for a 2D convex polygon with first\r\n    //                vertex duplicated as last, so V[n-1] = V[0]\r\n    //    Return: index \"i\" of leftmost tangent point V[i]\r\n    function Ltangent_PointPolyC(P: Point, V: Point[]): number {\r\n        var n = V.length - 1;\r\n        // use binary search for large convex polygons\r\n        var a: number, b: number, c: number;             // indices for edge chain endpoints\r\n        var dnA: boolean, dnC: boolean;           // test for down direction of edges a and c\r\n\r\n        // leftmost tangent = minimum for the isLeft() ordering\r\n        // test if V[0] is a local minimum\r\n        if (above(P, V[n - 1], V[0]) && !below(P, V[1], V[0]))\r\n            return 0;               // V[0] is the minimum tangent point\r\n\r\n        for (a = 0, b = n; ;) {          // start chain = [0,n] with V[n] = V[0]\r\n            if (b - a === 1)\r\n                if (below(P, V[a], V[b]))\r\n                    return a;\r\n                else\r\n                    return b;\r\n\r\n            c = Math.floor((a + b) / 2);        // midpoint of [a,b], and 0<c<n\r\n            dnC = below(P, V[c + 1], V[c]);\r\n            if (above(P, V[c - 1], V[c]) && !dnC)\r\n                return c;          // V[c] is the minimum tangent point\r\n\r\n            // no min yet, so continue with the binary search\r\n            // pick one of the two subchains [a,c] or [c,b]\r\n            dnA = below(P, V[a + 1], V[a]);\r\n            if (dnA) {                       // edge a points down\r\n                if (!dnC)                        // edge c points up\r\n                    b = c;                           // select [a,c]\r\n                else {                           // edge c points down\r\n                    if (below(P, V[a], V[c]))     // V[a] below V[c]\r\n                        b = c;                       // select [a,c]\r\n                    else                          // V[a] above V[c]\r\n                        a = c;                       // select [c,b]\r\n                }\r\n            }\r\n            else {                           // edge a points up\r\n                if (dnC)                         // edge c points down\r\n                    a = c;                           // select [c,b]\r\n                else {                           // edge c points up\r\n                    if (above(P, V[a], V[c]))     // V[a] above V[c]\r\n                        b = c;                       // select [a,c]\r\n                    else                          // V[a] below V[c]\r\n                        a = c;                       // select [c,b]\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // RLtangent_PolyPolyC(): get the RL tangent between two convex polygons\r\n    //    Input:  m = number of vertices in polygon 1\r\n    //            V = array of vertices for convex polygon 1 with V[m]=V[0]\r\n    //            n = number of vertices in polygon 2\r\n    //            W = array of vertices for convex polygon 2 with W[n]=W[0]\r\n    //    Output: *t1 = index of tangent point V[t1] for polygon 1\r\n    //            *t2 = index of tangent point W[t2] for polygon 2\r\n    export function tangent_PolyPolyC(V: Point[], W: Point[], t1: (a: Point, b: Point[]) => number, t2: (a: Point, b: Point[]) => number, cmp1: (a: Point, b: Point, c: Point) => boolean, cmp2: (a: Point, b: Point, c: Point) => boolean): { t1: number; t2: number } {\r\n        var ix1: number, ix2: number;      // search indices for polygons 1 and 2\r\n\r\n        // first get the initial vertex on each polygon\r\n        ix1 = t1(W[0], V);   // right tangent from W[0] to V\r\n        ix2 = t2(V[ix1], W); // left tangent from V[ix1] to W\r\n\r\n        // ping-pong linear search until it stabilizes\r\n        var done = false;                    // flag when done\r\n        while (!done) {\r\n            done = true;                     // assume done until...\r\n            while (true) {\r\n                if (ix1 === V.length - 1) ix1 = 0;\r\n                if (cmp1(W[ix2], V[ix1], V[ix1 + 1])) break;\r\n                ++ix1;                       // get Rtangent from W[ix2] to V\r\n            }\r\n            while (true) {\r\n                if (ix2 === 0) ix2 = W.length - 1;\r\n                if (cmp2(V[ix1], W[ix2], W[ix2 - 1])) break;\r\n                --ix2;                       // get Ltangent from V[ix1] to W\r\n                done = false;                // not done if had to adjust this\r\n            }\r\n        }\r\n        return { t1: ix1, t2: ix2 };\r\n    }\r\n\r\n    export function LRtangent_PolyPolyC(V: Point[], W: Point[]): { t1: number; t2: number } {\r\n        var rl = RLtangent_PolyPolyC(W, V);\r\n        return { t1: rl.t2, t2: rl.t1 };\r\n    }\r\n\r\n    export function RLtangent_PolyPolyC(V: Point[], W: Point[]): { t1: number; t2: number } {\r\n        return tangent_PolyPolyC(V, W, Rtangent_PointPolyC, Ltangent_PointPolyC, above, below);\r\n    }\r\n\r\n    export function LLtangent_PolyPolyC(V: Point[], W: Point[]): { t1: number; t2: number } {\r\n        return tangent_PolyPolyC(V, W, Ltangent_PointPolyC, Ltangent_PointPolyC, below, below);\r\n    }\r\n\r\n    export function RRtangent_PolyPolyC(V: Point[], W: Point[]): { t1: number; t2: number } {\r\n        return tangent_PolyPolyC(V, W, Rtangent_PointPolyC, Rtangent_PointPolyC, above, above);\r\n    }\r\n\r\n    export class BiTangent {\r\n        constructor(public t1: number, public t2: number) { }\r\n    }\r\n\r\n    export class BiTangents {\r\n        rl: BiTangent;\r\n        lr: BiTangent;\r\n        ll: BiTangent;\r\n        rr: BiTangent;\r\n    }\r\n\r\n    export class TVGPoint extends Point {\r\n        vv: VisibilityVertex;\r\n    }\r\n\r\n    export class VisibilityVertex {\r\n        constructor(\r\n            public id: number,\r\n            public polyid: number,\r\n            public polyvertid: number,\r\n            public p: TVGPoint)\r\n        {\r\n            p.vv = this;\r\n        }\r\n    }\r\n\r\n    export class VisibilityEdge {\r\n        constructor(\r\n            public source: VisibilityVertex,\r\n            public target: VisibilityVertex) { }\r\n        length(): number {\r\n            var dx = this.source.p.x - this.target.p.x;\r\n            var dy = this.source.p.y - this.target.p.y;\r\n            return Math.sqrt(dx * dx + dy * dy);\r\n        }\r\n    }\r\n\r\n    export class TangentVisibilityGraph {\r\n        V: VisibilityVertex[] = [];\r\n        E: VisibilityEdge[] = [];\r\n        constructor(public P: TVGPoint[][], g0?: { V: VisibilityVertex[]; E: VisibilityEdge[] }) {\r\n            if (!g0) {\r\n                var n = P.length;\r\n                // For each node...\r\n                for (var i = 0; i < n; i++) {\r\n                    var p = P[i];\r\n                    // For each node vertex.\r\n                    for (var j = 0; j < p.length; ++j) {\r\n                        var pj = p[j],\r\n                            vv = new VisibilityVertex(this.V.length, i, j, pj);\r\n                        this.V.push(vv);\r\n                        // For the every iteration but the first, generate an\r\n                        // edge from the previous visibility vertex to the\r\n                        // current one.\r\n                        if (j > 0) this.E.push(new VisibilityEdge(p[j - 1].vv, vv));\r\n                    }\r\n                    // Add a visibility edge from the first vertex to the last.\r\n                    if (p.length > 1) this.E.push(new VisibilityEdge(p[0].vv, p[p.length - 1].vv));\r\n                }\r\n                for (var i = 0; i < n - 1; i++) {\r\n                    var Pi = P[i];\r\n                    for (var j = i + 1; j < n; j++) {\r\n                        var Pj = P[j],\r\n                            t = tangents(Pi, Pj);\r\n                        for (var q in t) {\r\n                            var c = t[q],\r\n                                source = Pi[c.t1], target = Pj[c.t2];\r\n                            this.addEdgeIfVisible(source, target, i, j);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                this.V = g0.V.slice(0);\r\n                this.E = g0.E.slice(0);\r\n            }\r\n        }\r\n        addEdgeIfVisible(u: TVGPoint, v: TVGPoint, i1: number, i2: number) {\r\n            if (!this.intersectsPolys(new LineSegment(u.x, u.y, v.x, v.y), i1, i2)) {\r\n                this.E.push(new VisibilityEdge(u.vv, v.vv));\r\n            }\r\n        }\r\n        addPoint(p: TVGPoint, i1: number): VisibilityVertex {\r\n            var n = this.P.length;\r\n            this.V.push(new VisibilityVertex(this.V.length, n, 0, p));\r\n            for (var i = 0; i < n; ++i) {\r\n                if (i === i1) continue;\r\n                var poly = this.P[i],\r\n                    t = tangent_PointPolyC(p, poly);\r\n                this.addEdgeIfVisible(p, poly[t.ltan], i1, i);\r\n                this.addEdgeIfVisible(p, poly[t.rtan], i1, i);\r\n            }\r\n            return p.vv;\r\n        }\r\n        private intersectsPolys(l: LineSegment, i1: number, i2: number): boolean {\r\n            for (var i = 0, n = this.P.length; i < n; ++i) {\r\n                if (i != i1 && i != i2 && intersects(l, this.P[i]).length > 0) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function intersects(l: LineSegment, P: Point[]) {\r\n        var ints = [];\r\n        for (var i = 1, n = P.length; i < n; ++i) {\r\n            var int = Rectangle.lineIntersection(\r\n                l.x1, l.y1,\r\n                l.x2, l.y2,\r\n                P[i - 1].x, P[i - 1].y,\r\n                P[i].x, P[i].y\r\n                );\r\n            if (int) ints.push(int);\r\n        }\r\n        return ints;\r\n    }\r\n\r\n    export function tangents(V: Point[], W: Point[]): BiTangents\r\n    {\r\n        var m = V.length - 1, n = W.length - 1;\r\n        var bt = new BiTangents();\r\n        for (var i = 0; i < m; ++i) {\r\n            for (var j = 0; j < n; ++j) {\r\n                var v1 = V[i == 0 ? m - 1 : i - 1];\r\n                var v2 = V[i];\r\n                var v3 = V[i + 1];\r\n                var w1 = W[j == 0 ? n - 1 : j - 1];\r\n                var w2 = W[j];\r\n                var w3 = W[j + 1];\r\n                var v1v2w2 = isLeft(v1, v2, w2);\r\n                var v2w1w2 = isLeft(v2, w1, w2);\r\n                var v2w2w3 = isLeft(v2, w2, w3);\r\n                var w1w2v2 = isLeft(w1, w2, v2);\r\n                var w2v1v2 = isLeft(w2, v1, v2);\r\n                var w2v2v3 = isLeft(w2, v2, v3);\r\n                if (v1v2w2 >= 0 && v2w1w2 >= 0 && v2w2w3 < 0\r\n                    && w1w2v2 >= 0 && w2v1v2 >= 0 && w2v2v3 < 0) {\r\n                        bt.ll = new BiTangent(i, j);\r\n                } else if (v1v2w2 <= 0 && v2w1w2 <= 0 && v2w2w3 > 0\r\n                    && w1w2v2 <= 0 && w2v1v2 <= 0 && w2v2v3 > 0) {\r\n                        bt.rr = new BiTangent(i, j);\r\n                } else if (v1v2w2 <= 0 && v2w1w2 > 0 && v2w2w3 <= 0\r\n                    && w1w2v2 >= 0 && w2v1v2 < 0 && w2v2v3 >= 0) {\r\n                        bt.rl = new BiTangent(i, j);\r\n                } else if (v1v2w2 >= 0 && v2w1w2 < 0 && v2w2w3 >= 0\r\n                    && w1w2v2 <= 0 && w2v1v2 > 0 && w2v2v3 <= 0) {\r\n                        bt.lr = new BiTangent(i, j);\r\n                }\r\n            }\r\n        }\r\n        return bt;\r\n    }\r\n\r\n    function isPointInsidePoly(p: Point, poly: Point[]): boolean {\r\n        for (var i = 1, n = poly.length; i < n; ++i)\r\n            if (below(poly[i - 1], poly[i], p)) return false;\r\n        return true;\r\n    }\r\n\r\n    function isAnyPInQ(p: Point[], q: Point[]): boolean {\r\n        return !p.every(v => !isPointInsidePoly(v, q));\r\n    }\r\n\r\n    export function polysOverlap(p: Point[], q: Point[]): boolean {\r\n        if (isAnyPInQ(p, q)) return true;\r\n        if (isAnyPInQ(q, p)) return true;\r\n        for (var i = 1, n = p.length; i < n; ++i) {\r\n            var v = p[i], u = p[i - 1];\r\n            if (intersects(new LineSegment(u.x, u.y, v.x, v.y), q).length > 0) return true;\r\n        }\r\n        return false;\r\n    }\r\n","    var packingOptions = {\r\n        PADDING: 10,\r\n        GOLDEN_SECTION: (1 + Math.sqrt(5)) / 2,\r\n        FLOAT_EPSILON: 0.0001,\r\n        MAX_INERATIONS: 100\r\n    };\r\n\r\n    // assign x, y to nodes while using box packing algorithm for disconnected graphs\r\n    export function applyPacking(graphs:Array<any>, w, h, node_size, desired_ratio = 1) {\r\n\r\n        var init_x = 0,\r\n            init_y = 0,\r\n\r\n            svg_width = w,\r\n            svg_height = h,\r\n\r\n            desired_ratio = typeof desired_ratio !== 'undefined' ? desired_ratio : 1,\r\n            node_size = typeof node_size !== 'undefined' ? node_size : 0,\r\n\r\n            real_width = 0,\r\n            real_height = 0,\r\n            min_width = 0,\r\n\r\n            global_bottom = 0,\r\n            line = [];\r\n\r\n        if (graphs.length == 0)\r\n            return;\r\n\r\n        /// that would take care of single nodes problem\r\n        // graphs.forEach(function (g) {\r\n        //     if (g.array.length == 1) {\r\n        //         g.array[0].x = 0;\r\n        //         g.array[0].y = 0;\r\n        //     }\r\n        // });\r\n\r\n        calculate_bb(graphs);\r\n        apply(graphs, desired_ratio);\r\n        put_nodes_to_right_positions(graphs);\r\n\r\n        // get bounding boxes for all separate graphs\r\n        function calculate_bb(graphs) {\r\n\r\n            graphs.forEach(function (g) {\r\n                calculate_single_bb(g)\r\n            });\r\n\r\n            function calculate_single_bb(graph) {\r\n                var min_x = Number.MAX_VALUE, min_y = Number.MAX_VALUE,\r\n                    max_x = 0, max_y = 0;\r\n\r\n                graph.array.forEach(function (v) {\r\n                    var w = typeof v.width !== 'undefined' ? v.width : node_size;\r\n                    var h = typeof v.height !== 'undefined' ? v.height : node_size;\r\n                    w /= 2;\r\n                    h /= 2;\r\n                    max_x = Math.max(v.x + w, max_x);\r\n                    min_x = Math.min(v.x - w, min_x);\r\n                    max_y = Math.max(v.y + h, max_y);\r\n                    min_y = Math.min(v.y - h, min_y);\r\n                });\r\n\r\n                graph.width = max_x - min_x;\r\n                graph.height = max_y - min_y;\r\n            }\r\n        }\r\n\r\n        //function plot(data, left, right, opt_x, opt_y) {\r\n        //    // plot the cost function\r\n        //    var plot_svg = d3.select(\"body\").append(\"svg\")\r\n        //        .attr(\"width\", function () { return 2 * (right - left); })\r\n        //        .attr(\"height\", 200);\r\n\r\n\r\n        //    var x = d3.time.scale().range([0, 2 * (right - left)]);\r\n\r\n        //    var xAxis = d3.svg.axis().scale(x).orient(\"bottom\");\r\n        //    plot_svg.append(\"g\").attr(\"class\", \"x axis\")\r\n        //        .attr(\"transform\", \"translate(0, 199)\")\r\n        //        .call(xAxis);\r\n\r\n        //    var lastX = 0;\r\n        //    var lastY = 0;\r\n        //    var value = 0;\r\n        //    for (var r = left; r < right; r += 1) {\r\n        //        value = step(data, r);\r\n        //        // value = 1;\r\n\r\n        //        plot_svg.append(\"line\").attr(\"x1\", 2 * (lastX - left))\r\n        //            .attr(\"y1\", 200 - 30 * lastY)\r\n        //            .attr(\"x2\", 2 * r - 2 * left)\r\n        //            .attr(\"y2\", 200 - 30 * value)\r\n        //            .style(\"stroke\", \"rgb(6,120,155)\");\r\n\r\n        //        lastX = r;\r\n        //        lastY = value;\r\n        //    }\r\n\r\n        //    plot_svg.append(\"circle\").attr(\"cx\", 2 * opt_x - 2 * left).attr(\"cy\", 200 - 30 * opt_y)\r\n        //        .attr(\"r\", 5).style('fill', \"rgba(0,0,0,0.5)\");\r\n\r\n        //}\r\n\r\n        // actual assigning of position to nodes\r\n        function put_nodes_to_right_positions(graphs) {\r\n            graphs.forEach(function (g) {\r\n                // calculate current graph center:\r\n                var center = { x: 0, y: 0 };\r\n\r\n                g.array.forEach(function (node) {\r\n                    center.x += node.x;\r\n                    center.y += node.y;\r\n                });\r\n\r\n                center.x /= g.array.length;\r\n                center.y /= g.array.length;\r\n\r\n                // calculate current top left corner:\r\n                var corner = { x: center.x - g.width / 2, y: center.y - g.height / 2 };\r\n                var offset = { x: g.x - corner.x + svg_width / 2 - real_width / 2, y: g.y - corner.y + svg_height / 2 - real_height / 2};\r\n\r\n                // put nodes:\r\n                g.array.forEach(function (node) {\r\n                    node.x += offset.x;\r\n                    node.y += offset.y;\r\n                });\r\n            });\r\n        }\r\n\r\n        // starts box packing algorithm\r\n        // desired ratio is 1 by default\r\n        function apply(data, desired_ratio) {\r\n            var curr_best_f = Number.POSITIVE_INFINITY;\r\n            var curr_best = 0;\r\n            data.sort(function (a, b) { return b.height - a.height; });\r\n\r\n            min_width = data.reduce(function (a, b) {\r\n                return a.width < b.width ? a.width : b.width;\r\n            });\r\n\r\n            var left = x1 = min_width;\r\n            var right = x2 = get_entire_width(data);\r\n            var iterationCounter = 0;\r\n\r\n            var f_x1 = Number.MAX_VALUE;\r\n            var f_x2 = Number.MAX_VALUE;\r\n            var flag = -1; // determines which among f_x1 and f_x2 to recompute\r\n\r\n\r\n            var dx = Number.MAX_VALUE;\r\n            var df = Number.MAX_VALUE;\r\n\r\n            while ((dx > min_width) || df > packingOptions.FLOAT_EPSILON) {\r\n\r\n                if (flag != 1) {\r\n                    var x1 = right - (right - left) / packingOptions.GOLDEN_SECTION;\r\n                    var f_x1 = step(data, x1);\r\n                }\r\n                if (flag != 0) {\r\n                    var x2 = left + (right - left) / packingOptions.GOLDEN_SECTION;\r\n                    var f_x2 = step(data, x2);\r\n                }\r\n\r\n                dx = Math.abs(x1 - x2);\r\n                df = Math.abs(f_x1 - f_x2);\r\n\r\n                if (f_x1 < curr_best_f) {\r\n                    curr_best_f = f_x1;\r\n                    curr_best = x1;\r\n                }\r\n\r\n                if (f_x2 < curr_best_f) {\r\n                    curr_best_f = f_x2;\r\n                    curr_best = x2;\r\n                }\r\n\r\n                if (f_x1 > f_x2) {\r\n                    left = x1;\r\n                    x1 = x2;\r\n                    f_x1 = f_x2;\r\n                    flag = 1;\r\n                } else {\r\n                    right = x2;\r\n                    x2 = x1;\r\n                    f_x2 = f_x1;\r\n                    flag = 0;\r\n                }\r\n\r\n                if (iterationCounter++ > 100) {\r\n                    break;\r\n                }\r\n            }\r\n            // plot(data, min_width, get_entire_width(data), curr_best, curr_best_f);\r\n            step(data, curr_best);\r\n        }\r\n\r\n        // one iteration of the optimization method\r\n        // (gives a proper, but not necessarily optimal packing)\r\n        function step(data, max_width) {\r\n            line = [];\r\n            real_width = 0;\r\n            real_height = 0;\r\n            global_bottom = init_y;\r\n\r\n            for (var i = 0; i < data.length; i++) {\r\n                var o = data[i];\r\n                put_rect(o, max_width);\r\n            }\r\n\r\n            return Math.abs(get_real_ratio() - desired_ratio);\r\n        }\r\n\r\n        // looking for a position to one box\r\n        function put_rect(rect, max_width) {\r\n\r\n\r\n            var parent = undefined;\r\n\r\n            for (var i = 0; i < line.length; i++) {\r\n                if ((line[i].space_left >= rect.height) && (line[i].x + line[i].width + rect.width + packingOptions.PADDING - max_width) <= packingOptions.FLOAT_EPSILON) {\r\n                    parent = line[i];\r\n                    break;\r\n                }\r\n            }\r\n\r\n            line.push(rect);\r\n\r\n            if (parent !== undefined) {\r\n                rect.x = parent.x + parent.width + packingOptions.PADDING;\r\n                rect.y = parent.bottom;\r\n                rect.space_left = rect.height;\r\n                rect.bottom = rect.y;\r\n                parent.space_left -= rect.height + packingOptions.PADDING;\r\n                parent.bottom += rect.height + packingOptions.PADDING;\r\n            } else {\r\n                rect.y = global_bottom;\r\n                global_bottom += rect.height + packingOptions.PADDING;\r\n                rect.x = init_x;\r\n                rect.bottom = rect.y;\r\n                rect.space_left = rect.height;\r\n            }\r\n\r\n            if (rect.y + rect.height - real_height > -packingOptions.FLOAT_EPSILON) real_height = rect.y + rect.height - init_y;\r\n            if (rect.x + rect.width - real_width > -packingOptions.FLOAT_EPSILON) real_width = rect.x + rect.width - init_x;\r\n        };\r\n\r\n        function get_entire_width(data) {\r\n            var width = 0;\r\n            data.forEach(function (d) { return width += d.width + packingOptions.PADDING; });\r\n            return width;\r\n        }\r\n\r\n        function get_real_ratio() {\r\n            return (real_width / real_height);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * connected components of graph\r\n     * returns an array of {}\r\n     */\r\n    export function separateGraphs(nodes, links) {\r\n        var marks = {};\r\n        var ways = {};\r\n        var graphs = [];\r\n        var clusters = 0;\r\n\r\n        for (var i = 0; i < links.length; i++) {\r\n            var link = links[i];\r\n            var n1 = link.source;\r\n            var n2 = link.target;\r\n            if (ways[n1.index])\r\n                ways[n1.index].push(n2);\r\n            else\r\n                ways[n1.index] = [n2];\r\n\r\n            if (ways[n2.index])\r\n                ways[n2.index].push(n1);\r\n            else\r\n                ways[n2.index] = [n1];\r\n        }\r\n\r\n        for (var i = 0; i < nodes.length; i++) {\r\n            var node = nodes[i];\r\n            if (marks[node.index]) continue;\r\n            explore_node(node, true);\r\n        }\r\n\r\n        function explore_node(n, is_new) {\r\n            if (marks[n.index] !== undefined) return;\r\n            if (is_new) {\r\n                clusters++;\r\n                graphs.push({ array: [] });\r\n            }\r\n            marks[n.index] = clusters;\r\n            graphs[clusters - 1].array.push(n);\r\n            var adjacent = ways[n.index];\r\n            if (!adjacent) return;\r\n\r\n            for (var j = 0; j < adjacent.length; j++) {\r\n                explore_node(adjacent[j], false);\r\n            }\r\n        }\r\n\r\n        return graphs;\r\n    }\r\n","import {Point} from './geom'\r\nimport {Rectangle} from './rectangle'\r\nimport {Constraint, Solver, Variable} from './vpsc'\r\nimport {Calculator} from './shortestpaths'\r\n    export interface NodeAccessor<Node>{\r\n        getChildren(v:Node) : number[];\r\n        getBounds(v:Node) : Rectangle;\r\n    }\r\n    export class NodeWrapper {\r\n        leaf: boolean;\r\n        parent: NodeWrapper;\r\n        ports: Vert[];\r\n        constructor(public id: number, public rect: Rectangle, public children: number[]) {\r\n            this.leaf = typeof children === 'undefined' || children.length === 0;\r\n        }\r\n    }\r\n    export class Vert {\r\n        constructor(public id: number, public x:number, public y: number, public node: NodeWrapper = null, public line = null) {}\r\n    }\r\n\r\n    export class LongestCommonSubsequence<T> {\r\n        length: number;\r\n        si: number;\r\n        ti: number;\r\n        reversed: boolean;\r\n        constructor(public s: T[], public t: T[]) {\r\n            var mf = LongestCommonSubsequence.findMatch(s, t);\r\n            var tr = t.slice(0).reverse();\r\n            var mr = LongestCommonSubsequence.findMatch(s, tr);\r\n            if (mf.length >= mr.length) {\r\n                this.length = mf.length;\r\n                this.si = mf.si;\r\n                this.ti = mf.ti;\r\n                this.reversed = false;\r\n            } else {\r\n                this.length = mr.length;\r\n                this.si = mr.si;\r\n                this.ti = t.length - mr.ti - mr.length;\r\n                this.reversed = true;\r\n            }\r\n        }\r\n        private static findMatch<T>(s: T[], t: T[]) {\r\n            var m = s.length;\r\n            var n = t.length;\r\n            var match = { length: 0, si: -1, ti: -1 };\r\n            var l = new Array(m);\r\n            for (var i = 0; i < m; i++) {\r\n                l[i] = new Array(n);\r\n                for (var j = 0; j < n; j++)\r\n                    if (s[i] === t[j]) {\r\n                        var v = l[i][j] = (i === 0 || j === 0) ? 1 : l[i - 1][j - 1] + 1;\r\n                        if (v > match.length) {\r\n                            match.length = v;\r\n                            match.si = i - v + 1;\r\n                            match.ti = j - v + 1;\r\n                        };\r\n                    } else l[i][j] = 0;\r\n            }\r\n            return match;\r\n        }\r\n        getSequence(): T[]{\r\n            return this.length >= 0 ? this.s.slice(this.si, this.si + this.length) : [];\r\n        }\r\n    }\r\n    // a horizontal or vertical line of nodes\r\n    export interface GridLine {\r\n        nodes: NodeWrapper[];\r\n        pos: number;\r\n    }\r\n    export class GridRouter<Node> {\r\n        leaves: NodeWrapper[] = null;\r\n        groups: NodeWrapper[];\r\n        nodes: NodeWrapper[];\r\n        cols: GridLine[];\r\n        rows: GridLine[];\r\n        root;\r\n        verts: Vert[];\r\n        edges;\r\n        backToFront;\r\n        obstacles;\r\n        passableEdges;\r\n        private avg(a) { return a.reduce((x, y) => x + y) / a.length }\r\n\r\n        // in the given axis, find sets of leaves overlapping in that axis\r\n        // center of each GridLine is average of all nodes in column\r\n        private getGridLines(axis): GridLine[] {\r\n            var columns = [];\r\n            var ls = this.leaves.slice(0, this.leaves.length);\r\n            while (ls.length > 0) {\r\n                // find a column of all leaves overlapping in axis with the first leaf\r\n                let overlapping = ls.filter(v=> v.rect['overlap' + axis.toUpperCase()](ls[0].rect));\r\n                let col = {\r\n                    nodes: overlapping,\r\n                    pos: this.avg(overlapping.map(v=> v.rect['c' + axis]()))\r\n                };\r\n                columns.push(col);\r\n                col.nodes.forEach(v=> ls.splice(ls.indexOf(v), 1));\r\n            }\r\n            columns.sort((a, b) => a.pos - b.pos)\r\n            return columns;\r\n        }\r\n\r\n        // get the depth of the given node in the group hierarchy\r\n        private getDepth(v) {\r\n            var depth = 0;\r\n            while (v.parent !== this.root) {\r\n                depth++;\r\n                v = v.parent;\r\n            }\r\n            return depth;\r\n        }\r\n\r\n        // medial axes between node centres and also boundary lines for the grid\r\n        private midPoints(a) {\r\n            var gap = a[1] - a[0];\r\n            var mids = [a[0] - gap / 2];\r\n            for (var i = 1; i < a.length; i++) {\r\n                mids.push((a[i] + a[i - 1]) / 2);\r\n            }\r\n            mids.push(a[a.length - 1] + gap / 2);\r\n            return mids;\r\n        }\r\n\r\n        constructor(public originalnodes: Node[], accessor: NodeAccessor<Node>, public groupPadding: number = 12) {\r\n            this.nodes = originalnodes.map((v, i) => new NodeWrapper(i, accessor.getBounds(v), accessor.getChildren(v)));\r\n            this.leaves = this.nodes.filter(v=> v.leaf);\r\n            this.groups = this.nodes.filter(g=> !g.leaf);\r\n            this.cols = this.getGridLines('x');\r\n            this.rows = this.getGridLines('y');\r\n\r\n            // create parents for each node or group that is a member of another's children\r\n            this.groups.forEach(v=>\r\n                v.children.forEach(c=> this.nodes[<number>c].parent = v));\r\n\r\n            // root claims the remaining orphans\r\n            this.root = { children: [] };\r\n            this.nodes.forEach(v=> {\r\n                if (typeof v.parent === 'undefined') {\r\n                    v.parent = this.root;\r\n                    this.root.children.push(v.id);\r\n                }\r\n\r\n                // each node will have grid vertices associated with it,\r\n                // some inside the node and some on the boundary\r\n                // leaf nodes will have exactly one internal node at the center\r\n                // and four boundary nodes\r\n                // groups will have potentially many of each\r\n                v.ports = []\r\n            });\r\n\r\n            // nodes ordered by their position in the group hierarchy\r\n            this.backToFront = this.nodes.slice(0);\r\n            this.backToFront.sort((x, y) => this.getDepth(x) - this.getDepth(y));\r\n\r\n            // compute boundary rectangles for each group\r\n            // has to be done from front to back, i.e. inside groups to outside groups\r\n            // such that each can be made large enough to enclose its interior\r\n            var frontToBackGroups = this.backToFront.slice(0).reverse().filter(g=> !g.leaf);\r\n            frontToBackGroups.forEach(v=> {\r\n                var r = Rectangle.empty();\r\n                v.children.forEach(c=> r = r.union(this.nodes[c].rect));\r\n                v.rect = r.inflate(this.groupPadding);\r\n            });\r\n\r\n            var colMids = this.midPoints(this.cols.map(r=> r.pos));\r\n            var rowMids = this.midPoints(this.rows.map(r=> r.pos));\r\n\r\n            // setup extents of lines\r\n            var rowx = colMids[0], rowX = colMids[colMids.length - 1];\r\n            var coly = rowMids[0], colY = rowMids[rowMids.length - 1];\r\n\r\n            // horizontal lines\r\n            var hlines = this.rows.map(r=> <any>{ x1: rowx, x2: rowX, y1: r.pos, y2: r.pos })\r\n                .concat(rowMids.map(m=> <any>{ x1: rowx, x2: rowX, y1: m, y2: m }));\r\n\r\n            // vertical lines\r\n            var vlines = this.cols.map(c=> <any>{ x1: c.pos, x2: c.pos, y1: coly, y2: colY })\r\n                .concat(colMids.map(m=> <any>{ x1: m, x2: m, y1: coly, y2: colY }));\r\n\r\n            // the full set of lines\r\n            var lines = hlines.concat(vlines);\r\n\r\n            // we record the vertices associated with each line\r\n            lines.forEach(l=> l.verts = []);\r\n\r\n            // the routing graph\r\n            this.verts = [];\r\n            this.edges = [];\r\n\r\n            // create vertices at the crossings of horizontal and vertical grid-lines\r\n            hlines.forEach(h=>\r\n                vlines.forEach(v=> {\r\n                    var p = new Vert(this.verts.length, v.x1, h.y1);\r\n                    h.verts.push(p);\r\n                    v.verts.push(p);\r\n                    this.verts.push(p);\r\n\r\n                    // assign vertices to the nodes immediately under them\r\n                    var i = this.backToFront.length;\r\n                    while (i-- > 0) {\r\n                        var node = this.backToFront[i],\r\n                            r = node.rect;\r\n                        var dx = Math.abs(p.x - r.cx()),\r\n                            dy = Math.abs(p.y - r.cy());\r\n                        if (dx < r.width() / 2 && dy < r.height() / 2) {\r\n                            (<any>p).node = node;\r\n                            break;\r\n                        }\r\n                    }\r\n                })\r\n                );\r\n\r\n            lines.forEach((l, li) => {\r\n                // create vertices at the intersections of nodes and lines\r\n                this.nodes.forEach((v, i) => {\r\n                    v.rect.lineIntersections(l.x1, l.y1, l.x2, l.y2).forEach((intersect, j) => {\r\n                        //console.log(li+','+i+','+j+':'+intersect.x + ',' + intersect.y);\r\n                        var p = new Vert(this.verts.length, intersect.x, intersect.y, v, l);\r\n                        this.verts.push(p);\r\n                        l.verts.push(p);\r\n                        v.ports.push(p);\r\n                    });\r\n                });\r\n\r\n                // split lines into edges joining vertices\r\n                var isHoriz = Math.abs(l.y1 - l.y2) < 0.1;\r\n                var delta = (a, b) => isHoriz ? b.x - a.x : b.y - a.y;\r\n                l.verts.sort(delta);\r\n                for (var i = 1; i < l.verts.length; i++) {\r\n                    var u = l.verts[i - 1], v = l.verts[i];\r\n                    if (u.node && u.node === v.node && u.node.leaf) continue;\r\n                    this.edges.push({ source: u.id, target: v.id, length: Math.abs(delta(u, v)) });\r\n                }\r\n            });\r\n\r\n\r\n\r\n        }\r\n\r\n        // find path from v to root including both v and root\r\n        private findLineage(v) {\r\n            var lineage = [v];\r\n            do {\r\n                v = v.parent;\r\n                lineage.push(v);\r\n            } while (v !== this.root);\r\n            return lineage.reverse();\r\n        }\r\n\r\n        // find path connecting a and b through their lowest common ancestor\r\n        private findAncestorPathBetween(a, b) {\r\n            var aa = this.findLineage(a), ba = this.findLineage(b), i = 0;\r\n            while (aa[i] === ba[i]) i++;\r\n            // i-1 to include common ancestor only once (as first element)\r\n            return { commonAncestor: aa[i - 1], lineages: aa.slice(i).concat(ba.slice(i)) };\r\n        }\r\n\r\n        // when finding a path between two nodes a and b, siblings of a and b on the\r\n        // paths from a and b to their least common ancestor are obstacles\r\n        siblingObstacles(a, b) {\r\n            var path = this.findAncestorPathBetween(a, b);\r\n            var lineageLookup = {};\r\n            path.lineages.forEach(v=> lineageLookup[v.id] = {});\r\n            var obstacles = path.commonAncestor.children.filter(v=> !(v in lineageLookup));\r\n\r\n            path.lineages\r\n                .filter(v=> v.parent !== path.commonAncestor)\r\n                .forEach(v=> obstacles = obstacles.concat(v.parent.children.filter(c=> c !== v.id)));\r\n\r\n            return obstacles.map(v=> this.nodes[v]);\r\n        }\r\n\r\n        // for the given routes, extract all the segments orthogonal to the axis x\r\n        // and return all them grouped by x position\r\n        static getSegmentSets(routes, x, y) {\r\n            // vsegments is a list of vertical segments sorted by x position\r\n            var vsegments = [];\r\n            for (var ei = 0; ei < routes.length; ei++) {\r\n                var route = routes[ei];\r\n                for (var si = 0; si < route.length; si++) {\r\n                    var s = <any>route[si];\r\n                    s.edgeid = ei;\r\n                    s.i = si;\r\n                    var sdx = s[1][x] - s[0][x];\r\n                    if (Math.abs(sdx) < 0.1) {\r\n                        vsegments.push(s);\r\n                    }\r\n                }\r\n            }\r\n            vsegments.sort((a, b) => a[0][x] - b[0][x]);\r\n\r\n            // vsegmentsets is a set of sets of segments grouped by x position\r\n            var vsegmentsets = [];\r\n            var segmentset = null;\r\n            for (var i = 0; i < vsegments.length; i++) {\r\n                var s = vsegments[i];\r\n                if (!segmentset || Math.abs(s[0][x] - segmentset.pos) > 0.1) {\r\n                    segmentset = { pos: s[0][x], segments: [] };\r\n                    vsegmentsets.push(segmentset);\r\n                }\r\n                segmentset.segments.push(s);\r\n            }\r\n            return vsegmentsets;\r\n        }\r\n\r\n        // for all segments in this bundle create a vpsc problem such that\r\n        // each segment's x position is a variable and separation constraints\r\n        // are given by the partial order over the edges to which the segments belong\r\n        // for each pair s1,s2 of segments in the open set:\r\n        //   e1 = edge of s1, e2 = edge of s2\r\n        //   if leftOf(e1,e2) create constraint s1.x + gap <= s2.x\r\n        //   else if leftOf(e2,e1) create cons. s2.x + gap <= s1.x\r\n        static nudgeSegs(x: string, y: string, routes, segments, leftOf, gap: number) {\r\n            var n = segments.length;\r\n            if (n <= 1) return;\r\n            var vs = segments.map(s => new Variable(s[0][x]));\r\n            var cs = [];\r\n            for (var i = 0; i < n; i++) {\r\n                for (var j = 0; j < n; j++) {\r\n                    if (i === j) continue;\r\n                    var s1 = segments[i],\r\n                        s2 = segments[j],\r\n                        e1 = s1.edgeid,\r\n                        e2 = s2.edgeid,\r\n                        lind = -1,\r\n                        rind = -1;\r\n                    // in page coordinates (not cartesian) the notion of 'leftof' is flipped in the horizontal axis from the vertical axis\r\n                    // that is, when nudging vertical segments, if they increase in the y(conj) direction the segment belonging to the\r\n                    // 'left' edge actually needs to be nudged to the right\r\n                    // when nudging horizontal segments, if the segments increase in the x direction\r\n                    // then the 'left' segment needs to go higher, i.e. to have y pos less than that of the right\r\n                    if (x == 'x') {\r\n                        if (leftOf(e1, e2)) {\r\n                            //console.log('s1: ' + s1[0][x] + ',' + s1[0][y] + '-' + s1[1][x] + ',' + s1[1][y]);\r\n                            if (s1[0][y] < s1[1][y]) {\r\n                                lind = j, rind = i;\r\n                            } else {\r\n                                lind = i, rind = j;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (leftOf(e1, e2)) {\r\n                            if (s1[0][y] < s1[1][y]) {\r\n                                lind = i, rind = j;\r\n                            } else {\r\n                                lind = j, rind = i;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (lind >= 0) {\r\n                        //console.log(x+' constraint: ' + lind + '<' + rind);\r\n                        cs.push(new Constraint(vs[lind], vs[rind], gap));\r\n                    }\r\n                }\r\n            }\r\n            var solver = new Solver(vs, cs);\r\n            solver.solve();\r\n            vs.forEach((v, i) => {\r\n                var s = segments[i];\r\n                var pos = v.position();\r\n                s[0][x] = s[1][x] = pos;\r\n                var route = routes[s.edgeid];\r\n                if (s.i > 0) route[s.i - 1][1][x] = pos;\r\n                if (s.i < route.length - 1) route[s.i + 1][0][x] = pos;\r\n            });\r\n        }\r\n\r\n        static nudgeSegments(routes, x: string, y: string, leftOf: (e1: number, e2: number) => boolean, gap: number) {\r\n            var vsegmentsets = GridRouter.getSegmentSets(routes, x, y);\r\n            // scan the grouped (by x) segment sets to find co-linear bundles\r\n            for (var i = 0; i < vsegmentsets.length; i++) {\r\n                var ss = vsegmentsets[i];\r\n                var events = [];\r\n                for (var j = 0; j < ss.segments.length; j++) {\r\n                    var s = ss.segments[j];\r\n                    events.push({ type: 0, s: s, pos: Math.min(s[0][y], s[1][y]) });\r\n                    events.push({ type: 1, s: s, pos: Math.max(s[0][y], s[1][y]) });\r\n                }\r\n                events.sort((a, b) => a.pos - b.pos + a.type - b.type);\r\n                var open = [];\r\n                var openCount = 0;\r\n                events.forEach(e=> {\r\n                    if (e.type === 0) {\r\n                        open.push(e.s);\r\n                        openCount++;\r\n                    } else {\r\n                        openCount--;\r\n                    }\r\n                    if (openCount == 0) {\r\n                        GridRouter.nudgeSegs(x, y, routes, open, leftOf, gap);\r\n                        open = [];\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        // obtain routes for the specified edges, nicely nudged apart\r\n        // warning: edge paths may be reversed such that common paths are ordered consistently within bundles!\r\n        // @param edges list of edges\r\n        // @param nudgeGap how much to space parallel edge segements\r\n        // @param source function to retrieve the index of the source node for a given edge\r\n        // @param target function to retrieve the index of the target node for a given edge\r\n        // @returns an array giving, for each edge, an array of segments, each segment a pair of points in an array\r\n        routeEdges<Edge>(edges: Edge[], nudgeGap: number, source: (e: Edge) => number, target: (e: Edge) => number): Point[][][] {\r\n            var routePaths = edges.map(e=> this.route(source(e), target(e)));\r\n            var order = GridRouter.orderEdges(routePaths);\r\n            var routes = routePaths.map(function (e) { return GridRouter.makeSegments(e); });\r\n            GridRouter.nudgeSegments(routes, 'x', 'y', order, nudgeGap);\r\n            GridRouter.nudgeSegments(routes, 'y', 'x', order, nudgeGap);\r\n            GridRouter.unreverseEdges(routes, routePaths);\r\n            return routes;\r\n        }\r\n\r\n        // path may have been reversed by the subsequence processing in orderEdges\r\n        // so now we need to restore the original order\r\n        static unreverseEdges(routes, routePaths) {\r\n            routes.forEach((segments, i) => {\r\n                var path = routePaths[i];\r\n                if ((<any>path).reversed) {\r\n                    segments.reverse(); // reverse order of segments\r\n                    segments.forEach(function (segment) {\r\n                        segment.reverse();  // reverse each segment\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        static angleBetween2Lines(line1: Point[], line2: Point[]): number {\r\n            var angle1 = Math.atan2(line1[0].y - line1[1].y,\r\n                line1[0].x - line1[1].x);\r\n            var angle2 = Math.atan2(line2[0].y - line2[1].y,\r\n                line2[0].x - line2[1].x);\r\n            var diff = angle1 - angle2;\r\n            if (diff > Math.PI || diff < -Math.PI) {\r\n                diff = angle2 - angle1;\r\n            }\r\n            return diff;\r\n        }\r\n\r\n        // does the path a-b-c describe a left turn?\r\n        private static isLeft(a, b, c) {\r\n            return ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) <= 0;\r\n        }\r\n\r\n        // for the given list of ordered pairs, returns a function that (efficiently) looks-up a specific pair to\r\n        // see if it exists in the list\r\n        private static getOrder(pairs: { l: number; r: number }[]): (l: number, r: number) => boolean {\r\n            var outgoing = {};\r\n            for (var i = 0; i < pairs.length; i++) {\r\n                var p = pairs[i];\r\n                if (typeof outgoing[p.l] === 'undefined') outgoing[p.l] = {};\r\n                outgoing[p.l][p.r] = true;\r\n            }\r\n            return (l, r) => typeof outgoing[l] !== 'undefined' && outgoing[l][r];\r\n        }\r\n\r\n        // returns an ordering (a lookup function) that determines the correct order to nudge the\r\n        // edge paths apart to minimize crossings\r\n        static orderEdges(edges) {\r\n            var edgeOrder = [];\r\n            for (var i = 0; i < edges.length - 1; i++) {\r\n                for (var j = i + 1; j < edges.length; j++) {\r\n                    var e = edges[i],\r\n                        f = edges[j],\r\n                        lcs = new LongestCommonSubsequence(e, f);\r\n                    var u, vi, vj;\r\n                    if (lcs.length === 0)\r\n                        continue; // no common subpath\r\n                    if (lcs.reversed) {\r\n                        // if we found a common subpath but one of the edges runs the wrong way,\r\n                        // then reverse f.\r\n                        f.reverse();\r\n                        f.reversed = true;\r\n                        lcs = new LongestCommonSubsequence(e, f);\r\n                    }\r\n                    if ((lcs.si <= 0 || lcs.ti <= 0) &&\r\n                        (lcs.si + lcs.length >= e.length || lcs.ti + lcs.length >= f.length)) {\r\n                        // the paths do not diverge, so make an arbitrary ordering decision\r\n                        edgeOrder.push({ l: i, r: j });\r\n                        continue;\r\n                    }\r\n                    if (lcs.si + lcs.length >= e.length || lcs.ti + lcs.length >= f.length) {\r\n                        // if the common subsequence of the\r\n                        // two edges being considered goes all the way to the\r\n                        // end of one (or both) of the lines then we have to\r\n                        // base our ordering decision on the other end of the\r\n                        // common subsequence\r\n                        u = e[lcs.si + 1];\r\n                        vj = e[lcs.si - 1];\r\n                        vi = f[lcs.ti - 1];\r\n                    } else {\r\n                        u = e[lcs.si + lcs.length - 2];\r\n                        vi = e[lcs.si + lcs.length];\r\n                        vj = f[lcs.ti + lcs.length];\r\n                    }\r\n                    if (GridRouter.isLeft(u, vi, vj)) {\r\n                        edgeOrder.push({ l: j, r: i });\r\n                    } else {\r\n                        edgeOrder.push({ l: i, r: j });\r\n                    }\r\n                }\r\n            }\r\n            //edgeOrder.forEach(function (e) { console.log('l:' + e.l + ',r:' + e.r) });\r\n            return GridRouter.getOrder(edgeOrder);\r\n        }\r\n\r\n        // for an orthogonal path described by a sequence of points, create a list of segments\r\n        // if consecutive segments would make a straight line they are merged into a single segment\r\n        // segments are over cloned points, not the original vertices\r\n        static makeSegments(path: Point[]): Point[][] {\r\n            function copyPoint(p: Point) {\r\n                return <Point>{ x: p.x, y: p.y };\r\n            }\r\n            var isStraight = (a, b, c) => Math.abs((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0.001;\r\n            var segments = [];\r\n            var a = copyPoint(path[0]);\r\n            for (var i = 1; i < path.length; i++) {\r\n                var b = copyPoint(path[i]), c = i < path.length - 1 ? path[i + 1] : null;\r\n                if (!c || !isStraight(a, b, c)) {\r\n                    segments.push([a, b]);\r\n                    a = b;\r\n                }\r\n            }\r\n            return segments;\r\n        }\r\n\r\n        // find a route between node s and node t\r\n        // returns an array of indices to verts\r\n        route(s: number, t: number): Point[] {\r\n            var source = this.nodes[<number>s], target = this.nodes[<number>t];\r\n            this.obstacles = this.siblingObstacles(source, target);\r\n\r\n            var obstacleLookup = {};\r\n            this.obstacles.forEach(o => obstacleLookup[o.id] = o);\r\n            this.passableEdges = this.edges.filter(e=> {\r\n                var u = this.verts[e.source],\r\n                    v = this.verts[e.target];\r\n                return !(u.node && u.node.id in obstacleLookup\r\n                    || v.node && v.node.id in obstacleLookup);\r\n            });\r\n\r\n            // add dummy segments linking ports inside source and target\r\n            for (var i = 1; i < source.ports.length; i++) {\r\n                var u = source.ports[0].id;\r\n                var v = source.ports[i].id;\r\n                this.passableEdges.push({\r\n                    source: u,\r\n                    target: v,\r\n                    length: 0\r\n                });\r\n            }\r\n            for (var i = 1; i < target.ports.length; i++) {\r\n                var u = target.ports[0].id;\r\n                var v = target.ports[i].id;\r\n                this.passableEdges.push({\r\n                    source: u,\r\n                    target: v,\r\n                    length: 0\r\n                });\r\n            }\r\n\r\n            var getSource = e=> e.source,\r\n                getTarget = e=> e.target,\r\n                getLength = e=> e.length;\r\n\r\n            var shortestPathCalculator = new Calculator(this.verts.length, this.passableEdges, getSource, getTarget, getLength);\r\n            var bendPenalty = (u, v, w) => {\r\n                var a = this.verts[u], b = this.verts[v], c = this.verts[w];\r\n                var dx = Math.abs(c.x - a.x), dy = Math.abs(c.y - a.y);\r\n                // don't count bends from internal node edges\r\n                if (a.node === source && a.node === b.node || b.node === target && b.node === c.node)\r\n                    return 0;\r\n                return dx > 1 && dy > 1 ? 1000 : 0;\r\n            };\r\n\r\n            // get shortest path\r\n            var shortestPath = shortestPathCalculator.PathFromNodeToNodeWithPrevCost(\r\n                source.ports[0].id, target.ports[0].id,\r\n                bendPenalty);\r\n\r\n            // shortest path is reversed and does not include the target port\r\n            var pathPoints = shortestPath.reverse().map(vi => this.verts[vi]);\r\n            pathPoints.push(this.nodes[target.id].ports[0]);\r\n\r\n            // filter out any extra end points that are inside the source or target (i.e. the dummy segments above)\r\n            return pathPoints.filter((v, i) =>\r\n                !(i < pathPoints.length - 1 && pathPoints[i + 1].node === source && v.node === source\r\n                    || i > 0 && v.node === target && pathPoints[i - 1].node === target));\r\n        }\r\n\r\n        static getRoutePath(route: Point[][], cornerradius: number, arrowwidth: number, arrowheight: number): { routepath: string; arrowpath: string } {\r\n            var result = {\r\n                routepath: 'M ' + route[0][0].x + ' ' + route[0][0].y + ' ',\r\n                arrowpath: ''\r\n            };\r\n            if (route.length > 1) {\r\n                for (var i = 0; i < route.length; i++) {\r\n                    var li = route[i];\r\n                    var x = li[1].x, y = li[1].y;\r\n                    var dx = x - li[0].x;\r\n                    var dy = y - li[0].y;\r\n                    if (i < route.length - 1) {\r\n                        if (Math.abs(dx) > 0) {\r\n                            x -= dx / Math.abs(dx) * cornerradius;\r\n                        } else {\r\n                            y -= dy / Math.abs(dy) * cornerradius;\r\n                        }\r\n                        result.routepath += 'L ' + x + ' ' + y + ' ';\r\n                        var l = route[i + 1];\r\n                        var x0 = l[0].x, y0 = l[0].y;\r\n                        var x1 = l[1].x;\r\n                        var y1 = l[1].y;\r\n                        dx = x1 - x0;\r\n                        dy = y1 - y0;\r\n                        var angle = GridRouter.angleBetween2Lines(li, l) < 0 ? 1 : 0;\r\n                        //console.log(cola.GridRouter.angleBetween2Lines(li, l))\r\n                        var x2, y2;\r\n                        if (Math.abs(dx) > 0) {\r\n                            x2 = x0 + dx / Math.abs(dx) * cornerradius;\r\n                            y2 = y0;\r\n                        } else {\r\n                            x2 = x0;\r\n                            y2 = y0 + dy / Math.abs(dy) * cornerradius;\r\n                        }\r\n                        var cx = Math.abs(x2 - x);\r\n                        var cy = Math.abs(y2 - y);\r\n                        result.routepath += 'A ' + cx + ' ' + cy + ' 0 0 ' + angle + ' ' + x2 + ' ' + y2 + ' ';\r\n                    } else {\r\n                        var arrowtip = [x, y];\r\n                        var arrowcorner1, arrowcorner2;\r\n                        if (Math.abs(dx) > 0) {\r\n                            x -= dx / Math.abs(dx) * arrowheight;\r\n                            arrowcorner1 = [x, y + arrowwidth];\r\n                            arrowcorner2 = [x, y - arrowwidth];\r\n                        } else {\r\n                            y -= dy / Math.abs(dy) * arrowheight;\r\n                            arrowcorner1 = [x + arrowwidth, y];\r\n                            arrowcorner2 = [x - arrowwidth, y];\r\n                        }\r\n                        result.routepath += 'L ' + x + ' ' + y + ' ';\r\n                        if (arrowheight > 0) {\r\n                            result.arrowpath = 'M ' + arrowtip[0] + ' ' + arrowtip[1] + ' L ' + arrowcorner1[0] + ' ' + arrowcorner1[1]\r\n                            + ' L ' + arrowcorner2[0] + ' ' + arrowcorner2[1];\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                var li = route[0];\r\n                var x = li[1].x, y = li[1].y;\r\n                var dx = x - li[0].x;\r\n                var dy = y - li[0].y;\r\n                var arrowtip = [x, y];\r\n                var arrowcorner1, arrowcorner2;\r\n                if (Math.abs(dx) > 0) {\r\n                    x -= dx / Math.abs(dx) * arrowheight;\r\n                    arrowcorner1 = [x, y + arrowwidth];\r\n                    arrowcorner2 = [x, y - arrowwidth];\r\n                } else {\r\n                    y -= dy / Math.abs(dy) * arrowheight;\r\n                    arrowcorner1 = [x + arrowwidth, y];\r\n                    arrowcorner2 = [x - arrowwidth, y];\r\n                }\r\n                result.routepath += 'L ' + x + ' ' + y + ' ';\r\n                if (arrowheight > 0) {\r\n                    result.arrowpath = 'M ' + arrowtip[0] + ' ' + arrowtip[1] + ' L ' + arrowcorner1[0] + ' ' + arrowcorner1[1]\r\n                    + ' L ' + arrowcorner2[0] + ' ' + arrowcorner2[1];\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n","export * from './version'\nexport * from './widget'\n","import { DOMWidgetModel, DOMWidgetView, ISerializers } from '@jupyter-widgets/base'\nimport { version, name } from './version'\nimport * as buttonUtils from './buttons'\nimport * as algorithmx from 'algorithmx'\n\nexport class AlgorithmxModel extends DOMWidgetModel {\n  defaults() {\n    return {...super.defaults(),\n      _model_name: 'AlgorithmxModel',\n      _model_module: name,\n      _model_module_version: version,\n      _view_name: 'AlgorithmxView',\n      _view_module: name,\n      _view_module_version: version,\n\n      events: [],\n      show_buttons: false\n    }\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n  }\n}\n\nexport class AlgorithmxView extends DOMWidgetView {\n  private client: algorithmx.Client | null = null\n  private canvas: algorithmx.CanvasSelection | null = null\n  private eventIndex = 0\n\n  private stopped = false\n\n  playEvents(events: ReadonlyArray<string>) {\n    if (this.client === null) return\n    events.forEach(eventStr => {\n      const event = JSON.parse(eventStr) as algorithmx.DispatchEvent\n      this.client!.dispatch(event)\n    })\n  }\n\n  playAllEvents() {\n    const events = this.model.get('events')\n    this.playEvents(events)\n  }\n\n  eventsChanged() {\n    if (this.client === null) return\n\n    const events: ReadonlyArray<string> = this.model.get('events')\n    const newEvents = events.slice(this.eventIndex)\n    this.eventIndex = events.length\n\n    this.playEvents(newEvents)\n  }\n\n  resetCanvas() {\n    if (this.canvas === null) return\n    const immediateCanvas = this.canvas.eventQ(null).duration(0)\n    immediateCanvas.cancelall().startall()\n    immediateCanvas.remove()\n    immediateCanvas.add().size([400, 250]).zoomkey(true)\n    setTimeout(() => { immediateCanvas.svgattr('width', '100%') }, 1)\n  }\n\n  removeCanvas() {\n    this.resetCanvas()\n\n    const element: Element = this.el\n    const canvasDiv = element.querySelector('algorithmx-container')\n    if (canvasDiv !== null) element.removeChild(canvasDiv)\n\n    const buttonDiv = element.querySelector('algorithmx-buttons')\n    if (buttonDiv !== null) element.removeChild(buttonDiv)\n  }\n\n  remove() {\n    this.removeCanvas()\n    super.remove()\n  }\n\n  clickRestart() {\n    if (this.canvas === null) return\n\n    this.resetCanvas()\n    this.playAllEvents()\n    this.stopped = false\n  }\n\n  clickStart () {\n    if (this.canvas === null) return\n    this.canvas.eventQ(null).startall()\n    this.stopped = false\n  }\n\n  clickStop () {\n    if (this.canvas === null) return\n    this.canvas.eventQ(null).stopall()\n    this.stopped = true\n  }\n\n  renderButtons() {\n    const element: Element = this.el\n\n    const buttonDiv = document.createElement('div')\n    buttonDiv.style.height = '40px'\n\n    const buttonPlay = buttonUtils.createButton('pause', () => {\n      if (this.stopped) {\n        buttonUtils.setIcon(buttonPlay, 'pause')\n        this.clickStart()\n      } else {\n        buttonUtils.setIcon(buttonPlay, 'play')\n        this.clickStop()\n      }\n    })\n\n    const buttonRestart = buttonUtils.createButton('repeat', () => {\n      buttonUtils.setIcon(buttonPlay, 'pause')\n      this.clickRestart()\n    })\n\n    buttonDiv.appendChild(buttonPlay)\n    buttonDiv.appendChild(buttonRestart)\n\n    element.appendChild(buttonDiv)\n  }\n\n  render() {\n    this.removeCanvas()\n\n    const canvasDiv = document.createElement('div')\n    canvasDiv.setAttribute('id', 'algorithmx-container')\n\n    this.client = algorithmx.client(canvasDiv)\n\n    this.client.subscribe(event => {\n      const fullEvent = { source: 'algorithmx', data: event }\n      const fullEventStr = JSON.stringify(fullEvent)\n      this.send(fullEventStr)\n    })\n\n    this.canvas = this.client.canvas()\n    this.resetCanvas()\n\n    const element: Element = this.el\n    element.appendChild(canvasDiv)\n\n    const showButtons = this.model.get('show_buttons')\n    if (showButtons) this.renderButtons()\n\n    this.model.on('change:events', this.eventsChanged, this)\n    this.eventsChanged()\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","const BUTTON_COLOR = 'rgb(238, 238, 238)'\nconst HOVER_COLOR = 'rgb(220, 220, 220)'\nconst CLICK_COLOR = 'rgb(200, 200, 200)'\n\nconst SIZE = 28\n\nexport const createButton = (iconName: string, onclick: () => void): HTMLDivElement => {\n  const button = document.createElement('div')\n  createButton\n  button.onclick = onclick\n\n  button.style.width = `${SIZE}px`\n  button.style.height = `${SIZE}px`\n  button.style.backgroundColor = BUTTON_COLOR\n  button.style.display = 'inline-block'\n  button.style.textAlign = 'center'\n  button.style.marginRight = '6px'\n  button.style.cssFloat = 'left'\n\n  button.onmouseover = () => {\n    button.style.backgroundColor = HOVER_COLOR\n    button.style.cursor = 'pointer'\n  }\n  button.onmousedown = () => { button.style.backgroundColor = CLICK_COLOR }\n  button.onmouseup = () => { button.style.backgroundColor = HOVER_COLOR }\n  button.onmouseleave = () => {\n    button.style.backgroundColor = BUTTON_COLOR\n    button.style.cursor = ''\n  }\n\n  const icon = document.createElement('i')\n  icon.setAttribute('class', `fa-${iconName} fa`)\n  icon.style.fontSize = '12px'\n  icon.style.color = 'rgb(50, 50, 50)'\n  icon.style.lineHeight = `${SIZE}px`\n\n  button.appendChild(icon)\n\n  return button\n}\n\nexport const setIcon = (button: Element, iconName: string): void => {\n  const icon = button.querySelector('i')\n  if (icon !== null) icon.setAttribute('class', `fa-${iconName} fa`)\n}\n","import {Layout, EventType, Event} from './layout'\r\n\r\n    export class LayoutAdaptor extends Layout {\r\n\r\n        // dummy functions in case not defined by client\r\n        trigger(e: Event) {};\r\n        kick() {};\r\n        drag() {};\r\n        on(eventType: EventType | string, listener: () => void) : this { return this; };\r\n\r\n        dragstart: (d:any) => void;\r\n        dragStart: (d:any) => void;\r\n        dragend: (d:any) => void;\r\n        dragEnd: (d:any) => void;\r\n\r\n        constructor( options ) {\r\n            super();\r\n\r\n            // take in implementation as defined by client\r\n\r\n            var self = this;\r\n            var o = options;\r\n\r\n            if ( o.trigger ) {\r\n                this.trigger = o.trigger;\r\n            }\r\n\r\n            if ( o.kick ){\r\n                this.kick = o.kick;\r\n            }\r\n\r\n            if ( o.drag ){\r\n                this.drag = o.drag;\r\n            }\r\n\r\n            if ( o.on ){\r\n                this.on = o.on;\r\n            }\r\n\r\n            this.dragstart = this.dragStart = Layout.dragStart;\r\n            this.dragend = this.dragEnd = Layout.dragEnd;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * provides an interface for use with any external graph system (e.g. Cytoscape.js):\r\n     */\r\n    export function adaptor( options ): LayoutAdaptor {\r\n        return new LayoutAdaptor( options );\r\n    }\r\n","import * as d3v3 from './d3v3adaptor'\r\nimport * as d3v4 from './d3v4adaptor'\r\nimport { Layout, EventType, Event } from './layout';\r\n\r\nexport interface D3v3Context { version:string };\r\n\r\nexport interface ID3StyleLayoutAdaptor {\r\n    trigger(e: Event): void;\r\n    kick(): void;\r\n    drag: () => any;\r\n\r\n    on(eventType: EventType | string, listener: () => void): ID3StyleLayoutAdaptor;\r\n}\r\n\r\n\r\n/**\r\n * provides an interface for use with d3:\r\n * Correct way to create way to construct the d3 cola object is to pass the d3 object into the adaptor function, like so:\r\n * \r\n *   `var d3cola = cola.d3adaptor(d3);`\r\n * \r\n * Internally, it will figure out if d3 is version 3 or 4 from the version tag and set up the right event forwarding. Defaults to version 3 if the d3 object is not passed.\r\n * - uses the d3 event system to dispatch layout events such as:\r\n *   o \"start\" (start layout process)\r\n *   o \"tick\" (after each layout iteration)\r\n *   o \"end\" (layout converged and complete).\r\n * - uses the d3 timer to queue layout iterations.\r\n * - sets up d3.behavior.drag to drag nodes\r\n *   o use `node.call(<the returned instance of Layout>.drag)` to make nodes draggable\r\n * returns an instance of the cola.Layout itself with which the user\r\n * can interact directly.\r\n */\r\nexport function d3adaptor(d3Context?: d3v4.D3Context | D3v3Context): Layout & ID3StyleLayoutAdaptor {\r\n    if (!d3Context || isD3V3(d3Context)) {\r\n        return new d3v3.D3StyleLayoutAdaptor();\r\n    }\r\n    return new d3v4.D3StyleLayoutAdaptor(d3Context);\r\n}\r\n\r\nfunction isD3V3(d3Context: d3v4.D3Context | D3v3Context): d3Context is D3v3Context {\r\n    const v3exp = /^3\\./;\r\n    return (<any>d3Context).version && (<any>d3Context).version.match(v3exp) !== null;\r\n}\r\n","////<reference path=\"../extern/d3v3.d.ts\"/>\r\n////commented out the reference, because the path ended up in the typings, which\r\n////makes it impossible import in other projects.\r\ndeclare const d3;\r\n\r\n\r\nimport {Layout, EventType, Event} from './layout';\r\nimport {ID3StyleLayoutAdaptor} from './d3adaptor'\r\n\r\n    export class D3StyleLayoutAdaptor extends Layout implements ID3StyleLayoutAdaptor {\r\n        event = d3.dispatch(EventType[EventType.start], EventType[EventType.tick], EventType[EventType.end]);\r\n\r\n        trigger(e: Event) {\r\n            var d3event = { type: EventType[e.type], alpha: e.alpha, stress: e.stress };\r\n            this.event[d3event.type](d3event); // via d3 dispatcher, e.g. event.start(e);\r\n        }\r\n\r\n        // iterate layout using a d3.timer, which queues calls to tick repeatedly until tick returns true\r\n        kick() {\r\n            d3.timer(() => super.tick());\r\n        }\r\n\r\n        // a function to allow for dragging of nodes\r\n        drag: () => any;\r\n\r\n        constructor() {\r\n            super();\r\n            // bit of trickyness remapping 'this' so we can reference it in the function body.\r\n            var d3layout = this;\r\n            var drag;\r\n            this.drag = function () {\r\n                if (!drag) {\r\n                    var drag = d3.behavior.drag()\r\n                        .origin(Layout.dragOrigin)\r\n                        .on(\"dragstart.d3adaptor\", Layout.dragStart)\r\n                        .on(\"drag.d3adaptor\", d => {\r\n                            Layout.drag(d, <any>d3.event);\r\n                            d3layout.resume(); // restart annealing\r\n                        })\r\n                        .on(\"dragend.d3adaptor\", Layout.dragEnd);\r\n                }\r\n\r\n                if (!arguments.length) return drag;\r\n\r\n                // this is the context of the function, i.e. the d3 selection\r\n                this//.on(\"mouseover.adaptor\", colaMouseover)\r\n                //.on(\"mouseout.adaptor\", colaMouseout)\r\n                    .call(drag);\r\n            }\r\n        }\r\n\r\n        // a function for binding to events on the adapter\r\n        on(eventType: EventType | string, listener: () => void): this {\r\n            if (typeof eventType === 'string') {\r\n                this.event.on(eventType, listener);\r\n            } else {\r\n                this.event.on(EventType[eventType], listener);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * provides an interface for use with d3:\r\n     * - uses the d3 event system to dispatch layout events such as:\r\n     *   o \"start\" (start layout process)\r\n     *   o \"tick\" (after each layout iteration)\r\n     *   o \"end\" (layout converged and complete).\r\n     * - uses the d3 timer to queue layout iterations.\r\n     * - sets up d3.behavior.drag to drag nodes\r\n     *   o use `node.call(<the returned instance of Layout>.drag)` to make nodes draggable\r\n     * returns an instance of the cola.Layout itself with which the user\r\n     * can interact directly.\r\n     */\r\n    export function d3adaptor(): D3StyleLayoutAdaptor {\r\n        return new D3StyleLayoutAdaptor();\r\n    }\r\n","import {dispatch} from 'd3-dispatch'\r\nimport {timer} from 'd3-timer'\r\nimport {drag as d3drag} from 'd3-drag'\r\nimport {Layout, EventType, Event} from './layout'\r\nimport {ID3StyleLayoutAdaptor} from './d3adaptor'\r\n\r\nexport interface D3Context {\r\n    timer: typeof timer; \r\n    drag: typeof d3drag; \r\n    dispatch: typeof dispatch;\r\n    event: any;\r\n}\r\n\r\nexport class D3StyleLayoutAdaptor extends Layout implements ID3StyleLayoutAdaptor {\r\n    event:any;\r\n    trigger(e: Event) {\r\n        var d3event = { type: EventType[e.type], alpha: e.alpha, stress: e.stress };\r\n        // the dispatcher is actually expecting something of type EventTarget as the second argument\r\n        // so passing the thing above is totally abusing the pattern... not sure what to do about this yet\r\n        this.event.call(d3event.type, <any>d3event); // via d3 dispatcher, e.g. event.start(e);\r\n    }\r\n\r\n    // iterate layout using a d3.timer, which queues calls to tick repeatedly until tick returns true\r\n    kick() {\r\n        var t = this.d3Context.timer(() => super.tick() && t.stop());\r\n    }\r\n\r\n    // a function to allow for dragging of nodes\r\n    drag: () => any;\r\n\r\n    constructor(private d3Context: D3Context) {\r\n        super();\r\n        this.event = d3Context.dispatch(EventType[EventType.start], EventType[EventType.tick], EventType[EventType.end]);\r\n\r\n        // bit of trickyness remapping 'this' so we can reference it in the function body.\r\n        var d3layout = this;\r\n        var drag;\r\n        this.drag = function () {\r\n            if (!drag) {\r\n                var drag = d3Context.drag()\r\n                    .subject(Layout.dragOrigin)\r\n                    .on(\"start.d3adaptor\", Layout.dragStart)\r\n                    .on(\"drag.d3adaptor\", d => {\r\n                        Layout.drag(<any>d, d3Context.event);\r\n                        d3layout.resume(); // restart annealing\r\n                    })\r\n                    .on(\"end.d3adaptor\", Layout.dragEnd);\r\n            }\r\n\r\n            if (!arguments.length) return drag;\r\n\r\n            // this is the context of the function, i.e. the d3 selection\r\n            //this//.on(\"mouseover.adaptor\", colaMouseover)\r\n            //.on(\"mouseout.adaptor\", colaMouseout)\r\n            arguments[0].call(drag);\r\n        }\r\n    }\r\n\r\n    // a function for binding to events on the adapter\r\n    on(eventType: EventType | string, listener: () => void): this {\r\n        if (typeof eventType === 'string') {\r\n            this.event.on(eventType, listener);\r\n        } else {\r\n            this.event.on(EventType[eventType], listener);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n","import {Calculator} from './shortestpaths'\r\nimport {Descent} from './descent'\r\nimport {Projection, GraphNode, Rectangle} from './rectangle'\r\nimport {Variable} from './vpsc'\r\nimport {jaccardLinkLengths, LinkLengthAccessor} from './linklengths'\r\n\r\nexport class Link3D {\r\n        length: number;\r\n        constructor(public source: number, public target: number) { }\r\n        actualLength(x: number[][]) {\r\n            return Math.sqrt(\r\n                x.reduce((c: number, v: number[]) => {\r\n                    const dx = v[this.target] - v[this.source];\r\n                    return c + dx * dx;\r\n                }, 0));\r\n        }\r\n    }\r\n    export class Node3D implements GraphNode {\r\n        // if fixed, layout will not move the node from its specified starting position\r\n        fixed: boolean;\r\n        width: number;\r\n        height: number;\r\n        px: number;\r\n        py: number;\r\n        bounds: Rectangle;\r\n        variable: Variable;\r\n        constructor(\r\n            public x: number = 0,\r\n            public y: number = 0,\r\n            public z: number = 0) { }\r\n    }\r\n    export class Layout3D {\r\n        static dims = ['x', 'y', 'z'];\r\n        static k = Layout3D.dims.length;\r\n        result: number[][];\r\n        constraints: any[] = null;\r\n\r\n        constructor(public nodes: Node3D[], public links: Link3D[], public idealLinkLength: number = 1) {\r\n            this.result = new Array(Layout3D.k);\r\n            for (var i = 0; i < Layout3D.k; ++i) {\r\n                this.result[i] = new Array(nodes.length);\r\n            }\r\n            nodes.forEach((v, i) => {\r\n                for (var dim of Layout3D.dims) {\r\n                    if (typeof v[dim] == 'undefined') v[dim] = Math.random();\r\n                }\r\n                this.result[0][i] = v.x;\r\n                this.result[1][i] = v.y;\r\n                this.result[2][i] = v.z;\r\n            });\r\n        };\r\n\r\n        linkLength(l: Link3D): number {\r\n            return l.actualLength(this.result);\r\n        }\r\n\r\n        useJaccardLinkLengths: boolean = true;\r\n\r\n        descent: Descent;\r\n        start(iterations: number = 100): Layout3D {\r\n            const n = this.nodes.length;\r\n\r\n            var linkAccessor = new LinkAccessor();\r\n\r\n            if (this.useJaccardLinkLengths)\r\n                jaccardLinkLengths(this.links, linkAccessor, 1.5);\r\n\r\n            this.links.forEach(e => e.length *= this.idealLinkLength);\r\n\r\n            // Create the distance matrix that Cola needs\r\n            const distanceMatrix = (new Calculator(n, this.links,\r\n                e=> e.source, e=> e.target, e => e.length)).DistanceMatrix();\r\n\r\n            const D = Descent.createSquareMatrix(n, (i, j) => distanceMatrix[i][j]);\r\n\r\n            // G is a square matrix with G[i][j] = 1 iff there exists an edge between node i and node j\r\n            // otherwise 2.\r\n            var G = Descent.createSquareMatrix(n, function () { return 2 });\r\n            this.links.forEach(({ source, target }) => G[source][target] = G[target][source] = 1);\r\n\r\n            this.descent = new Descent(this.result, D);\r\n            this.descent.threshold = 1e-3;\r\n            this.descent.G = G;\r\n            //let constraints = this.links.map(e=> <any>{\r\n            //    axis: 'y', left: e.source, right: e.target, gap: e.length*1.5\r\n            //});\r\n            if (this.constraints)\r\n                this.descent.project = new Projection(<GraphNode[]>this.nodes, null, null, this.constraints).projectFunctions();\r\n\r\n            for (var i = 0; i < this.nodes.length; i++) {\r\n                var v = this.nodes[i];\r\n                if (v.fixed) {\r\n                    this.descent.locks.add(i, [v.x, v.y, v.z]);\r\n                }\r\n            }\r\n\r\n            this.descent.run(iterations);\r\n            return this;\r\n        }\r\n\r\n        tick(): number {\r\n            this.descent.locks.clear();\r\n            for (var i = 0; i < this.nodes.length; i++) {\r\n                var v = this.nodes[i];\r\n                if (v.fixed) {\r\n                    this.descent.locks.add(i, [v.x, v.y, v.z]);\r\n                }\r\n            }\r\n            return this.descent.rungeKutta();\r\n        }\r\n    }\r\n\r\n    class LinkAccessor implements LinkLengthAccessor<any> {\r\n        getSourceIndex(e: any): number { return e.source; }\r\n        getTargetIndex(e: any): number { return e.target; }\r\n        getLength(e: any): number { return e.length; }\r\n        setLength(e: any, l: number) { e.length = l; }\r\n    }\r\n","import {Node, Link, Layout} from './layout'\r\nimport {GridRouter} from './gridrouter'\r\nimport {Point} from './geom'\r\n\r\n/**\r\n * @property nudgeGap spacing between parallel edge segments\r\n * @property margin space around nodes\r\n * @property groupMargin space around groups\r\n */\r\nexport function gridify(pgLayout, nudgeGap: number, margin: number, groupMargin: number) {\r\n    pgLayout.cola.start(0, 0, 0, 10, false);\r\n    let gridrouter = route(pgLayout.cola.nodes(), pgLayout.cola.groups(), margin, groupMargin);\r\n    return gridrouter.routeEdges<any>(pgLayout.powerGraph.powerEdges, nudgeGap, e=> e.source.routerNode.id, e=> e.target.routerNode.id);\r\n}\r\n\r\nfunction route(nodes, groups, margin: number, groupMargin: number) {\r\n    nodes.forEach(d => {\r\n        d.routerNode = <any>{\r\n            name: d.name,\r\n            bounds: d.bounds.inflate(-margin)\r\n        };\r\n    });\r\n    groups.forEach(d => {\r\n        d.routerNode = <any>{\r\n            bounds: d.bounds.inflate(-groupMargin),\r\n            children: (typeof d.groups !== 'undefined' ? d.groups.map(c=> nodes.length + c.id) : [])\r\n                .concat(typeof d.leaves !== 'undefined' ? d.leaves.map(c=> c.index) : [])\r\n        };\r\n    });\r\n    let gridRouterNodes = nodes.concat(groups).map((d, i) => {\r\n        d.routerNode.id = i;\r\n        return d.routerNode;\r\n    });\r\n    return new GridRouter(gridRouterNodes, {\r\n        getChildren: (v: any) => v.children,\r\n        getBounds: v => v.bounds\r\n    }, margin - groupMargin);\r\n}\r\n\r\nexport function powerGraphGridLayout(\r\n    graph: { nodes: Node[], links: Link<Node>[] },\r\n    size: number[],\r\n    grouppadding: number)\r\n{\r\n    // compute power graph\r\n    var powerGraph;\r\n    graph.nodes.forEach((v,i) => (<any>v).index = i);\r\n    new Layout()\r\n        .avoidOverlaps(false)\r\n        .nodes(graph.nodes)\r\n        .links(graph.links)\r\n        .powerGraphGroups(function (d) {\r\n            powerGraph = d;\r\n            powerGraph.groups.forEach(v=> v.padding = grouppadding);\r\n        });\r\n\r\n    // construct a flat graph with dummy nodes for the groups and edges connecting group dummy nodes to their children\r\n    // power edges attached to groups are replaced with edges connected to the corresponding group dummy node\r\n    var n = graph.nodes.length;\r\n    var edges = [];\r\n    var vs = graph.nodes.slice(0);\r\n    vs.forEach((v, i) => (<any>v).index = i);\r\n    powerGraph.groups.forEach(g => {\r\n        var sourceInd = g.index = g.id + n;\r\n        vs.push(g);\r\n        if (typeof g.leaves !== 'undefined')\r\n            g.leaves.forEach(v => edges.push({ source: sourceInd, target: v.index }));\r\n        if (typeof g.groups !== 'undefined')\r\n            g.groups.forEach(gg => edges.push({ source: sourceInd, target: gg.id + n }));\r\n    });\r\n    powerGraph.powerEdges.forEach(e=> {\r\n        edges.push({ source: e.source.index, target: e.target.index });\r\n    });\r\n\r\n    // layout the flat graph with dummy nodes and edges\r\n    new Layout()\r\n        .size(size)\r\n        .nodes(vs)\r\n        .links(edges)\r\n        .avoidOverlaps(false)\r\n        .linkDistance(30)\r\n        .symmetricDiffLinkLengths(5)\r\n        .convergenceThreshold(1e-4)\r\n        .start(100, 0, 0, 0, false);\r\n\r\n    // final layout taking node positions from above as starting positions\r\n    // subject to group containment constraints\r\n    // and then gridifying the layout\r\n    return {\r\n        cola:\r\n            new Layout()\r\n            .convergenceThreshold(1e-3)\r\n            .size(size)\r\n            .avoidOverlaps(true)\r\n            .nodes(graph.nodes)\r\n            .links(graph.links)\r\n        //.flowLayout('y', 30)\r\n            .groupCompactness(1e-4)\r\n            .linkDistance(30)\r\n            .symmetricDiffLinkLengths(5)\r\n            .powerGraphGroups(function (d) {\r\n                powerGraph = d;\r\n                powerGraph.groups.forEach(function (v) {\r\n                    v.padding = grouppadding\r\n                });\r\n            }).start(50, 0, 100, 0, false),\r\n        powerGraph: powerGraph\r\n    };\r\n}\r\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like “__proto__”.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);\n}\n\nfunction selection_cloneDeep() {\n  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","import {event} from \"./selection/on\";\n\nexport default function() {\n  var current = event, source;\n  while (source = current.sourceEvent) current = source;\n  return current;\n}\n","export default function(node, event) {\n  var svg = node.ownerSVGElement || node;\n\n  if (svg.createSVGPoint) {\n    var point = svg.createSVGPoint();\n    point.x = event.clientX, point.y = event.clientY;\n    point = point.matrixTransform(node.getScreenCTM().inverse());\n    return [point.x, point.y];\n  }\n\n  var rect = node.getBoundingClientRect();\n  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node) {\n  var event = sourceEvent();\n  if (event.changedTouches) event = event.changedTouches[0];\n  return point(node, event);\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches, identifier) {\n  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;\n\n  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {\n    if ((touch = touches[i]).identifier === identifier) {\n      return point(node, touch);\n    }\n  }\n\n  return null;\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTING) throw new Error(\"too late; already started\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      // Dispatch the interrupt event.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions. No interrupt event is dispatched\n      // because the cancelled transitions never started. Note that this also\n      // removes this transition from the pending list!\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(null, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    if (active) schedule.on.call(\"interrupt\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: function() {\n    return this.rgb().hex();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: function() {\n    return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\n// https://beta.observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import decompose, {identity} from \"./decompose\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number\";\nimport {parseCss, parseSvg} from \"./parse\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\nexport default function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0 ≅ u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n}\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {get, set} from \"./schedule\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttribute(name);\n    value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value + \"\"));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrTweenNS(fullname, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttributeNS(fullname.space, fullname.local, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttribute(name, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","function styleTween(name, value, priority) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.style.setProperty(name, i(t), priority);\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr\";\nimport transition_attrTween from \"./attrTween\";\nimport transition_delay from \"./delay\";\nimport transition_duration from \"./duration\";\nimport transition_ease from \"./ease\";\nimport transition_filter from \"./filter\";\nimport transition_merge from \"./merge\";\nimport transition_on from \"./on\";\nimport transition_remove from \"./remove\";\nimport transition_select from \"./select\";\nimport transition_selectAll from \"./selectAll\";\nimport transition_selection from \"./selection\";\nimport transition_style from \"./style\";\nimport transition_styleTween from \"./styleTween\";\nimport transition_text from \"./text\";\nimport transition_transition from \"./transition\";\nimport transition_tween from \"./tween\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease\n};\n","export function linear(t) {\n  return +t;\n}\n","export function quadIn(t) {\n  return t * t;\n}\n\nexport function quadOut(t) {\n  return t * (2 - t);\n}\n\nexport function quadInOut(t) {\n  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction styleRemove(name, interpolate) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0 = style(this, name),\n        value1 = (this.style.removeProperty(name), style(this, name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction styleRemoveEnd(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = style(this, name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0 = style(this, name),\n        value1 = value(this);\n    if (value1 == null) value1 = (this.style.removeProperty(name), style(this, name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n          .styleTween(name, styleRemove(name, i))\n          .on(\"end.style.\" + name, styleRemoveEnd(name))\n      : this.styleTween(name, typeof value === \"function\"\n          ? styleFunction(name, i, tweenValue(this, \"style.\" + name, value))\n          : styleConstant(name, i, value + \"\"), priority);\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","export function expIn(t) {\n  return Math.pow(2, 10 * t - 10);\n}\n\nexport function expOut(t) {\n  return 1 - Math.pow(2, -10 * t);\n}\n\nexport function expInOut(t) {\n  return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2;\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","var b1 = 4 / 11,\n    b2 = 6 / 11,\n    b3 = 8 / 11,\n    b4 = 3 / 4,\n    b5 = 9 / 11,\n    b6 = 10 / 11,\n    b7 = 15 / 16,\n    b8 = 21 / 22,\n    b9 = 63 / 64,\n    b0 = 1 / b1 / b1;\n\nexport function bounceIn(t) {\n  return 1 - bounceOut(1 - t);\n}\n\nexport function bounceOut(t) {\n  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\n}\n\nexport function bounceInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\n}\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","import {Transition, newId} from \"../transition/index\";\nimport schedule from \"../transition/schedule\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt\";\nimport selection_transition from \"./transition\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {event} from \"d3-selection\";\n\nexport function nopropagation() {\n  event.stopImmediatePropagation();\n}\n\nexport default function() {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent from \"./noevent\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, true);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, true);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, true);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {\n  this.target = target;\n  this.type = type;\n  this.subject = subject;\n  this.identifier = id;\n  this.active = active;\n  this.x = x;\n  this.y = y;\n  this.dx = dx;\n  this.dy = dy;\n  this._ = dispatch;\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {event, customEvent, select, mouse, touch} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag\";\nimport noevent, {nopropagation} from \"./noevent\";\nimport constant from \"./constant\";\nimport DragEvent from \"./event\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter() {\n  return !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return \"ontouchstart\" in this;\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var gesture = beforestart(\"mouse\", container.apply(this, arguments), mouse, this, arguments);\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation();\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\");\n  }\n\n  function mousemoved() {\n    noevent();\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\");\n  }\n\n  function mouseupped() {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent();\n    gestures.mouse(\"end\");\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.changedTouches,\n        c = container.apply(this, arguments),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(touches[i].identifier, c, touch, this, arguments)) {\n        nopropagation();\n        gesture(\"start\");\n      }\n    }\n  }\n\n  function touchmoved() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent();\n        gesture(\"drag\");\n      }\n    }\n  }\n\n  function touchended() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation();\n        gesture(\"end\");\n      }\n    }\n  }\n\n  function beforestart(id, container, point, that, args) {\n    var p = point(container, id), s, dx, dy,\n        sublisteners = listeners.copy();\n\n    if (!customEvent(new DragEvent(drag, \"beforestart\", s, id, active, p[0], p[1], 0, 0, sublisteners), function() {\n      if ((event.subject = s = subject.apply(that, args)) == null) return false;\n      dx = s.x - p[0] || 0;\n      dy = s.y - p[1] || 0;\n      return true;\n    })) return;\n\n    return function gesture(type) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[id] = gesture, n = active++; break;\n        case \"end\": delete gestures[id], --active; // nobreak\n        case \"drag\": p = point(container, id), n = active; break;\n      }\n      customEvent(new DragEvent(drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00);\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi) {\n          var oc = da0 > epsilon ? intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10],\n              ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport line from \"./line\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import constant from \"./constant\";\nimport descending from \"./descending\";\nimport identity from \"./identity\";\nimport {tau} from \"./math\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","import curveLinear from \"./linear\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial\";\nimport line from \"./line\";\n\nexport function lineRadial(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nexport default function() {\n  return lineRadial(line().curve(curveRadialLinear));\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial\";\nimport area from \"./area\";\nimport {lineRadial} from \"./lineRadial\"\n\nexport default function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n}\n","export default function(x, y) {\n  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];\n}\n","export var slice = Array.prototype.slice;\n","import {path} from \"d3-path\";\nimport {slice} from \"../array\";\nimport constant from \"../constant\";\nimport {x as pointX, y as pointY} from \"../point\";\nimport pointRadial from \"../pointRadial\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nexport function linkVertical() {\n  return link(curveVertical);\n}\n\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","import {pi, tau} from \"../math\";\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n","var tan30 = Math.sqrt(1 / 3),\n    tan30_2 = tan30 * 2;\n\nexport default {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","import {pi, tau} from \"../math\";\n\nvar ka = 0.89081309152928522810,\n    kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10),\n    kx = Math.sin(tau / 10) * kr,\n    ky = -Math.cos(tau / 10) * kr;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var w = Math.sqrt(size),\n        x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","var c = -0.5,\n    s = Math.sqrt(3) / 2,\n    k = 1 / Math.sqrt(12),\n    a = (k / 2 + 1) * 3;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","import {path} from \"d3-path\";\nimport circle from \"./symbol/circle\";\nimport cross from \"./symbol/cross\";\nimport diamond from \"./symbol/diamond\";\nimport star from \"./symbol/star\";\nimport square from \"./symbol/square\";\nimport triangle from \"./symbol/triangle\";\nimport wye from \"./symbol/wye\";\nimport constant from \"./constant\";\n\nexport var symbols = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\nexport default function() {\n  var type = constant(circle),\n      size = constant(64),\n      context = null;\n\n  function symbol() {\n    var buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop\";\nimport {point} from \"./basis\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {point} from \"./basis\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import noop from \"../noop\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import {slice} from \"./array\";\nimport constant from \"./constant\";\nimport offsetNone from \"./offset/none\";\nimport orderNone from \"./order/none\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = yp;\n      }\n    }\n  }\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import ascending from \"./ascending\";\n\nexport default function(series) {\n  return ascending(series).reverse();\n}\n","import none from \"./none\";\nimport {sum} from \"./ascending\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = none(series).sort(function(a, b) { return sums[b] - sums[a]; }),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","import none from \"./none\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function ZoomEvent(target, type, transform) {\n  this.target = target;\n  this.type = type;\n  this.transform = transform;\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  return node.__zoom || identity;\n}\n","import {event} from \"d3-selection\";\n\nexport function nopropagation() {\n  event.stopImmediatePropagation();\n}\n\nexport default function() {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {event, customEvent, select, mouse, touch} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant\";\nimport ZoomEvent from \"./event\";\nimport {Transform, identity} from \"./transform\";\nimport noevent, {nopropagation} from \"./noevent\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter() {\n  return !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this, w, h;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    w = e.width.baseVal.value;\n    h = e.height.baseVal.value;\n  } else {\n    w = e.clientWidth;\n    h = e.clientHeight;\n  }\n  return [[0, 0], [w, h]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta() {\n  return -event.deltaY * (event.deltaMode ? 120 : 1) / 500;\n}\n\nfunction defaultTouchable() {\n  return \"ontouchstart\" in this;\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      gestures = [],\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled)\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n            .start()\n            .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n            .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    });\n  };\n\n  zoom.scaleTo = function(selection, k) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = centroid(e),\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    });\n  };\n\n  zoom.translateBy = function(selection, x, y) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    });\n  };\n\n  zoom.translateTo = function(selection, x, y) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p = centroid(e);\n      return constrain(identity.translate(p[0], p[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    });\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, center) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args),\n              e = extent.apply(that, args),\n              p = center || centroid(e),\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args) {\n    for (var i = 0, n = gestures.length, g; i < n; ++i) {\n      if ((g = gestures[i]).that === that) {\n        return g;\n      }\n    }\n    return new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.index = -1;\n    this.active = 0;\n    this.extent = extent.apply(that, args);\n  }\n\n  Gesture.prototype = {\n    start: function() {\n      if (++this.active === 1) {\n        this.index = gestures.push(this) - 1;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        gestures.splice(this.index, 1);\n        this.index = -1;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      customEvent(new ZoomEvent(zoom, type, this.that.__zoom), listeners.apply, listeners, [type, this.that, this.args]);\n    }\n  };\n\n  function wheeled() {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, arguments),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = mouse(this);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent();\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var g = gesture(this, arguments),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = mouse(this),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation();\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved() {\n      noevent();\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = mouse(g.that), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped() {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent();\n      g.end();\n    }\n  }\n\n  function dblclicked() {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = mouse(this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, arguments), translateExtent);\n\n    noevent();\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0);\n    else select(this).call(zoom.transform, t1);\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, arguments),\n        touches = event.changedTouches,\n        started,\n        n = touches.length, i, t, p;\n\n    nopropagation();\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = touch(this, touches, t.identifier);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true;\n      else if (!g.touch1) g.touch1 = p;\n    }\n\n    // If this is a dbltap, reroute to the (optional) dblclick.zoom handler.\n    if (touchstarting) {\n      touchstarting = clearTimeout(touchstarting);\n      if (!g.touch1) {\n        g.end();\n        p = select(this).on(\"dblclick.zoom\");\n        if (p) p.apply(this, arguments);\n        return;\n      }\n    }\n\n    if (started) {\n      touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved() {\n    var g = gesture(this, arguments),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent();\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = touch(this, touches, t.identifier);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended() {\n    var g = gesture(this, arguments),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation();\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else g.end();\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  return zoom;\n}\n","// https://github.com/algrx/algorithmx v1.1.2 Copyright 2019 Alex Socha\nimport { select, selectAll, event } from 'd3-selection';\nimport { transition } from 'd3-transition';\nimport * as d3 from 'd3-ease';\nimport { dispatch } from 'd3-dispatch';\nimport { timer } from 'd3-timer';\nimport { drag } from 'd3-drag';\nimport * as d3$1 from 'd3-shape';\nimport { line } from 'd3-shape';\nimport { zoom, zoomIdentity } from 'd3-zoom';\nimport { d3adaptor, Layout } from 'webcola';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar EnumDispatchType;\r\n(function (EnumDispatchType) {\r\n    EnumDispatchType[\"update\"] = \"update\";\r\n    EnumDispatchType[\"highlight\"] = \"highlight\";\r\n    EnumDispatchType[\"pause\"] = \"pause\";\r\n    EnumDispatchType[\"start\"] = \"start\";\r\n    EnumDispatchType[\"stop\"] = \"stop\";\r\n    EnumDispatchType[\"cancel\"] = \"cancel\";\r\n    EnumDispatchType[\"broadcast\"] = \"broadcast\";\r\n})(EnumDispatchType || (EnumDispatchType = {}));\r\nvar EnumReceiveType;\r\n(function (EnumReceiveType) {\r\n    EnumReceiveType[\"broadcast\"] = \"broadcast\";\r\n    EnumReceiveType[\"error\"] = \"error\";\r\n    EnumReceiveType[\"click\"] = \"click\";\r\n    EnumReceiveType[\"hover\"] = \"hover\";\r\n})(EnumReceiveType || (EnumReceiveType = {}));\r\nvar EnumErrorType;\r\n(function (EnumErrorType) {\r\n    EnumErrorType[\"attribute\"] = \"attribute\";\r\n    EnumErrorType[\"unknown\"] = \"unknown\";\r\n})(EnumErrorType || (EnumErrorType = {}));\n\nvar mapDict = function (dict, func) {\r\n    /* tslint:disable */\r\n    var newDict = {};\r\n    var keys = Object.keys(dict);\r\n    for (var i = 0; i < keys.length; i++) {\r\n        var k = keys[i];\r\n        newDict[k] = func(k, dict[k], i);\r\n    }\r\n    return newDict;\r\n    /* tslint:enable */\r\n};\r\nvar enumValues = function (enumeration) {\r\n    return Object.keys(enumeration).map(function (k) { return enumeration[k]; });\r\n};\r\nvar isNumStr = function (value) {\r\n    return !isNaN(value) && value !== '';\r\n};\r\nvar isDict = function (value) {\r\n    return typeof value === 'object' && value !== null && !Array.isArray(value);\r\n};\r\nvar isDictEmpty = function (dict) { return Object.keys(dict).length === 0; };\r\nvar filterError = function (value) {\r\n    var error = Array.isArray(value) ? value.find(function (v) { return v instanceof Error; })\r\n        : typeof value === 'object' ? Object.values(value).find(function (v) { return v instanceof Error; })\r\n            : value;\r\n    return error || value;\r\n};\r\nvar filterDict = function (dict, filterFn) {\r\n    return Object.entries(dict).reduce(function (newDict, _a, i) {\r\n        var k = _a[0], v = _a[1];\r\n        var _b;\r\n        return (__assign({}, newDict, (filterFn(k, v, i) ? (_b = {}, _b[k] = v, _b) : {})));\r\n    }, {});\r\n};\r\nvar removeWhitespace = function (s) { return s.replace(/\\s/g, ''); };\r\nvar randomId = function () { return Math.random().toString(36).substr(2, 9); };\n\nfunction build(builder, context) {\r\n    var construct = function (args) { return build(builder, args); };\r\n    var instance = builder(context, function () { return instance; }, construct);\r\n    return instance;\r\n}\r\nfunction inherit(obj, parent) {\r\n    return Object.setPrototypeOf(obj, parent);\r\n}\r\nvar getAttrEntry = function (sel, arg, attr, index) {\r\n    if (typeof attr === 'function') {\r\n        var evalArg = typeof arg === 'function'\r\n            ? (arg(sel.data[index], index))\r\n            : arg;\r\n        return attr(evalArg);\r\n    }\r\n    else\r\n        return attr;\r\n};\r\nvar createParentAttr = function (sel, arg, attr) {\r\n    var _a;\r\n    if (typeof attr === 'function' && sel.data === null) {\r\n        return (function (a) {\r\n            var _a;\r\n            return (_a = {},\r\n                _a[sel.name] = sel.ids.reduce(function (result, id) {\r\n                    var _a;\r\n                    return (__assign({}, result, (_a = {}, _a[id] = attr(a), _a)));\r\n                }, {}),\r\n                _a);\r\n        });\r\n    }\r\n    else {\r\n        return _a = {},\r\n            _a[sel.name] = sel.ids.reduce(function (result, id, i) {\r\n                var _a;\r\n                return (__assign({}, result, (_a = {}, _a[id] = getAttrEntry(sel, arg, attr, i), _a)));\r\n            }, {}),\r\n            _a;\r\n    }\r\n};\r\nvar createFullAttr = function (sel, arg, attr) {\r\n    if (sel.parent === undefined)\r\n        return getAttrEntry(sel, arg, attr, 0);\r\n    else\r\n        return createFullAttr(sel.parent, arg, createParentAttr(sel, arg, attr));\r\n};\r\nvar attrEvent = function (sel, arg, attr) {\r\n    var eventData = {\r\n        attributes: createFullAttr(sel, arg, attr),\r\n        animation: sel.animation\r\n    };\r\n    if (sel.highlight)\r\n        return { type: 'highlight', queue: sel.queue, data: eventData };\r\n    else\r\n        return { type: 'update', queue: sel.queue, data: eventData };\r\n};\r\nvar queueEvent = function (sel, type, queue) {\r\n    var queues = queue === null ? null : [String(queue)];\r\n    return {\r\n        type: type,\r\n        queue: sel.queue,\r\n        data: { queues: queues }\r\n    };\r\n};\r\nvar mergeDictRec = function (a, b) {\r\n    var merged = Object.keys(a).reduce(function (res, k) {\r\n        var _a;\r\n        return (__assign({}, res, (_a = {}, _a[k] = isDict(a[k]) && isDict(b[k]) ? mergeDictRec(a[k], b[k]) : b[k] !== undefined ? b[k] : a[k], _a)));\r\n    }, {});\r\n    return __assign({}, b, merged);\r\n};\r\nvar updateAnimation = function (sel, arg, attr) {\r\n    if ((isDictEmpty(sel.animation) || Object.keys(sel.animation).length === 1 && sel.animation['**'] !== undefined)\r\n        && typeof arg !== 'function')\r\n        // optimization to minimize the amount of transmitted data\r\n        return mergeDictRec(sel.animation, { '**': attr(arg) });\r\n    else {\r\n        var animationAttr = createFullAttr(sel, arg, function (a) { return ({ '**': attr(a) }); });\r\n        return mergeDictRec(sel.animation, animationAttr);\r\n    }\r\n};\n\nvar addListener = function (listeners, id, fn) {\r\n    /* tslint:disable */\r\n    listeners[id] = fn;\r\n    /* tslint:enable */\r\n};\r\nvar triggerListener = function (listeners, id) {\r\n    if (listeners[id] !== undefined)\r\n        listeners[id]();\r\n};\r\nvar defaultContext = function () { return ({\r\n    name: '',\r\n    ids: [],\r\n    listeners: {},\r\n    queue: 'default',\r\n    animation: {},\r\n    highlight: false\r\n}); };\r\nvar builder = function (context, self, construct) { return ({\r\n    visible: function (visible) {\r\n        context.client.dispatch(attrEvent(context, visible, function (d) { return ({ visible: d }); }));\r\n        return self();\r\n    },\r\n    add: function () {\r\n        context.client.dispatch(attrEvent((__assign({}, context, { data: context.ids })), function (id, i) { return i; }, function (i) { return (__assign({ visible: true }, (context.initattr ? context.initattr[i] : {}))); }));\r\n        return self().duration(0);\r\n    },\r\n    remove: function () {\r\n        context.client.dispatch(attrEvent(context, false, function (d) { return null; }));\r\n        return self();\r\n    },\r\n    set: function (attrs) {\r\n        context.client.dispatch(attrEvent(context, attrs, function (d) { return d; }));\r\n        return self();\r\n    },\r\n    eventQ: function (queue) {\r\n        if (queue === void 0) { queue = 'default'; }\r\n        return construct(__assign({}, context, { queue: queue === null ? null : String(queue) }));\r\n    },\r\n    duration: function (seconds) { return construct(__assign({}, context, { animation: updateAnimation(context, seconds, function (d) { return ({ duration: d }); }) })); },\r\n    ease: function (ease) { return construct(__assign({}, context, { animation: updateAnimation(context, ease, function (d) { return ({ ease: d }); }) })); },\r\n    highlight: function (seconds) { return construct(__assign({}, context, { highlight: true, animation: seconds !== undefined ? updateAnimation(context, seconds, function (d) { return ({ linger: d }); }) : context.animation })); },\r\n    data: function (data) { return construct(__assign({}, context, { data: data === null ? null : context.ids.map(function (id, i) {\r\n            return typeof data === 'function' ? data(context.data === null ? null : context.data[i], i)\r\n                : Array.isArray(data) ? data[i]\r\n                    : data;\r\n        }) })); },\r\n    pause: function (seconds) {\r\n        context.client.dispatch({\r\n            type: EnumDispatchType.pause,\r\n            queue: context.queue,\r\n            data: { duration: seconds }\r\n        });\r\n        return self();\r\n    },\r\n    stop: function (queue) {\r\n        if (queue === void 0) { queue = 'default'; }\r\n        context.client.dispatch(queueEvent(context, 'stop', queue));\r\n        return self();\r\n    },\r\n    stopall: function () {\r\n        context.client.dispatch(queueEvent(context, 'stop', null));\r\n        return self();\r\n    },\r\n    start: function (queue) {\r\n        if (queue === void 0) { queue = 'default'; }\r\n        context.client.dispatch(queueEvent(context, 'start', queue));\r\n        return self();\r\n    },\r\n    startall: function () {\r\n        context.client.dispatch(queueEvent(context, 'start', null));\r\n        return self();\r\n    },\r\n    cancel: function (queue) {\r\n        if (queue === void 0) { queue = 'default'; }\r\n        context.client.dispatch(queueEvent(context, 'cancel', queue));\r\n        return self();\r\n    },\r\n    cancelall: function () {\r\n        context.client.dispatch(queueEvent(context, 'cancel', null));\r\n        return self();\r\n    },\r\n    broadcast: function (message) {\r\n        context.client.dispatch({\r\n            type: EnumDispatchType.broadcast,\r\n            queue: context.queue,\r\n            data: { message: \"broadcast-\" + message }\r\n        });\r\n        return self();\r\n    },\r\n    listen: function (message, onReceive) {\r\n        addListener(context.listeners, \"broadcast-\" + message, onReceive);\r\n        return self();\r\n    },\r\n    callback: function (onCallback) {\r\n        var message = \"callback-\" + Math.random().toString(36).substr(2, 9);\r\n        addListener(context.listeners, message, onCallback);\r\n        context.client.dispatch({\r\n            type: EnumDispatchType.broadcast,\r\n            queue: context.queue,\r\n            data: { message: message }\r\n        });\r\n        return self();\r\n    }\r\n}); };\r\nvar svgMixinAttrBuilder = function (context, self) { return ({\r\n    svgattr: function (key, value) {\r\n        context.client.dispatch(attrEvent(context, value, function (d) {\r\n            var _a;\r\n            return ({ svgattr: (_a = {}, _a[key] = d, _a) });\r\n        }));\r\n        return self();\r\n    }\r\n}); };\n\nvar builder$1 = function (context, self, construct) {\r\n    return inherit(__assign({ text: function (text) {\r\n            context.client.dispatch(attrEvent(context, text, function (d) { return ({ text: d }); }));\r\n            return self();\r\n        }, align: function (align) {\r\n            context.client.dispatch(attrEvent(context, align, function (d) { return ({ align: d }); }));\r\n            return self();\r\n        }, pos: function (pos) {\r\n            context.client.dispatch(attrEvent(context, pos, function (d) { return ({ pos: d }); }));\r\n            return self();\r\n        }, radius: function (radius) {\r\n            context.client.dispatch(attrEvent(context, radius, function (d) { return ({ radius: d }); }));\r\n            return self();\r\n        }, angle: function (angle) {\r\n            context.client.dispatch(attrEvent(context, angle, function (d) { return ({ angle: d }); }));\r\n            return self();\r\n        }, rotate: function (rotate) {\r\n            context.client.dispatch(attrEvent(context, rotate, function (d) { return ({ rotate: d }); }));\r\n            return self();\r\n        }, color: function (color) {\r\n            context.client.dispatch(attrEvent(context, color, function (d) { return ({ color: d }); }));\r\n            return self();\r\n        }, font: function (font) {\r\n            context.client.dispatch(attrEvent(context, font, function (d) { return ({ font: d }); }));\r\n            return self();\r\n        }, size: function (size) {\r\n            context.client.dispatch(attrEvent(context, size, function (d) { return ({ size: d }); }));\r\n            return self();\r\n        } }, (svgMixinAttrBuilder(context, self))), builder(context, self, construct));\r\n};\r\nvar labelSelection = function (args) {\r\n    return build(builder$1, __assign({}, args, { name: 'labels' }));\r\n};\n\nvar builder$2 = function (context, self, construct) {\r\n    return inherit(__assign({ label: function (id) {\r\n            if (id === void 0) { id = 'value'; }\r\n            return self().labels([id]);\r\n        }, labels: function (ids) {\r\n            return labelSelection(__assign({}, context, { parent: context, ids: ids.map(function (k) { return String(k); }), data: null, initattr: undefined }));\r\n        }, shape: function (shape) {\r\n            context.client.dispatch(attrEvent(context, shape, function (d) { return ({ shape: d }); }));\r\n            return self();\r\n        }, color: function (color) {\r\n            context.client.dispatch(attrEvent(context, color, function (d) { return ({ color: d }); }));\r\n            return self();\r\n        }, size: function (size) {\r\n            context.client.dispatch(attrEvent(context, size, function (d) { return ({ size: d }); }));\r\n            return self();\r\n        }, pos: function (pos) {\r\n            context.client.dispatch(attrEvent(context, pos, function (d) { return ({ pos: d }); }));\r\n            return self();\r\n        }, fixed: function (fixed) {\r\n            context.client.dispatch(attrEvent(context, fixed, function (d) { return ({ fixed: d }); }));\r\n            return self();\r\n        }, draggable: function (draggable) {\r\n            context.client.dispatch(attrEvent(context, draggable, function (d) { return ({ draggable: d }); }));\r\n            return self();\r\n        }, click: function (onClick) {\r\n            context.client.dispatch(attrEvent(context, true, function (d) { return ({ click: d }); }));\r\n            context.ids.forEach(function (id, i) {\r\n                addListener(context.listeners, \"click-node-\" + id, function () { return onClick(context.data[i], i); });\r\n            });\r\n            return self();\r\n        }, hoverin: function (onHoverin) {\r\n            context.client.dispatch(attrEvent(context, true, function (d) { return ({ hover: d }); }));\r\n            context.ids.forEach(function (id, i) {\r\n                addListener(context.listeners, \"hoverin-node-\" + id, function () { return onHoverin(context.data[i], i); });\r\n            });\r\n            return self();\r\n        }, hoverout: function (onHoverout) {\r\n            context.client.dispatch(attrEvent(context, true, function (d) { return ({ hover: d }); }));\r\n            context.ids.forEach(function (id, i) {\r\n                addListener(context.listeners, \"hoverout-node-\" + id, function () { return onHoverout(context.data[i], i); });\r\n            });\r\n            return self();\r\n        } }, (svgMixinAttrBuilder(context, self))), builder(context, self, construct));\r\n};\r\nvar nodeSelection = function (args) {\r\n    return build(builder$2, __assign({}, args, { name: 'nodes' }));\r\n};\n\nvar builder$3 = function (context, self, construct) {\r\n    return inherit(__assign({ traverse: function (source) {\r\n            if (source === void 0) { source = function (e, i) { return context.initattr[i].source; }; }\r\n            return construct(__assign({}, context, { animation: updateAnimation(context, source, function (d) {\r\n                    return ({ type: 'traverse', data: { source: String(d) } });\r\n                }) }));\r\n        }, label: function (id) {\r\n            if (id === void 0) { id = 'weight'; }\r\n            return self().labels([id]);\r\n        }, labels: function (ids) {\r\n            return labelSelection(__assign({}, context, { parent: context, ids: ids.map(function (k) { return String(k); }), data: null, initattr: undefined }));\r\n        }, directed: function (directed) {\r\n            context.client.dispatch(attrEvent(context, directed, function (d) { return ({ directed: d }); }));\r\n            return self();\r\n        }, length: function (length) {\r\n            context.client.dispatch(attrEvent(context, length, function (d) { return ({ length: d }); }));\r\n            return self();\r\n        }, thickness: function (thickness) {\r\n            context.client.dispatch(attrEvent(context, thickness, function (d) { return ({ thickness: d }); }));\r\n            return self();\r\n        }, color: function (color) {\r\n            context.client.dispatch(attrEvent(context, color, function (d) { return ({ color: d }); }));\r\n            return self();\r\n        }, flip: function (flip) {\r\n            context.client.dispatch(attrEvent(context, flip, function (d) { return ({ flip: d }); }));\r\n            return self();\r\n        }, curve: function (curve) {\r\n            context.client.dispatch(attrEvent(context, curve, function (d) { return ({ curve: d }); }));\r\n            return self();\r\n        }, path: function (path) {\r\n            context.client.dispatch(attrEvent(context, path, function (d) { return ({ path: d }); }));\r\n            return self();\r\n        } }, (svgMixinAttrBuilder(context, self))), builder(context, self, construct));\r\n};\r\nvar edgeSelection = function (args) {\r\n    return build(builder$3, __assign({}, args, { name: 'edges' }));\r\n};\n\nvar receiveHandler = function (event$$1, listeners) {\r\n    if (event$$1.type === EnumReceiveType.broadcast)\r\n        triggerListener(listeners, event$$1.data.message);\r\n    else if (event$$1.type === EnumReceiveType.click)\r\n        triggerListener(listeners, \"click-node-\" + event$$1.data.id);\r\n    else if (event$$1.type === EnumReceiveType.hover)\r\n        triggerListener(listeners, (event$$1.data.entered ? 'hoverin' : 'hoverout') + \"-node-\" + event$$1.data.id);\r\n    else if (event$$1.type === EnumReceiveType.error)\r\n        /* tslint:disable */\r\n        console.error(event$$1.data.message);\r\n    /* tslint:enable */\r\n};\r\nvar builder$4 = function (context, self, construct) {\r\n    return inherit(__assign({ node: function (id) {\r\n            return self().nodes([id]);\r\n        }, nodes: function (ids) {\r\n            return nodeSelection(__assign({}, context, { parent: context, ids: ids.map(function (k) { return String(k); }), data: ids.slice(), initattr: undefined }));\r\n        }, edge: function (edge) {\r\n            return self().edges([edge]);\r\n        }, edges: function (edges) {\r\n            var ids = edges.map(function (_a) {\r\n                var source = _a[0], target = _a[1], edgeId = _a[2];\r\n                var orderedNodes = [String(source), String(target)].sort();\r\n                return orderedNodes[0] + \"-\" + orderedNodes[1] + (edgeId !== undefined ? '-' + String(edgeId) : '');\r\n            });\r\n            var initAttr = edges.map(function (_a) {\r\n                var source = _a[0], target = _a[1];\r\n                return ({ source: String(source), target: String(target) });\r\n            });\r\n            return edgeSelection(__assign({}, context, { parent: context, ids: ids, data: edges.slice(), initattr: initAttr }));\r\n        }, label: function (id) {\r\n            if (id === void 0) { id = 'title'; }\r\n            return self().labels([id]);\r\n        }, labels: function (ids) {\r\n            return labelSelection(__assign({}, context, { parent: context, ids: ids.map(function (k) { return String(k); }), data: null, initattr: undefined }));\r\n        }, size: function (size) {\r\n            context.client.dispatch(attrEvent(context, size, function (d) { return ({ size: d }); }));\r\n            return self();\r\n        }, edgelengths: function (lengthInfo) {\r\n            context.client.dispatch(attrEvent(context, lengthInfo, function (d) { return ({ edgelengths: d }); }));\r\n            return self();\r\n        }, pan: function (location) {\r\n            context.client.dispatch(attrEvent(context, location, function (d) { return ({ pan: d }); }));\r\n            return self();\r\n        }, zoom: function (zoom$$1) {\r\n            context.client.dispatch(attrEvent(context, zoom$$1, function (d) { return ({ zoom: d }); }));\r\n            return self();\r\n        }, panlimit: function (box) {\r\n            context.client.dispatch(attrEvent(context, box, function (d) { return ({ panlimit: d }); }));\r\n            return self();\r\n        }, zoomlimit: function (limit) {\r\n            context.client.dispatch(attrEvent(context, limit, function (d) { return ({ zoomlimit: d }); }));\r\n            return self();\r\n        }, zoomkey: function (required) {\r\n            context.client.dispatch(attrEvent(context, required, function (d) { return ({ zoomkey: d }); }));\r\n            return self();\r\n        } }, (svgMixinAttrBuilder(context, self))), builder(context, self, construct));\r\n};\r\nvar canvasSelection = function (id, handler) {\r\n    var context = __assign({}, defaultContext(), { client: handler, name: 'canvas', ids: [String(id)], data: [id] });\r\n    handler.subscribe(function (event$$1) { return receiveHandler(event$$1, context.listeners); });\r\n    return build(builder$4, context);\r\n};\n\nvar initQueue = function (state) {\r\n    return {\r\n        events: [],\r\n        busy: false,\r\n        stopped: state.stopped\r\n    };\r\n};\r\nvar init = function (callback) {\r\n    return {\r\n        callback: callback,\r\n        queues: {},\r\n        stopped: false\r\n    };\r\n};\r\nvar getQueueState = function (state, queue) {\r\n    return state.queues.hasOwnProperty(queue) ? state.queues[queue] : initQueue(state);\r\n};\r\nvar updateQueue = function (state, queue, options) {\r\n    var _a;\r\n    return __assign({}, state, { queues: __assign({}, state.queues, (_a = {}, _a[queue] = __assign({}, getQueueState(state, queue), options), _a)) });\r\n};\r\nvar modifyMultipleQueues = function (state, queues, stateFn, taskFn) {\r\n    return queues.reduce(function (resultTask, q) {\r\n        var newState = stateFn(resultTask.state, q);\r\n        var task = taskFn(newState, q);\r\n        return { state: task.state, execute: function () { task.execute(); resultTask.execute(); } };\r\n    }, { state: state, execute: function () { } });\r\n};\r\nvar start = function (state, queues) {\r\n    var newState = queues === null ? __assign({}, state, { stopped: false }) : state;\r\n    var allQueues = queues === null ? Object.keys(state.queues) : queues;\r\n    return modifyMultipleQueues(newState, allQueues, function (s, q) { return updateQueue(s, q, { stopped: false }); }, function (s, q) { return executeNext(s, q); });\r\n};\r\nvar stop = function (state, queues) {\r\n    var newState = queues === null ? __assign({}, state, { stopped: true }) : state;\r\n    var allQueues = queues === null ? Object.keys(state.queues) : queues;\r\n    var finalState = allQueues.reduce(function (resultState, queue) {\r\n        return updateQueue(resultState, queue, { stopped: true });\r\n    }, newState);\r\n    return { state: finalState, execute: function () { } };\r\n};\r\nvar cancel = function (state, queues) {\r\n    var newState = queues === null ? __assign({}, state, { queues: {} }) : state;\r\n    var allQueues = queues === null ? Object.keys(state.queues) : queues;\r\n    var finalState = allQueues.reduce(function (resultState, queue) {\r\n        return updateQueue(resultState, queue, { events: [], busy: false });\r\n    }, newState);\r\n    return { state: finalState, execute: function () { } };\r\n};\r\nvar schedule = function (state, queue, event$$1) {\r\n    if (queue === null) {\r\n        // execute the event immediately if no queue is specified\r\n        return {\r\n            state: state,\r\n            execute: function () { return state.callback(event$$1, queue); }\r\n        };\r\n    }\r\n    else {\r\n        var queueState = getQueueState(state, queue);\r\n        var newState = updateQueue(state, queue, { events: queueState.events.concat([event$$1]) });\r\n        // only trigger event execution if the queue was previously empty\r\n        if (queueState.events.length === 0)\r\n            return executeNext(newState, queue);\r\n        else\r\n            return { state: newState, execute: function () { } };\r\n    }\r\n};\r\nvar executeNext = function (state, queue, force) {\r\n    if (force === void 0) { force = false; }\r\n    var queueState = getQueueState(state, queue);\r\n    if (queue === null || (!force && queueState.busy)) {\r\n        // if the queue is busy, only execute the next event when forced\r\n        return {\r\n            state: state,\r\n            execute: function () { }\r\n        };\r\n    }\r\n    else if (queueState.stopped || queueState.events.length === 0) {\r\n        // either the queue is stopped or all events have finished, and so it is no longer busy\r\n        return {\r\n            state: updateQueue(state, queue, { busy: false }),\r\n            execute: function () { }\r\n        };\r\n    }\r\n    else if (queue === null || (!force && queueState.busy)) {\r\n        // if the queue is busy, only execute the next event when forced\r\n        return {\r\n            state: state,\r\n            execute: function () { }\r\n        };\r\n    }\r\n    else {\r\n        // get the next event in the queue, delay it if it is a pause event, otherwise execute it immediately\r\n        var event_1 = queueState.events[0];\r\n        var executeFunc = function () {\r\n            if (event_1.type === EnumDispatchType.pause) {\r\n                var delay = event_1.data.duration * 1000;\r\n                setTimeout(function () { return state.callback(event_1, queue); }, delay);\r\n            }\r\n            else\r\n                state.callback(event_1, queue);\r\n        };\r\n        // pop the next event, set it as the current event, and make the queue busy\r\n        return {\r\n            state: updateQueue(state, queue, { events: queueState.events.slice(1), busy: true, current: event_1 }),\r\n            execute: executeFunc\r\n        };\r\n    }\r\n};\r\nvar isQueueUpdateEvent = function (event$$1) {\r\n    return event$$1.type === EnumDispatchType.start || event$$1.type === EnumDispatchType.stop\r\n        || event$$1.type === EnumDispatchType.cancel;\r\n};\r\nvar executeQueueUpdate = function (state, event$$1) {\r\n    if (event$$1.type === EnumDispatchType.start)\r\n        return start(state, event$$1.data.queues);\r\n    else if (event$$1.type === EnumDispatchType.stop)\r\n        return stop(state, event$$1.data.queues);\r\n    else\r\n        return cancel(state, event$$1.data.queues);\r\n};\r\nvar execute = function (state, queue, event$$1, callback) {\r\n    // check if the event is valid\r\n    if (queue === null || getQueueState(state, queue).current === event$$1) {\r\n        if (isQueueUpdateEvent(event$$1)) {\r\n            // process start, stop and cancel\r\n            var queueTask_1 = executeQueueUpdate(state, event$$1);\r\n            // force-trigger the next event\r\n            var nextTask_1 = executeNext(queueTask_1.state, queue, true);\r\n            return {\r\n                state: nextTask_1.state,\r\n                execute: function () { queueTask_1.execute(); nextTask_1.execute(); }\r\n            };\r\n        }\r\n        else {\r\n            // force-trigger the next event\r\n            var nextTask_2 = executeNext(state, queue, true);\r\n            return {\r\n                state: nextTask_2.state,\r\n                execute: function () { callback(event$$1); nextTask_2.execute(); }\r\n            };\r\n        }\r\n    }\r\n    else\r\n        return { state: state, execute: function () { } };\r\n};\n\n\n\nvar d3$2 = /*#__PURE__*/Object.freeze({\n    select: select,\n    selectAll: selectAll,\n    event: event,\n    transition: transition,\n    ease: d3,\n    dispatch: dispatch,\n    timer: timer,\n    drag: drag,\n    shape: d3$1,\n    zoom: zoom,\n    zoomIdentity: zoomIdentity\n});\n\nvar isTransition = function (sel) {\r\n    return sel.duration !== undefined;\r\n};\r\nvar COLORS = {\r\n    navy: '#00229e',\r\n    blue: '#2957c4',\r\n    aqua: '#19c3d6',\r\n    teal: '#05827d',\r\n    olive: '#006333',\r\n    green: '#05914d',\r\n    lime: '#12bc6b',\r\n    yellow: '#cc9918',\r\n    orange: '#dd7d0f',\r\n    red: '#af1c1c',\r\n    pink: '#d14db0',\r\n    fuchsia: '#bc2990',\r\n    purple: '#a31578',\r\n    maroon: '#7c0606',\r\n    white: '#ffffff',\r\n    lightgray: '#b5b5b5',\r\n    lightgrey: '#b5b5b5',\r\n    gray: '#969696',\r\n    grey: '#969696',\r\n    darkgray: '#323232',\r\n    darkgrey: '#323232',\r\n    black: '#111111'\r\n};\r\nvar parseColor = function (color) {\r\n    var parsedColor = dashToUpperCamel(color.trim()).toLowerCase();\r\n    if (Object.keys(COLORS).includes(parsedColor))\r\n        return COLORS[parsedColor];\r\n    else\r\n        return color;\r\n};\r\nvar renderId = function (id) {\r\n    /* tslint:disable */\r\n    var hash = id.split('').reduce(function (h, c) {\r\n        var newHash = ((h << 5) - h) + c.charCodeAt(0);\r\n        return newHash & newHash;\r\n    }, 0);\r\n    return (hash >>> 0).toString(16);\r\n    /* tslint:enable */\r\n};\r\nvar selectOrAdd = function (selection, selector, addFn) {\r\n    var selected = selection.select(selector);\r\n    if (selected.empty())\r\n        return addFn(selection);\r\n    else\r\n        return selected;\r\n};\r\nvar dashToUpperCamel = function (str) {\r\n    return str.split('-').map(function (s) { return s.charAt(0).toUpperCase() + s.substr(1); }).join('');\r\n};\r\nvar easeFn = function (name) {\r\n    // e.g. convert 'linear' to 'easeLinear'\r\n    return d3['ease' + dashToUpperCamel(name)];\r\n};\r\nvar isSafari = function () {\r\n    return navigator && navigator.userAgent !== undefined\r\n        && /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n};\r\nvar isInBrowser = function () {\r\n    return typeof window !== undefined;\r\n};\n\nvar selectCanvasContainer = function (canvas) {\r\n    return typeof canvas === 'string' ? select(\"#\" + canvas) : select(canvas);\r\n};\r\nvar selectCanvas = function (canvas) {\r\n    var container = selectCanvasContainer(canvas);\r\n    return selectOrAdd(container, '.algorithmx', function (s) { return s.append('svg').classed('algorithmx', true); });\r\n};\r\nvar selectCanvasInner = function (sel) {\r\n    return selectOrAdd(sel, 'g', function (s) { return s.append('g'); });\r\n};\r\nvar selectSafariFix = function (sel) {\r\n    return selectOrAdd(sel, 'rect', function (s) { return s.append('rect').classed('safari-fix', true)\r\n        .attr('width', '100%').attr('height', '100%').attr('fill', 'none'); });\r\n};\r\nvar selectNodeGroup = function (sel) {\r\n    return selectOrAdd(sel, '.nodes', function (s) { return s.append('g').classed('nodes', true); });\r\n};\r\nvar selectEdgeGroup = function (sel) {\r\n    return selectOrAdd(sel, '.edges', function (s) { return s.append('g').classed('edges', true); });\r\n};\r\nvar selectLabelGroup = function (sel) {\r\n    return selectOrAdd(sel, '.labels', function (s) { return s.append('g').classed('labels', true); });\r\n};\r\nvar selectNode = function (sel, id) {\r\n    var renderId$$1 = renderId(id);\r\n    return selectOrAdd(sel, \"#node-\" + renderId$$1, function (s) { return s.append('g').attr('id', \"node-\" + renderId$$1); });\r\n};\r\nvar selectEdge = function (sel, id) {\r\n    var renderId$$1 = renderId(id);\r\n    return selectOrAdd(sel, \"#edge-\" + renderId$$1, function (s) { return s.append('g').attr('id', \"edge-\" + renderId$$1); });\r\n};\r\nvar selectLabel = function (sel, id) {\r\n    var renderId$$1 = renderId(id);\r\n    return selectOrAdd(sel, \"#label-\" + renderId$$1, function (s) { return s.append('g').attr('id', \"label-\" + renderId$$1); });\r\n};\r\nvar getCanvasSize = function (canvas) {\r\n    var svgBase = selectCanvasContainer(canvas);\r\n    var size = [\r\n        svgBase.node().getBoundingClientRect().width,\r\n        svgBase.node().getBoundingClientRect().height\r\n    ];\r\n    if (size[0] !== 0 && size[1] !== 0)\r\n        return size;\r\n    else\r\n        return [100, 100];\r\n};\n\nvar flatten = function (renderData) {\r\n    var mapped = mapDict(renderData.attr, function (k) { return getEntry(renderData, k); });\r\n    return combine(mapped);\r\n};\r\nvar combine = function (renderDict) {\r\n    var hasHighlight = !isDictEmpty(filterDict(renderDict, function (k, v) { return v.highlight !== undefined; }));\r\n    var highlight = !hasHighlight ? undefined : mapDict(renderDict, function (k, v) {\r\n        return v.highlight !== undefined ? v.highlight : v.attr;\r\n    });\r\n    var changesDict = filterDict(mapDict(renderDict, function (k, v) { return v.changes; }), function (k, v) { return v !== undefined; });\r\n    var changes = isDictEmpty(changesDict) ? undefined : changesDict;\r\n    var animation = Object.entries(renderDict).reduce(// result = [animation, lockedIn]\r\n    function (result, _a, i) {\r\n        var k = _a[0], renderData = _a[1];\r\n        if (result[1] === false && renderData.changes !== undefined && renderData.animation !== undefined)\r\n            return [renderData.animation, true];\r\n        else if (result[0] === undefined && renderData.animation !== undefined)\r\n            return [renderData.animation, false];\r\n        else\r\n            return result;\r\n    }, [undefined, false])[0];\r\n    var attr = mapDict(renderDict, function (k, v) { return v.attr; });\r\n    return {\r\n        name: Object.keys(renderDict).reduce(function (result, k, i) { return result + (i === 0 ? '' : '-') + k; }),\r\n        attr: attr,\r\n        changes: changes,\r\n        animation: animation,\r\n        highlight: highlight\r\n    };\r\n};\r\nvar getEntry = function (renderData, key) {\r\n    return {\r\n        name: key,\r\n        attr: renderData.attr[key],\r\n        animation: (renderData.animation || {})[key],\r\n        changes: (renderData.changes || {})[key],\r\n        highlight: (renderData.highlight || {})[key]\r\n    };\r\n};\r\nvar hasChanged = function (renderAttr) {\r\n    return renderAttr.changes !== undefined || renderAttr.highlight !== undefined;\r\n};\r\nvar markForUpdate = function (renderAttr) {\r\n    return markKeysForUpdate(renderAttr, Object.keys(renderAttr.attr));\r\n};\r\nvar markKeysForUpdate = function (renderAttr, keys) {\r\n    var newChanges = keys.reduce(function (result, k) {\r\n        var _a;\r\n        return (__assign({}, result, (_a = {}, _a[k] = renderAttr.attr[k], _a)));\r\n    }, {});\r\n    return __assign({}, renderAttr, { changes: __assign({}, renderAttr.changes || {}, newChanges) });\r\n};\n\nvar canAnimate = function () {\r\n    // only browsers support animations\r\n    return isInBrowser();\r\n};\r\nvar transition$1 = function (selection, name, callback) {\r\n    if (!canAnimate())\r\n        return selection;\r\n    else\r\n        return callback(selection.transition(name));\r\n};\r\nvar newTransition = function (selection, callback) {\r\n    if (!canAnimate())\r\n        return selection;\r\n    else\r\n        return callback(selection.transition());\r\n};\r\nvar parseTime = function (time) {\r\n    return time * 1000;\r\n};\r\nvar isAnimationImmediate = function (animation) {\r\n    return animation === undefined || animation.duration === 0;\r\n};\r\nvar transAnimate = function (trans, animation) {\r\n    if (isAnimationImmediate(animation))\r\n        return trans.duration(0);\r\n    else\r\n        return trans.duration(parseTime(animation.duration)).ease(easeFn(animation.ease));\r\n};\r\nvar animate = function (selection, name, animation) {\r\n    if (isAnimationImmediate(animation)) {\r\n        selection.interrupt(name); // cancel previous transition\r\n        return selection;\r\n    }\r\n    else {\r\n        return transition$1(selection, name, function (t) { return transAnimate(t, animation); });\r\n    }\r\n};\r\nvar onChanged = function (selection, renderData, callback) {\r\n    if (hasChanged(renderData))\r\n        callback(selection, renderData);\r\n};\r\nvar render = function (selection, renderData, renderFn) {\r\n    if (renderData.highlight !== undefined)\r\n        return renderHighlight(selection, renderData, renderFn, renderFn);\r\n    else\r\n        return renderNoHighlight(selection, renderData, renderFn);\r\n};\r\nvar renderNoHighlight = function (selection, renderData, renderFn) {\r\n    if (renderData.changes !== undefined) {\r\n        return renderFn(animate(selection, renderData.name, renderData.animation), renderData.attr);\r\n    }\r\n    else\r\n        return selection;\r\n};\r\nvar renderHighlight = function (selection, renderData, renderStartFn, renderEndFn) {\r\n    var initTrans = renderStartFn(animate(selection, renderData.name, renderData.animation), renderData.highlight);\r\n    var linger = renderData.animation ? parseTime(renderData.animation.linger) : 0;\r\n    var newTrans = newTransition(initTrans, function (t) { return transAnimate(t.delay(linger), renderData.animation); });\r\n    return renderEndFn(newTrans, renderData.attr);\r\n};\r\nvar renderLookup = function (renderData, renderFn) {\r\n    Object.entries(renderData.attr).forEach(function (_a) {\r\n        var k = _a[0], v = _a[1];\r\n        var entry = getEntry(renderData, k);\r\n        if (v !== null && hasChanged(entry))\r\n            renderFn(k, entry);\r\n    });\r\n};\r\nvar renderLookupRemovals = function (renderData, renderFn) {\r\n    Object.entries(renderData.changes || {}).forEach(function (_a) {\r\n        var k = _a[0], v = _a[1];\r\n        var entry = getEntry(renderData, k);\r\n        if (v === null)\r\n            renderFn(k, entry);\r\n    });\r\n};\n\nvar MARKER_SIZE = 10;\r\nvar MARKER_ARROW = {\r\n    path: 'M 0,0 m -5,-5 L 5,0 L -5,5 Z',\r\n    viewBox: '-5 -5 10 10',\r\n    size: MARKER_SIZE\r\n};\r\nvar getFullId = function (edgeSel, markerId) {\r\n    var markerSel = edgeSel.select('defs').select(\".marker-\" + markerId);\r\n    if (!markerSel.empty()) {\r\n        return markerSel.attr('id');\r\n    }\r\n    else {\r\n        return \"marker-\" + randomId();\r\n    }\r\n};\r\nvar select$1 = function (edgeSel, markerId) {\r\n    var defsSel = selectOrAdd(edgeSel, 'defs', function (s) { return s.insert('svg:defs', ':first-child'); });\r\n    var fullId = getFullId(edgeSel, markerId);\r\n    return selectOrAdd(defsSel, \"#\" + fullId, function (s) {\r\n        var marker = s.append('svg:marker').attr('id', fullId).classed(\"marker-\" + markerId, true);\r\n        marker.append('path');\r\n        return marker;\r\n    });\r\n};\r\nvar render$1 = function (selection, renderData) {\r\n    render(selection, getEntry(renderData, 'directed'), function (sel, directed) {\r\n        if (directed) {\r\n            var marketTarget = select$1(selection, 'target');\r\n            var shape = MARKER_ARROW;\r\n            marketTarget.attr('viewBox', shape.viewBox)\r\n                .attr('markerWidth', shape.size).attr('markerHeight', shape.size)\r\n                .attr('markerUnits', 'userSpaceOnUse')\r\n                .attr('orient', 'auto').attr('refX', 0).attr('refY', 0);\r\n            marketTarget.select('path')\r\n                .attr('d', shape.path)\r\n                .attr('fill', parseColor(renderData.attr.color));\r\n            return sel;\r\n        }\r\n        else {\r\n            selection.select('defs').remove();\r\n            return sel;\r\n        }\r\n    });\r\n};\n\nvar renderVisibleLookup = function (renderData, renderFn) {\r\n    return renderLookup(renderData, function (k, data) {\r\n        if (data.attr.visible)\r\n            renderFn(k, data);\r\n    });\r\n};\r\nvar renderSvgAttr = function (selection, key, valueFn, attr) {\r\n    return render(selection, attr, function (s, a) {\r\n        return s.attr(key, valueFn(a));\r\n    });\r\n};\r\nvar renderSvgAttrMixin = function (selection, renderData) {\r\n    var precessKey = function (sel, key) { return [\r\n        key.includes('@') ? sel.selectAll(key.split('@')[1]) : sel,\r\n        key.includes('@') ? key.split('@')[0] : key\r\n    ]; };\r\n    renderLookup(getEntry(renderData, 'svgattr'), function (_, d) {\r\n        var _a = precessKey(selection, d.name), s = _a[0], k = _a[1];\r\n        renderSvgAttr(s, k, function (v) { return v; }, d);\r\n    });\r\n    renderLookupRemovals(getEntry(renderData, 'svgattr'), function (_, d) {\r\n        var _a = precessKey(selection, d.name), s = _a[0], k = _a[1];\r\n        renderSvgAttr(s, k, function (v) { return null; }, d);\r\n    });\r\n};\r\nvar animateAdd = function (selection, animation) {\r\n    selection.attr('opacity', '0');\r\n    var transition$$1 = animate(selection, 'visible-fade', animation).attr('opacity', '1');\r\n    newTransition(transition$$1, function (t) { return t; }).attr('opacity', null);\r\n};\r\nvar animateRemove = function (selection, animation) {\r\n    selection.attr('opacity', '1');\r\n    animate(selection, 'visible-fade', animation).attr('opacity', '0');\r\n};\r\nvar renderVisible = function (selection, renderData) {\r\n    onChanged(selection, renderData, function (sel, visible) {\r\n        if (!isAnimationImmediate(visible.animation)) {\r\n            if (visible.attr === true)\r\n                animateAdd(sel, visible.animation);\r\n            else\r\n                animateRemove(sel, visible.animation);\r\n        }\r\n    });\r\n};\r\nvar renderRemove = function (selection, renderData) {\r\n    onChanged(selection, renderData, function (sel, visible) {\r\n        if (visible.attr === false) {\r\n            if (isAnimationImmediate(visible.animation))\r\n                sel.remove();\r\n            else\r\n                transition$1(sel, 'remove', function (t) { return t.delay(parseTime(visible.animation.duration)); }).remove();\r\n        }\r\n    });\r\n};\r\nvar preprocess = function (renderData) {\r\n    var visibleData = getEntry(renderData, 'visible');\r\n    return hasChanged(visibleData) && visibleData.attr === true\r\n        ? markForUpdate(renderData) : renderData;\r\n};\r\nvar renderElementRemove = function (selection, renderData) {\r\n    var newVisible = { attr: { visible: false }, changes: { visible: false } };\r\n    var visibleData = getEntry(__assign({}, renderData, newVisible), 'visible');\r\n    renderVisible(selection, visibleData);\r\n    renderRemove(selection, visibleData);\r\n};\r\nvar renderElement = function (selector, renderData, renderFn) {\r\n    var renderDataFull = preprocess(renderData);\r\n    var visibleData = getEntry(renderData, 'visible');\r\n    if (hasChanged(visibleData) && visibleData.attr === true)\r\n        selector().remove();\r\n    var selection = selector();\r\n    renderFn(selection, renderDataFull);\r\n    renderVisible(selection, visibleData);\r\n    renderRemove(selection, visibleData);\r\n};\r\nvar renderElementLookup = function (selector, renderData, renderFn) {\r\n    renderLookup(renderData, function (k, data) {\r\n        return renderElement(function () { return selector(k); }, data, renderFn);\r\n    });\r\n    renderLookupRemovals(renderData, function (k, data) {\r\n        return renderElementRemove(selector(k), data);\r\n    });\r\n};\n\nvar selectOverlay = function (edgeSel, renderData) {\r\n    edgeSel.select('.edge-path-overlay').remove();\r\n    var overlay = edgeSel.append('path').classed('edge-path-overlay', true)\r\n        .attr('fill', 'none').attr('stroke-linecap', 'butt');\r\n    if (renderData.attr.directed)\r\n        overlay.attr('marker-end', \"url(#\" + getFullId(edgeSel, 'target'));\r\n    return overlay;\r\n};\r\nvar getPathLength = function (pathSel) { return pathSel.node().getTotalLength(); };\r\nvar reverseDirection = function (renderData) {\r\n    var colorData = getEntry(renderData, 'color');\r\n    if (!colorData.animation || !colorData.animation.data || !colorData.animation.data.source)\r\n        return false;\r\n    else\r\n        return renderData.attr.source !== renderData.animation.color.data.source;\r\n};\r\nvar tweenOverlay = function (overlaySel, reverse, pathLengthFn, beginTraverse) {\r\n    if (isTransition(overlaySel)) {\r\n        return overlaySel.attrTween('stroke-dashoffset', function () {\r\n            var pathLength = pathLengthFn();\r\n            if (beginTraverse)\r\n                return function (t) { return (pathLength - (reverse ? -t : t) * pathLength).toString(); };\r\n            else\r\n                return function (t) { return (pathLength * 2 - (reverse ? -t : t) * pathLength).toString(); };\r\n        });\r\n    }\r\n    else\r\n        return overlaySel.attr('stroke-dashoffset', beginTraverse ? 0 : pathLengthFn());\r\n};\r\nvar highlightTraverse = function (pathSel, overlaySel, renderData) {\r\n    var colorData = getEntry(renderData, 'color');\r\n    var reverse = reverseDirection(renderData);\r\n    overlaySel.attr('stroke', parseColor(colorData.highlight))\r\n        .attr('stroke-width', renderData.attr.thickness + 2);\r\n    var startFn = function (sel) {\r\n        var trans = sel.attr('stroke-width', renderData.attr.thickness);\r\n        return tweenOverlay(trans, reverse, function () { return getPathLength(pathSel); }, true);\r\n    };\r\n    var endFn = function (sel) {\r\n        sel.on('start', function () {\r\n            var pathLength = getPathLength(pathSel);\r\n            overlaySel.attr('stroke-dasharray', pathLength);\r\n        });\r\n        var trans = tweenOverlay(sel, reverse, function () { return getPathLength(pathSel); }, false);\r\n        return newTransition(trans, function (t) { return t.duration(0); }).remove();\r\n    };\r\n    renderHighlight(overlaySel, colorData, startFn, endFn);\r\n};\r\nvar renderTraverse = function (pathSel, renderData, overlaySelector) {\r\n    var colorData = getEntry(renderData, 'color');\r\n    var reverse = reverseDirection(renderData);\r\n    var overlaySel = overlaySelector();\r\n    var pathLengthInit = getPathLength(pathSel);\r\n    overlaySel.attr('stroke-dasharray', pathLengthInit).attr('stroke-dashoffset', pathLengthInit);\r\n    if (colorData.highlight !== undefined)\r\n        highlightTraverse(pathSel, overlaySel, renderData);\r\n    else {\r\n        overlaySel.attr('stroke', parseColor(colorData.attr))\r\n            .attr('stroke-width', renderData.attr.thickness + 2);\r\n        render(overlaySel, colorData, function (sel) {\r\n            var trans = sel.attr('stroke-width', renderData.attr.thickness);\r\n            return tweenOverlay(trans, reverse, function () { return getPathLength(pathSel); }, true);\r\n        });\r\n        var animDuration_1 = parseTime(colorData.animation.duration);\r\n        var endDuration_1 = animDuration_1 / 3;\r\n        transition$1(pathSel, colorData.name, function (t) {\r\n            return t.delay(animDuration_1).duration(endDuration_1);\r\n        })\r\n            .attr('stroke', parseColor(colorData.attr));\r\n        var removeTrans = newTransition(overlaySel.attr('opacity', 1), function (t) {\r\n            return t.delay(animDuration_1 + endDuration_1).duration(endDuration_1);\r\n        })\r\n            .attr('opacity', 0);\r\n        newTransition(removeTrans, function (t) { return t.duration(0); }).remove();\r\n    }\r\n};\r\nvar renderColor = function (pathSel, markerSelector, overlaySelector, renderData) {\r\n    var colorData = getEntry(renderData, 'color');\r\n    var doTraverse = colorData.animation && colorData.animation.type === 'traverse';\r\n    if (doTraverse)\r\n        renderTraverse(pathSel, renderData, overlaySelector);\r\n    else\r\n        renderSvgAttr(pathSel, 'stroke', function (v) { return parseColor(v); }, colorData);\r\n    if (renderData.attr.directed)\r\n        renderSvgAttr(markerSelector(), 'fill', function (v) { return parseColor(v); }, colorData);\r\n};\n\nvar AttrType;\r\n(function (AttrType) {\r\n    AttrType[\"Number\"] = \"number\";\r\n    AttrType[\"String\"] = \"string\";\r\n    AttrType[\"Boolean\"] = \"boolean\";\r\n    AttrType[\"Array\"] = \"array\";\r\n    AttrType[\"Record\"] = \"record\";\r\n    AttrType[\"Lookup\"] = \"lookup\";\r\n    AttrType[\"Any\"] = \"any\";\r\n})(AttrType || (AttrType = {}));\r\nvar extendRecordDef = function (extendDef, baseDef) {\r\n    return __assign({}, extendDef, { entries: __assign({}, baseDef.entries, extendDef.entries), keyOrder: baseDef.keyOrder.concat(extendDef.keyOrder) });\r\n};\n\nvar defaults = {\r\n    visible: true\r\n};\r\nvar definition = {\r\n    type: AttrType.Record,\r\n    entries: {\r\n        visible: { type: AttrType.Boolean }\r\n    },\r\n    keyOrder: ['visible']\r\n};\r\nvar animationDefaults = {\r\n    visible: { type: 'normal' }\r\n};\r\nvar svgMixinDefEntries = {\r\n    svgattr: { type: AttrType.Lookup, entry: { type: AttrType.String } }\r\n};\r\nvar svgMixinDefKeys = ['svgattr'];\r\nvar svgMixinDefaults = {\r\n    svgattr: {}\r\n};\n\nvar angleToRad = function (angleDeg) { return angleDeg * Math.PI / 180; };\r\nvar angleToDeg = function (angleRad) { return angleRad * 180 / Math.PI; };\r\nvar restrictAngle = function (angle) {\r\n    return (angle < 0 ? Math.PI * 2 - (-angle % (Math.PI * 2)) : angle) % (Math.PI * 2);\r\n};\r\nvar radiusAtAngleRect = function (angle, rx, ry) {\r\n    var a = restrictAngle(angle);\r\n    var cornerAngle = Math.atan2(ry, rx);\r\n    if (a >= 0 && a < cornerAngle) {\r\n        return rx / Math.cos(a);\r\n    }\r\n    else if (a >= cornerAngle && a < Math.PI - cornerAngle) {\r\n        return ry / Math.cos(a - (Math.PI / 2));\r\n    }\r\n    else if (a >= Math.PI - cornerAngle && a < Math.PI + cornerAngle) {\r\n        return rx / Math.cos(a - Math.PI);\r\n    }\r\n    else if (a >= Math.PI + cornerAngle && a < (Math.PI * 2) - cornerAngle) {\r\n        return ry / Math.cos(a - (Math.PI * 3 / 2));\r\n    }\r\n    else\r\n        return rx / Math.cos((Math.PI * 2) - a);\r\n};\r\nvar rotate = function (_a, angle) {\r\n    var x = _a[0], y = _a[1];\r\n    return [\r\n        x * Math.cos(angle) - y * Math.sin(angle),\r\n        y * Math.cos(angle) + x * Math.sin(angle)\r\n    ];\r\n};\r\nvar translate = function (_a, _b) {\r\n    var x = _a[0], y = _a[1];\r\n    var tx = _b[0], ty = _b[1];\r\n    return [x + tx, y + ty];\r\n};\n\nvar EnumAlign;\r\n(function (EnumAlign) {\r\n    EnumAlign[\"top-left\"] = \"top-left\";\r\n    EnumAlign[\"top-middle\"] = \"top-middle\";\r\n    EnumAlign[\"top-right\"] = \"top-right\";\r\n    EnumAlign[\"middle-left\"] = \"middle-left\";\r\n    EnumAlign[\"middle\"] = \"middle\";\r\n    EnumAlign[\"middle-right\"] = \"middle-right\";\r\n    EnumAlign[\"bottom-left\"] = \"bottom-left\";\r\n    EnumAlign[\"bottom-middle\"] = \"bottom-middle\";\r\n    EnumAlign[\"bottom-right\"] = \"bottom-right\";\r\n    EnumAlign[\"radial\"] = \"radial\";\r\n})(EnumAlign || (EnumAlign = {}));\r\nvar ALIGN_ANGLES = {\r\n    'top-left': Math.PI * 3 / 4,\r\n    'top-middle': Math.PI * 1 / 2,\r\n    'top-right': Math.PI * 1 / 4,\r\n    'middle-left': Math.PI,\r\n    'middle': Math.PI * 3 / 2,\r\n    'middle-right': 0,\r\n    'bottom-left': Math.PI * 5 / 4,\r\n    'bottom-middle': Math.PI * 3 / 2,\r\n    'bottom-right': Math.PI * 7 / 4,\r\n    'radial': 0\r\n};\r\nvar definition$1 = extendRecordDef({\r\n    entries: __assign({ text: { type: AttrType.String }, align: { type: AttrType.String, validValues: enumValues(EnumAlign) }, pos: { type: AttrType.Record, entries: {\r\n                x: { type: AttrType.Number },\r\n                y: { type: AttrType.Number }\r\n            }, keyOrder: ['x', 'y'] }, radius: { type: AttrType.Number }, angle: { type: AttrType.Number }, rotate: { type: AttrType.Boolean }, color: { type: AttrType.String }, font: { type: AttrType.String }, size: { type: AttrType.Number } }, svgMixinDefEntries),\r\n    type: AttrType.Record,\r\n    keyOrder: ['text', 'align', 'pos', 'radius', 'angle', 'rotate', 'align', 'color', 'font', 'size'].concat(svgMixinDefKeys)\r\n}, definition);\r\nvar defaults$1 = __assign({}, defaults, { text: '', align: 'bottom-middle', pos: { x: 0, y: 0 }, radius: 0, angle: 90, rotate: false, color: COLORS.gray, font: 'Arial, Helvetica, sans-serif', size: 12 }, svgMixinDefaults);\r\nvar animationDefaults$1 = __assign({}, animationDefaults);\r\nvar alignFromAngle = function (angle, rotate$$1) {\r\n    if (rotate$$1)\r\n        return restrictAngle(angle) < Math.PI ? 'bottom-middle' : 'top-middle';\r\n    var testAngle = restrictAngle(angle + Math.PI);\r\n    var radialAligns = Object.keys(ALIGN_ANGLES)\r\n        .filter(function (v) { return v !== 'middle' && v !== 'radial'; })\r\n        .sort(function (a, b) { return ALIGN_ANGLES[a] < ALIGN_ANGLES[b] ? -1 : 0; });\r\n    return radialAligns.find(function (align, i) {\r\n        var prevAngle = (i === 0) ? -ALIGN_ANGLES[radialAligns[1]] : ALIGN_ANGLES[radialAligns[i - 1]];\r\n        var curAngle = ALIGN_ANGLES[radialAligns[i]];\r\n        var nextAngle = (i === radialAligns.length - 1) ? Math.PI * 2 : ALIGN_ANGLES[radialAligns[i + 1]];\r\n        return testAngle > (prevAngle + curAngle) / 2 && testAngle <= (curAngle + nextAngle) / 2;\r\n    });\r\n};\r\nvar init$1 = function (name) {\r\n    return __assign({}, defaults$1, { text: name });\r\n};\n\nvar renderPos = function (selection, posData) {\r\n    var polarX = posData.radius * Math.cos(posData.angle);\r\n    var polarY = posData.radius * Math.sin(posData.angle);\r\n    var rotation = restrictAngle(-posData.angle + ALIGN_ANGLES[posData.align] + Math.PI);\r\n    var rotateStr = posData.rotate ? \"rotate(\" + angleToDeg(rotation) + \")\" : '';\r\n    return selection.attr('transform', \"translate(\" + (posData.x + polarX) + \",\" + -(posData.y + polarY) + \")\" + rotateStr);\r\n};\r\nvar isAlignTop = function (a) { return a === 'top-left' || a === 'top-middle' || a === 'top-right'; };\r\nvar isAlignBottom = function (a) { return a === 'bottom-left' || a === 'bottom-middle' || a === 'bottom-right'; };\r\nvar renderAlign = function (selection, renderData) {\r\n    renderSvgAttr(selection, 'y', function (v) {\r\n        return isAlignTop(v) ? '0.75em' : isAlignBottom(v) ? '0em' : '0.25em';\r\n    }, __assign({}, renderData, { name: renderData.name + '-y' }));\r\n    renderSvgAttr(selection, 'text-anchor', function (v) {\r\n        return v === 'top-left' || v === 'middle-left' || v === 'bottom-left' ? 'start'\r\n            : v === 'top-right' || v === 'middle-right' || v === 'bottom-right' ? 'end'\r\n                : 'middle';\r\n    }, __assign({}, renderData, { name: renderData.name + '-x' }));\r\n};\r\nvar renderText = function (textSel, text, align) {\r\n    var splitText = text.split('\\n');\r\n    textSel.selectAll('tspan').remove();\r\n    splitText.forEach(function (line$$1, i) {\r\n        var lineHeight = 1.2;\r\n        var initOffset = isAlignTop(align) ? 0\r\n            : isAlignBottom(align) ? (splitText.length - 1) * lineHeight\r\n                : ((splitText.length - 1) / 2) * lineHeight;\r\n        textSel.append('tspan').attr('x', 0).attr('dy', i === 0 ? \"-\" + initOffset + \"em\" : lineHeight + \"em\").text(line$$1);\r\n    });\r\n};\r\nvar preprocessAlign = function (labelData) {\r\n    var align = labelData.attr.align;\r\n    var changedRadialAlign = labelData.changes && (labelData.changes.align !== undefined\r\n        || labelData.changes.angle !== undefined || labelData.changes.rotate !== undefined);\r\n    return __assign({}, getEntry(labelData, 'align'), { attr: align === 'radial' ? alignFromAngle(angleToRad(labelData.attr.angle), labelData.attr.rotate)\r\n            : align, changes: align === 'radial' && changedRadialAlign ? align\r\n            : (labelData.changes ? labelData.changes.align : undefined) });\r\n};\r\nvar render$2 = function (selection, renderData) {\r\n    var alignData = preprocessAlign(renderData);\r\n    var textSel = selectOrAdd(selection, 'text', function (s) {\r\n        return s.append('text').attr('pointer-events', 'none');\r\n    });\r\n    var combinedTextAlign = combine({ text: getEntry(renderData, 'text'), align: alignData });\r\n    render(textSel, combinedTextAlign, function (sel, textData) {\r\n        renderText(textSel, textData.text, textData.align);\r\n        return sel;\r\n    });\r\n    var combinedPos = combine({\r\n        x: getEntry(getEntry(renderData, 'pos'), 'x'),\r\n        y: getEntry(getEntry(renderData, 'pos'), 'y'),\r\n        radius: getEntry(renderData, 'radius'),\r\n        angle: getEntry(renderData, 'angle'),\r\n        rotate: getEntry(renderData, 'rotate'),\r\n        align: alignData\r\n    });\r\n    render(textSel, combinedPos, function (sel, posData) {\r\n        return renderPos(sel, __assign({}, posData, { angle: angleToRad(posData.angle) }));\r\n    });\r\n    renderAlign(textSel, alignData);\r\n    renderSvgAttr(textSel, 'fill', function (v) { return parseColor(v); }, getEntry(renderData, 'color'));\r\n    renderSvgAttr(textSel, 'font-family', function (v) { return v; }, getEntry(renderData, 'font'));\r\n    renderSvgAttr(textSel, 'font-size', function (v) { return v; }, getEntry(renderData, 'size'));\r\n    renderSvgAttrMixin(textSel, renderData);\r\n};\n\nvar selectLabelGroup$1 = function (sel) {\r\n    return selectOrAdd(sel, '.edge-labels', function (s) { return s.append('g').classed('edge-labels', true); });\r\n};\r\nvar selectLabel$1 = function (sel, id) {\r\n    var renderId$$1 = renderId(id);\r\n    return selectOrAdd(sel, \"#label-\" + renderId$$1, function (s) { return s.append('g').attr('id', \"label-\" + renderId$$1); });\r\n};\r\nvar render$3 = function (selection, renderData) {\r\n    var pathSel = selectOrAdd(selection, '.edge-path', function (s) {\r\n        return s.append('path').classed('edge-path', true).attr('fill', 'none').attr('stroke-linecap', 'round');\r\n    });\r\n    var labelGroup = selectLabelGroup$1(selection);\r\n    renderElementLookup(function (k) { return selectLabel$1(labelGroup, k); }, getEntry(renderData, 'labels'), render$2);\r\n    renderSvgAttr(pathSel, 'stroke-width', function (v) { return v; }, getEntry(renderData, 'thickness'));\r\n    render$1(selection, renderData);\r\n    renderSvgAttr(pathSel, 'marker-end', function (v) {\r\n        return v ? \"url(#\" + getFullId(selection, 'target') + \")\" : null;\r\n    }, getEntry(renderData, 'directed'));\r\n    var markerSelector = function () { return select$1(selection, 'target').select('path'); };\r\n    var overlaySelector = function () { return selectOverlay(selection, renderData); };\r\n    renderColor(pathSel, markerSelector, overlaySelector, renderData);\r\n    renderSvgAttrMixin(pathSel, renderData);\r\n};\n\nvar EnumVarSymbol;\r\n(function (EnumVarSymbol) {\r\n    EnumVarSymbol[\"Width\"] = \"x\";\r\n    EnumVarSymbol[\"Height\"] = \"y\";\r\n    EnumVarSymbol[\"Radius\"] = \"r\";\r\n    EnumVarSymbol[\"Angle\"] = \"a\";\r\n    EnumVarSymbol[\"CanvasWidth\"] = \"cx\";\r\n    EnumVarSymbol[\"CanvasHeight\"] = \"cy\";\r\n})(EnumVarSymbol || (EnumVarSymbol = {}));\n\nvar getChildDef = function (def, k) {\r\n    return isDefRecord(def) ? def.entries[k]\r\n        : isDefLookup(def) || isDefArray(def) ? def.entry\r\n            : def;\r\n};\r\nvar isDefRecord = function (def) { return def.type === AttrType.Record; };\r\nvar isDefLookup = function (def) { return def.type === AttrType.Lookup; };\r\nvar isDefArray = function (def) { return def.type === AttrType.Array; };\r\nvar isDefPrimitive = function (def) {\r\n    return !isDefRecord(def) && !isDefLookup(def) && !isDefArray(def);\r\n};\r\nfunction reduce(attr, def, fn, init) {\r\n    if (isDefRecord(def) || isDefLookup(def))\r\n        return Object.entries(attr).reduce(function (result, _a) {\r\n            var k = _a[0], v = _a[1];\r\n            return fn(result, k, v, getChildDef(def, k));\r\n        }, init);\r\n    else if (isDefArray(def))\r\n        return attr.reduce(function (result, v, i) {\r\n            return fn(result, i, v, getChildDef(def, i));\r\n        }, init);\r\n    else\r\n        return init;\r\n}\r\nfunction map(attr, definition, fn) {\r\n    if (isDefRecord(definition) || isDefLookup(definition))\r\n        return mapDict(attr, function (k, v) {\r\n            return fn(k, v, getChildDef(definition, k));\r\n        });\r\n    else if (isDefArray(definition))\r\n        return attr.map(function (v, i) {\r\n            return fn(i, v, getChildDef(definition, i));\r\n        });\r\n    else\r\n        return attr;\r\n}\r\nfunction merge(prevAttr, changes, def) {\r\n    if (isAttrEmpty(changes, def))\r\n        return prevAttr;\r\n    if (isDefRecord(def) || isDefLookup(def)) {\r\n        var mergedChanges = map(changes, def, function (k, v, d) {\r\n            return prevAttr[k] === undefined ? v\r\n                : isDefLookup(def) && (v === null || prevAttr[k] === null) ? v\r\n                    : merge(prevAttr[k], v, d);\r\n        });\r\n        return __assign({}, prevAttr, mergedChanges);\r\n    }\r\n    else if (isDefArray(def)) {\r\n        return map(changes, def, function (i, v, d) {\r\n            return v === undefined ? prevAttr[i]\r\n                : prevAttr[i] === undefined ? v\r\n                    : merge(prevAttr[i], v, d);\r\n        });\r\n    }\r\n    else\r\n        return changes;\r\n}\r\nvar isAttrEmpty = function (attr, def) {\r\n    if (attr === undefined)\r\n        return true;\r\n    else if ((isDefLookup(def) || isDefRecord(def)) && isDictEmpty(attr))\r\n        return true;\r\n    else if (isDefArray(def) && attr.length === 0)\r\n        return true;\r\n    else if (!isDefPrimitive(def))\r\n        return reduce(attr, def, function (res, k, v, d) {\r\n            return res === false ? res\r\n                : isDefLookup(def) && v === null ? false\r\n                    : isAttrEmpty(v, d);\r\n        }, true);\r\n    else\r\n        return false;\r\n};\r\nvar emptyAttr = function (def) {\r\n    if (isDefLookup(def) || isDefRecord(def))\r\n        return {};\r\n    else if (isDefArray(def))\r\n        return [];\r\n    else\r\n        return undefined;\r\n};\r\nvar newLookupEntries = function (prevAttr, changes) {\r\n    return filterDict(changes || {}, function (k, v) {\r\n        return prevAttr[k] === undefined && v !== null;\r\n    });\r\n};\r\nvar reduceAttr = function (attr, def, fn) {\r\n    if (isDefLookup(def) || isDefRecord(def)) {\r\n        return reduce(attr, def, function (result, k, v, d) {\r\n            var _a;\r\n            var child = fn(k, v, d);\r\n            return isAttrEmpty(child, d) ? result : __assign({}, result, (_a = {}, _a[k] = child, _a));\r\n        }, emptyAttr(def));\r\n    }\r\n    else if (isDefArray(def)) {\r\n        var array = map(attr, def, function (k, v, d) { return fn(k, v, d); });\r\n        if (isAttrEmpty(array, def))\r\n            return emptyAttr(def);\r\n        else\r\n            return array;\r\n    }\r\n    else\r\n        return emptyAttr(def);\r\n};\r\nvar reduceChanges = function (attr, def, fn) {\r\n    return reduceAttr(attr, def, function (k, v, d) {\r\n        return isDefLookup(def) && v === null ? undefined\r\n            : fn(k, v, d);\r\n    });\r\n};\r\nvar subtractPartial = function (attr, subtract, def) {\r\n    return reduceAttr(attr, def, function (k, v, d) {\r\n        return subtract[k] === undefined ? v\r\n            : isDefLookup(def) && (v === null || subtract[k] === null) ? undefined\r\n                : subtractPartial(v, subtract[k], d);\r\n    });\r\n};\r\nvar subtractFull = function (attr, subtract, def) {\r\n    if (isDefPrimitive(def))\r\n        return attr;\r\n    else {\r\n        // only lookup entries can be subtracted to maintain a full attribute structure\r\n        var validEntries = isDefLookup(def)\r\n            ? filterDict(attr, function (k, v) { return subtract[k] !== null; })\r\n            : attr;\r\n        return map(validEntries, def, function (k, v, d) {\r\n            return subtract[k] === undefined ? v\r\n                : subtractFull(v, subtract[k], d);\r\n        });\r\n    }\r\n};\r\nvar keepIfDifferent = function (newAttr, prevAttr, def) {\r\n    if (isDefPrimitive(def))\r\n        return newAttr !== prevAttr ? newAttr : emptyAttr(def);\r\n    return reduceChanges(newAttr, def, function (k, v, d) { return keepIfDifferent(v, prevAttr[k], d); });\r\n};\r\nvar getNullEntries = function (attr, def) {\r\n    if (isDefLookup(def)) {\r\n        var nullEntries = filterDict(attr, function (k, v) { return v === null; });\r\n        var reduced = reduceChanges(attr, def, function (k, v, d) { return getNullEntries(v, d); });\r\n        return __assign({}, reduced, nullEntries);\r\n    }\r\n    else\r\n        return reduceChanges(attr, def, function (k, v, d) { return getNullEntries(v, d); });\r\n};\r\nvar fillLookupEntries = function (attr, referenceAttr, def) {\r\n    if (isDefPrimitive(def))\r\n        return attr;\r\n    else if (isDefLookup(def) && attr['*'] !== undefined) {\r\n        return map(referenceAttr, def, function (k, v, d) {\r\n            return v === null ? null\r\n                : fillLookupEntries(attr['*'], v, d);\r\n        });\r\n    }\r\n    else {\r\n        var validAttr = filterDict(referenceAttr, function (k) { return attr[k] !== undefined; });\r\n        return map(validAttr, def, function (k, v, d) {\r\n            return fillLookupEntries(attr[k], v, d);\r\n        });\r\n    }\r\n};\n\nvar parseSingleTerm = function (term) {\r\n    var reverseIndex = term.split('').findIndex(function (c, i) { return isNumStr(term.substring(0, term.length - i)); });\r\n    var varIndex = reverseIndex === -1 ? (term[0] === '-' || term[0] === '+' ? 1 : 0) : term.length - reverseIndex;\r\n    var rawNumStr = term.substring(0, varIndex);\r\n    var varStr = term.substring(varIndex);\r\n    var numStr = rawNumStr === '' && varStr === '' ? '0'\r\n        : rawNumStr === '' || rawNumStr === '+' ? '1'\r\n            : rawNumStr === '-' ? '-1' : rawNumStr;\r\n    if (!isNumStr(numStr))\r\n        return new Error();\r\n    return __assign({ num: parseFloat(numStr) }, (varStr !== '' ? { symbol: varStr } : {}));\r\n};\r\nvar parseExpr = function (value, vars) {\r\n    // e.g. parse 4.7r - 9 to { m: 4.7, x: 'r', c: -9 }\r\n    var errorText = \"invalid expression '\" + value + \"'\";\r\n    var expression = removeWhitespace(value);\r\n    var opIndex = expression.lastIndexOf('+') > 0 ? expression.lastIndexOf('+')\r\n        : expression.lastIndexOf('-') > 0 ? expression.lastIndexOf('-') : expression.length;\r\n    var term1 = parseSingleTerm(expression.substring(0, opIndex));\r\n    var term2 = parseSingleTerm(expression.substring(opIndex));\r\n    if (term1 instanceof Error)\r\n        return new Error(errorText);\r\n    else if (term2 instanceof Error)\r\n        return new Error(errorText);\r\n    else {\r\n        if (term1.symbol !== undefined && term2.symbol !== undefined)\r\n            return new Error(errorText + \": too many variables\");\r\n        var exprObject = term1.symbol !== undefined\r\n            ? { m: term1.num, x: term1.symbol, c: term2.num }\r\n            : { m: term2.num, x: term2.symbol, c: term1.num };\r\n        return parseExprObj(exprObject, vars, value);\r\n    }\r\n};\r\nvar parseExprObj = function (value, vars, formatted) {\r\n    var formattedExpr = formatted || JSON.stringify(value);\r\n    var numExpr = value;\r\n    if (numExpr.m !== undefined && typeof numExpr.m !== 'number'\r\n        || numExpr.c !== undefined && typeof numExpr.c !== 'number'\r\n        || numExpr.x === undefined)\r\n        return new Error(\"invalid expression '\" + formattedExpr + \"'\");\r\n    if (!vars.includes(numExpr.x))\r\n        return new Error(\"expression '\" + formattedExpr + \"' uses invalid variable '\" + numExpr.x + \"'\"\r\n            + (\" (valid variables are [\" + vars + \"])\"));\r\n    return {\r\n        m: numExpr.m !== undefined ? numExpr.m : 1,\r\n        x: numExpr.x,\r\n        c: numExpr.c !== undefined ? numExpr.c : 0\r\n    };\r\n};\r\nvar isExpressionNum = function (attr) { return isDict(attr); };\r\nvar isExpression = function (attr, def) {\r\n    if (def.type === AttrType.Number)\r\n        return isExpressionNum(attr);\r\n    else\r\n        return false;\r\n};\r\nvar evaluateNum = function (expression, vars) {\r\n    // e.g. expressionDict = { value: 8, units: 'x' }, units = { x: 5 } => return 16\r\n    if (!isExpressionNum(expression))\r\n        return expression;\r\n    var m = expression.m !== undefined ? expression.m : 1;\r\n    var c = expression.c !== undefined ? expression.c : 0;\r\n    if (expression.x === undefined)\r\n        return m + c;\r\n    else if (vars.hasOwnProperty(expression.x))\r\n        return m * vars[expression.x] + c;\r\n    else\r\n        return expression;\r\n};\r\nvar getExpressionVars = function (attr, def) {\r\n    if (def.type === AttrType.Number && isExpression(attr, def)) {\r\n        return [attr.x];\r\n    }\r\n    else\r\n        return [];\r\n};\r\nfunction getEvaluatedChanges(attr, vars, def) {\r\n    if (def.type === AttrType.Number && isExpressionNum(attr)) {\r\n        var varSymbols_1 = getExpressionVars(attr, def);\r\n        var shouldUpdate = Object.keys(vars).findIndex(function (k) { return varSymbols_1.includes(k); }) >= 0;\r\n        if (shouldUpdate)\r\n            return evaluateNum(attr, vars);\r\n        else\r\n            return undefined;\r\n    }\r\n    else\r\n        return reduceChanges(attr, def, function (k, v, d) { return getEvaluatedChanges(v, vars, d); });\r\n}\r\nvar getExpr = function (attr, def) {\r\n    if (isDefPrimitive(def) && isExpression(attr, def))\r\n        return attr;\r\n    else\r\n        return reduceChanges(attr, def, function (k, v, d) { return getExpr(v, d); });\r\n};\r\nvar getNonExpr = function (attr, def) {\r\n    if (isDefPrimitive(def) && !isExpression(attr, def))\r\n        return attr;\r\n    else\r\n        return reduceChanges(attr, def, function (k, v, d) { return getNonExpr(v, d); });\r\n};\r\nvar getPermanentExpr = function (attr, def) {\r\n    if (isDefPrimitive(def) && isExpression(attr, def)) {\r\n        var vars = getExpressionVars(attr, def);\r\n        var symbol = def.symbol;\r\n        return symbol !== undefined && vars.includes(symbol) ? undefined : attr;\r\n    }\r\n    else\r\n        return reduceChanges(attr, def, function (k, v, d) { return getPermanentExpr(v, d); });\r\n};\n\nvar EnumShape;\r\n(function (EnumShape) {\r\n    EnumShape[\"circle\"] = \"circle\";\r\n    EnumShape[\"rect\"] = \"rect\";\r\n    EnumShape[\"ellipse\"] = \"ellipse\";\r\n})(EnumShape || (EnumShape = {}));\r\nvar definition$2 = extendRecordDef({\r\n    entries: __assign({ labels: {\r\n            type: AttrType.Lookup,\r\n            entry: definition$1,\r\n            validVars: [EnumVarSymbol.Radius]\r\n        }, shape: { type: AttrType.String, validValues: enumValues(EnumShape) }, color: { type: AttrType.String }, size: { type: AttrType.Record, entries: {\r\n                width: { type: AttrType.Number, symbol: EnumVarSymbol.Width },\r\n                height: { type: AttrType.Number, symbol: EnumVarSymbol.Height }\r\n            }, keyOrder: ['width', 'height'] }, pos: { type: AttrType.Record, entries: {\r\n                x: { type: AttrType.Number },\r\n                y: { type: AttrType.Number }\r\n            }, keyOrder: ['x', 'y'] }, fixed: { type: AttrType.Boolean }, draggable: { type: AttrType.Boolean }, hover: { type: AttrType.Boolean }, click: { type: AttrType.Boolean } }, svgMixinDefEntries),\r\n    type: AttrType.Record,\r\n    keyOrder: ['labels', 'shape', 'color', 'size', 'pos', 'fixed', 'draggable', 'hover', 'click'].concat(svgMixinDefKeys),\r\n    validVars: [EnumVarSymbol.Width, EnumVarSymbol.Height]\r\n}, definition);\r\nvar VALUE_LABEL = 'value';\r\nvar defaults$2 = __assign({}, defaults, { labels: {}, shape: 'circle', color: COLORS.darkgray, size: {\r\n        width: 12,\r\n        height: 12\r\n    }, pos: { x: 0, y: 0 }, fixed: false, draggable: true, hover: false, click: false }, svgMixinDefaults);\r\nvar animationDefaults$2 = __assign({}, animationDefaults, { labels: { '*': animationDefaults$1 } });\r\nvar radiusAtAngle = function (angle, rx, ry, shape) {\r\n    if (shape === 'rect' || shape === 'ellipse')\r\n        return radiusAtAngleRect(angle, rx, ry);\r\n    else\r\n        return rx;\r\n};\r\nvar init$2 = function (name, index) {\r\n    var _a;\r\n    var defaultLabel = __assign({}, init$1(name), { align: 'middle', pos: { x: 0, y: -1 }, radius: 0, angle: 90, rotate: false, color: COLORS.white, size: 12 });\r\n    return __assign({}, defaults$2, { labels: (_a = {}, _a[VALUE_LABEL] = defaultLabel, _a), pos: initPos(index, defaults$2.size.width * 2) });\r\n};\r\nvar initChildren = function (prevAttr, changes) {\r\n    var newLabels = newLookupEntries(prevAttr.labels, changes.labels);\r\n    var prevRadialLabels = filterDict(prevAttr.labels, function (k) { return k !== VALUE_LABEL; });\r\n    var newRadialLabelChanges = filterDict(newLabels, function (k) { return k !== VALUE_LABEL; });\r\n    var newOtherLabelChanges = filterDict(newLabels, function (k) { return newRadialLabelChanges[k] === undefined; });\r\n    var newRadialLabels = mapDict(newRadialLabelChanges, function (k, v, i) {\r\n        var index = Object.keys(prevRadialLabels).length + i;\r\n        var defaultAngle = (Math.PI * 3 / 4) - ((Math.PI / 2) * (index % 4)) - (Math.floor(index / 4) * (Math.PI / 4));\r\n        return __assign({}, init$1(k), { radius: { m: 1, x: EnumVarSymbol.Radius, c: 3 }, angle: angleToDeg(defaultAngle), align: 'radial' });\r\n    });\r\n    var newOtherLabels = mapDict(newOtherLabelChanges, function (k) { return init$1(k); });\r\n    return {\r\n        labels: __assign({}, newRadialLabels, newOtherLabels)\r\n    };\r\n};\r\nvar evaluate$1 = function (evaluated, expr, changes) {\r\n    var evalChanges = getEvaluatedChanges(expr, getVariables(evaluated), definition$2);\r\n    var newEval = merge(evaluated, evalChanges || {}, definition$2);\r\n    var evalLabelChanges = reduceChanges(expr.labels || {}, definition$2.entries.labels, function (k, labelExpr) { return newEval.labels && newEval.labels[k]\r\n        ? getEvaluatedChanges(labelExpr, getLabelVariables(newEval, newEval.labels[k]), definition$1)\r\n        : undefined; });\r\n    var evalChildChanges = { labels: evalLabelChanges || {} };\r\n    return merge(evalChanges || {}, evalChildChanges, definition$2);\r\n};\r\nvar getVariables = function (attr) {\r\n    var _a, _b, _c;\r\n    var hasWidth = attr.size.width && attr.size.width !== undefined;\r\n    var hasHeight = attr.size && attr.size.height !== undefined;\r\n    return __assign({}, (hasWidth ? (_a = {}, _a[EnumVarSymbol.Width] = attr.size.width, _a) : {}), (attr.shape !== undefined && attr.shape === 'circle' && hasWidth ? (_b = {}, _b[EnumVarSymbol.Height] = attr.size.width, _b) : hasHeight ? (_c = {}, _c[EnumVarSymbol.Height] = attr.size.height, _c) : {}));\r\n};\r\nvar getLabelVariables = function (node, label) {\r\n    var _a;\r\n    if (node.size && node.size.width !== undefined && node.size.height !== undefined && label.angle !== undefined) {\r\n        var radius = radiusAtAngle(angleToRad(label.angle), node.size.width, node.size.height, node.shape);\r\n        return _a = {}, _a[EnumVarSymbol.Radius] = radius, _a;\r\n    }\r\n    else\r\n        return {};\r\n};\r\nvar initPos = function (index, offset) {\r\n    var sqrtOffset = Math.floor(Math.sqrt(index));\r\n    var sizeInit = Math.pow(sqrtOffset, 2) !== index ? sqrtOffset + 1 : sqrtOffset;\r\n    var size = sizeInit % 2 === 0 ? sizeInit + 1 : sizeInit;\r\n    var halfSize = Math.floor(size / 2.0);\r\n    var difference = Math.pow(size, 2) - index;\r\n    var rawPos = difference <= size ? {\r\n        x: -halfSize + (size - difference),\r\n        y: -halfSize\r\n    } : difference <= (size * 2) - 1 ? {\r\n        x: -halfSize,\r\n        y: -halfSize + (difference - size)\r\n    } : difference <= (size * 3) - 2 ? {\r\n        x: -halfSize + (difference - (size * 2)) + 1,\r\n        y: halfSize\r\n    } : {\r\n        x: halfSize,\r\n        y: -halfSize + (size - (difference - (size * 3) + 3))\r\n    };\r\n    return {\r\n        x: rawPos.x * (offset + 1),\r\n        y: rawPos.y * (offset + 1)\r\n    };\r\n};\n\nvar getLiveNodeData = function (canvasSel, layoutState, canvasAttr, nodeId) {\r\n    var nodeGroup = selectNodeGroup(canvasSel);\r\n    var nodeAttr = canvasAttr.nodes[nodeId];\r\n    var nodeLayout = layoutState.nodes[nodeId];\r\n    if (nodeAttr.visible) {\r\n        var nodeSel = selectNode(nodeGroup, nodeId);\r\n        var selWidth = nodeSel.attr('_width');\r\n        var selHeight = nodeSel.attr('_height');\r\n        var size = selWidth !== null && selHeight !== null\r\n            ? [parseFloat(selWidth), parseFloat(selHeight)]\r\n            : [nodeLayout.width / 2, nodeLayout.height / 2];\r\n        return {\r\n            shape: nodeAttr.shape,\r\n            size: size,\r\n            pos: [nodeLayout.x, nodeLayout.y]\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            shape: nodeAttr.shape,\r\n            size: [nodeLayout.width / 2, nodeLayout.height / 2],\r\n            pos: [nodeLayout.x, nodeLayout.y]\r\n        };\r\n    }\r\n};\r\nvar getPointAtNodeBoundary = function (node, angle, offset) {\r\n    if (offset === void 0) { offset = 0; }\r\n    var fullOffset = radiusAtAngle(angle, node.size[0], node.size[1], node.shape) + offset;\r\n    return [\r\n        node.pos[0] + fullOffset * Math.cos(angle),\r\n        node.pos[1] + fullOffset * Math.sin(angle)\r\n    ];\r\n};\n\nvar getLoopAngle = function (canvasSel, layoutState, canvasAttr, nodeId) {\r\n    var adjNodes = layoutState.adjacentNodes[nodeId].filter(function (n) { return n !== nodeId; });\r\n    if (adjNodes.length === 0)\r\n        return Math.PI;\r\n    var sourcePos = getLiveNodeData(canvasSel, layoutState, canvasAttr, nodeId).pos;\r\n    var anglesAbs = adjNodes.map(function (n) {\r\n        var pos = getLiveNodeData(canvasSel, layoutState, canvasAttr, n).pos;\r\n        return restrictAngle(Math.atan2(pos[1] - sourcePos[1], pos[0] - sourcePos[0]));\r\n    });\r\n    var sortedAngles = anglesAbs.sort();\r\n    var angleDiffs = sortedAngles.map(function (a, i) {\r\n        if (i === sortedAngles.length - 1)\r\n            return (Math.PI * 2 - a) + sortedAngles[0];\r\n        else\r\n            return sortedAngles[i + 1] - a;\r\n    });\r\n    var maxDifIndex = angleDiffs.reduce(function (maxIndex, a, i) { return a > angleDiffs[maxIndex] ? i : maxIndex; }, 0);\r\n    return restrictAngle((anglesAbs[maxDifIndex] + angleDiffs[maxDifIndex] / 2) - Math.PI / 2);\r\n};\r\nvar getLiveEdgeData = function (canvasSel, layoutState, canvasAttr, edgeAttr) {\r\n    var sourceData = getLiveNodeData(canvasSel, layoutState, canvasAttr, edgeAttr.source);\r\n    var targetData = getLiveNodeData(canvasSel, layoutState, canvasAttr, edgeAttr.target);\r\n    var targetOffset = edgeAttr.directed ? MARKER_SIZE / 2 : 0;\r\n    var angle = edgeAttr.source === edgeAttr.target ? getLoopAngle(canvasSel, layoutState, canvasAttr, edgeAttr.source)\r\n        : restrictAngle(Math.atan2(targetData.pos[1] - sourceData.pos[1], targetData.pos[0] - sourceData.pos[0]));\r\n    return {\r\n        angle: angle,\r\n        flip: edgeAttr.flip,\r\n        curve: edgeAttr.curve,\r\n        path: edgeAttr.path.map(function (p) { return [p.x, p.y]; }),\r\n        sourceOffset: 0,\r\n        targetOffset: targetOffset,\r\n        source: sourceData,\r\n        target: targetData,\r\n        sourceId: edgeAttr.source,\r\n        targetId: edgeAttr.target\r\n    };\r\n};\r\nvar shouldFlip = function (edge) {\r\n    return edge.flip && edge.sourceId !== edge.targetId && edge.angle > Math.PI / 2 && edge.angle <= Math.PI * 3 / 2;\r\n};\r\nvar getEdgeOrigin = function (edge) {\r\n    if (edge.sourceId === edge.targetId)\r\n        return getPointAtNodeBoundary(edge.source, edge.angle + Math.PI / 2);\r\n    else {\r\n        var sourcePoint = getPointAtNodeBoundary(edge.source, edge.angle);\r\n        var targetPoint = getPointAtNodeBoundary(edge.target, edge.angle + Math.PI);\r\n        return [\r\n            (sourcePoint[0] + targetPoint[0]) / 2,\r\n            (sourcePoint[1] + targetPoint[1]) / 2\r\n        ];\r\n    }\r\n};\r\nvar curveFn = function (name) {\r\n    // e.g. convert 'step-after' to 'curveStepAfter'\r\n    return d3$1['curve' + dashToUpperCamel(name)];\r\n};\r\nvar renderEdgePath = function (edgeSel, edge, origin) {\r\n    var edgePath = shouldFlip(edge) ? edge.path.map(function (_a) {\r\n        var x = _a[0], y = _a[1];\r\n        return [x, -y];\r\n    }) : edge.path;\r\n    var pointBeforeSource = edgePath.length === 0 ? origin\r\n        : translate(rotate(edgePath[0], edge.angle), origin);\r\n    var pointBeforeTarget = edgePath.length === 0 ? origin\r\n        : translate(rotate(edgePath[edgePath.length - 1], edge.angle), origin);\r\n    var angleAtSource = Math.atan2(pointBeforeSource[1] - edge.source.pos[1], pointBeforeSource[0] - edge.source.pos[0]);\r\n    var angleAtTarget = Math.atan2(pointBeforeTarget[1] - edge.target.pos[1], pointBeforeTarget[0] - edge.target.pos[0]);\r\n    var pointAtSource = getPointAtNodeBoundary(edge.source, angleAtSource, edge.sourceOffset);\r\n    var pointAtTarget = getPointAtNodeBoundary(edge.target, angleAtTarget, edge.targetOffset);\r\n    var pointAtSourceRel = rotate(translate(pointAtSource, [-origin[0], -origin[1]]), -edge.angle);\r\n    var pointAtTargetRel = rotate(translate(pointAtTarget, [-origin[0], -origin[1]]), -edge.angle);\r\n    var lineFunction = line().x(function (d) { return d[0]; }).y(function (d) { return -d[1]; }).curve(curveFn(edge.curve));\r\n    var line$$1 = lineFunction([pointAtSourceRel].concat(edgePath, [pointAtTargetRel]));\r\n    edgeSel.select('.edge-path').attr('d', line$$1);\r\n    var overlay = edgeSel.select('.edge-path-overlay');\r\n    if (!overlay.empty())\r\n        overlay.attr('d', line$$1);\r\n};\n\nvar updateNodes = function (canvasSel, attr, layout) {\r\n    Object.entries(layout.nodes).forEach(function (_a) {\r\n        var id = _a[0], node = _a[1];\r\n        if (attr[id].visible) {\r\n            var nodeSel = selectNode(selectNodeGroup(canvasSel), id);\r\n            nodeSel.attr('transform', \"translate(\" + node.x + \",\" + -node.y + \")\");\r\n        }\r\n    });\r\n};\r\nvar updateEdges = function (canvasSel, attr, layout) {\r\n    Object.keys(attr.edges).forEach(function (k) {\r\n        if (attr.edges[k].visible) {\r\n            var edge = getLiveEdgeData(canvasSel, layout, attr, attr.edges[k]);\r\n            var edgeSel = selectEdge(canvasSel, k);\r\n            var origin_1 = getEdgeOrigin(edge);\r\n            edgeSel.attr('transform', \"translate(\" + origin_1[0] + \",\" + -origin_1[1] + \")rotate(\" + -angleToDeg(edge.angle) + \")\");\r\n            var edgeLabels = selectLabelGroup$1(edgeSel);\r\n            edgeLabels.attr('transform', shouldFlip(edge) ? 'scale(-1, -1)' : null);\r\n            renderEdgePath(edgeSel, edge, origin_1);\r\n        }\r\n    });\r\n};\r\nvar updateCanvas = function (canvas, attr, layout) {\r\n    if (!attr.visible)\r\n        return;\r\n    var canvasSel = selectCanvasInner(selectCanvas(canvas));\r\n    updateNodes(canvasSel, attr.nodes, layout);\r\n    updateEdges(canvasSel, attr, layout);\r\n};\n\nvar didUpdateLayout = function (changes) {\r\n    return changes.size !== undefined || changes.edgelengths !== undefined;\r\n};\r\nvar updateCola = function (cola, attr) {\r\n    cola.size([attr.size.width, attr.size.height]);\r\n    if (attr.edgelengths.type === 'individual')\r\n        cola.linkDistance(function (edge) { return edge.length; });\r\n    else if (attr.edgelengths.type === 'jaccard')\r\n        cola.jaccardLinkLengths(attr.edgelengths.length, 1);\r\n    else if (attr.edgelengths.type === 'symmetric')\r\n        cola.symmetricDiffLinkLengths(attr.edgelengths.length, 0.1);\r\n};\r\nvar calcAdjacency = function (nodes, edges) {\r\n    var initMatrix = mapDict(nodes, function (n) { return []; });\r\n    return Object.values(edges).reduce(function (matrix, edge) {\r\n        var _a, _b;\r\n        var withSource = __assign({}, matrix, (_a = {}, _a[edge.target] = matrix[edge.target].concat([edge.source]), _a));\r\n        var withTarget = __assign({}, withSource, (_b = {}, _b[edge.source] = withSource[edge.source].concat([edge.target]), _b));\r\n        return withTarget;\r\n    }, initMatrix);\r\n};\n\nvar fromAttrChanges = function (attr, changes) {\r\n    var height = attr.shape === 'circle' ? attr.size.width * 2 : attr.size.height * 2;\r\n    var changedHeight = changes.size && (attr.shape === 'circle' ? changes.size.width !== undefined\r\n        : changes.size.height !== undefined);\r\n    return __assign({}, (changes.size && changes.size.width !== undefined ? { width: attr.size.width * 2 } : {}), (changedHeight ? { height: height } : {}), (changes.pos && changes.pos.x !== undefined ? { x: attr.pos.x } : {}), (changes.pos && changes.pos.y !== undefined ? { y: attr.pos.y } : {}), (changes.fixed !== undefined ? { fixed: attr.fixed ? 1 : 0 } : {}));\r\n};\r\nvar didUpdateLayout$1 = function (attr, changes) {\r\n    return !isDictEmpty(fromAttrChanges(attr, changes));\r\n};\r\nvar mergeLookup = function (nodes, attr, changes) {\r\n    // merge changes with previous nodes so as to preserve positions and references\r\n    var nodeChanges = mapDict(changes, function (k, v) {\r\n        return v === null ? null : fromAttrChanges(attr[k], v);\r\n    });\r\n    return Object.keys(nodes).concat(Object.keys(changes)).reduce(function (result, k) {\r\n        var _a, _b, _c;\r\n        return nodeChanges[k] === null ? result // remove node\r\n            : nodes[k] === undefined ? __assign({}, result, (_a = {}, _a[k] = nodeChanges[k], _a)) : nodeChanges[k] === undefined ? __assign({}, result, (_b = {}, _b[k] = nodes[k], _b)) : __assign({}, result, (_c = {}, _c[k] = __assign({}, nodes[k], nodeChanges[k]), _c));\r\n    } // changed\r\n    , {});\r\n};\r\nvar updateCola$1 = function (cola, nodes) {\r\n    var _a;\r\n    // cola doesn't work when you call .nodes() with a new array\r\n    (_a = cola.nodes()).splice.apply(_a, [0, cola.nodes().length].concat(Object.values(nodes)));\r\n};\n\nvar fromAttr = function (attr) {\r\n    return {\r\n        source: attr.source,\r\n        target: attr.target,\r\n        length: attr.length\r\n    };\r\n};\r\nvar didUpdateLayout$2 = function (changes) {\r\n    return changes.source !== undefined || changes.target !== undefined || changes.length !== undefined;\r\n};\r\nvar createLookup = function (attr) {\r\n    return mapDict(attr, function (k, v) { return fromAttr(v); });\r\n};\r\nvar updateCola$2 = function (cola, nodes, edges) {\r\n    var _a;\r\n    // cola doesn't work when you call .nodes() with a new array\r\n    var newEdges = mapDict(edges, function (k, edge) { return (__assign({}, edge, { source: nodes[edge.source], target: nodes[edge.target] })); });\r\n    (_a = cola.links()).splice.apply(_a, [0, cola.links().length].concat(Object.values(newEdges)));\r\n};\n\nvar initCola = function (tick) {\r\n    return d3adaptor(d3$2)\r\n        .nodes([]).links([])\r\n        .handleDisconnected(false)\r\n        .avoidOverlaps(true)\r\n        .on('tick', tick);\r\n};\r\nvar init$3 = function (tick) {\r\n    return {\r\n        cola: initCola(tick),\r\n        tick: tick,\r\n        nodes: {},\r\n        adjacentNodes: {}\r\n    };\r\n};\r\nvar reset = function (layoutState) {\r\n    layoutState.cola.links([]).nodes([]).stop().on('tick', function () { });\r\n    return init$3(layoutState.tick);\r\n};\r\nvar update = function (layoutState, attr, changes) {\r\n    var didUpdateNodes = changes.nodes && Object.entries(changes.nodes).findIndex(function (_a) {\r\n        var k = _a[0], v = _a[1];\r\n        return v === null || didUpdateLayout$1(attr.nodes[k], v);\r\n    }) >= 0;\r\n    var didUpdateEdges = changes.edges && Object.values(changes.edges).findIndex(function (v) {\r\n        return v === null || didUpdateLayout$2(v);\r\n    }) >= 0;\r\n    var didUpdateCanvas = didUpdateLayout(changes);\r\n    if (!didUpdateNodes && !didUpdateEdges && !didUpdateCanvas)\r\n        return layoutState;\r\n    var newNodes = didUpdateNodes ? mergeLookup(layoutState.nodes, attr.nodes, changes.nodes)\r\n        : layoutState.nodes;\r\n    if (didUpdateNodes)\r\n        updateCola$1(layoutState.cola, newNodes);\r\n    // edges need to be re-added when edge length type changes\r\n    if (didUpdateEdges || changes.edgelengths !== undefined)\r\n        updateCola$2(layoutState.cola, newNodes, createLookup(attr.edges));\r\n    if (didUpdateCanvas)\r\n        updateCola(layoutState.cola, attr);\r\n    var adjacency = didUpdateNodes === undefined && didUpdateEdges === undefined\r\n        ? layoutState.adjacentNodes : calcAdjacency(attr.nodes, attr.edges);\r\n    layoutState.cola.start();\r\n    return __assign({}, layoutState, { nodes: newNodes, adjacentNodes: adjacency });\r\n};\n\nvar EnumCurve;\r\n(function (EnumCurve) {\r\n    EnumCurve[\"basis\"] = \"basis\";\r\n    EnumCurve[\"bundle\"] = \"bundle\";\r\n    EnumCurve[\"cardinal\"] = \"cardinal\";\r\n    EnumCurve[\"catmull-rom\"] = \"catmull-rom\";\r\n    EnumCurve[\"linear\"] = \"linear\";\r\n    EnumCurve[\"monotone-x\"] = \"monotone-x\";\r\n    EnumCurve[\"monotone-y\"] = \"monotone-y\";\r\n    EnumCurve[\"natural\"] = \"natural\";\r\n    EnumCurve[\"step\"] = \"step\";\r\n    EnumCurve[\"step-before\"] = \"step-before\";\r\n    EnumCurve[\"step-after\"] = \"step-after\";\r\n})(EnumCurve || (EnumCurve = {}));\r\nvar definition$3 = extendRecordDef({\r\n    entries: __assign({ labels: { type: AttrType.Lookup, entry: definition$1 }, source: { type: AttrType.String }, target: { type: AttrType.String }, directed: { type: AttrType.Boolean }, length: { type: AttrType.Number }, thickness: { type: AttrType.Number }, color: { type: AttrType.String }, flip: { type: AttrType.Boolean }, curve: { type: AttrType.String, validValues: enumValues(EnumCurve) }, path: { type: AttrType.Array, entry: {\r\n                type: AttrType.Record, entries: {\r\n                    x: { type: AttrType.Number },\r\n                    y: { type: AttrType.Number }\r\n                }, keyOrder: ['x', 'y']\r\n            }\r\n        } }, svgMixinDefEntries),\r\n    type: AttrType.Record,\r\n    keyOrder: ['labels', 'source', 'target', 'directed', 'length', 'thickness', 'color', 'flip', 'curve', 'path'].concat(svgMixinDefKeys),\r\n    validVars: []\r\n}, definition);\r\nvar defaults$3 = __assign({}, defaults, { labels: {}, source: '', target: '', directed: false, length: 70, thickness: 2.5, color: COLORS.lightgray, flip: true, curve: 'natural', path: [] }, svgMixinDefaults);\r\nvar labelDefaults = {\r\n    align: 'radial',\r\n    rotate: true,\r\n    size: 11,\r\n    radius: 3\r\n};\r\nvar animationDefaults$3 = __assign({}, animationDefaults, { labels: { '*': animationDefaults$1 } });\r\nvar init$4 = function () {\r\n    return defaults$3;\r\n};\r\nvar initChildren$1 = function (prevAttr, changes) {\r\n    var newLabels = mapDict(newLookupEntries(prevAttr.labels, changes.labels), function (k, v, i) {\r\n        var path = changes.path ? changes.path : prevAttr.path;\r\n        var pathMidY = path.length === 0 ? 0 : path[Math.floor((path.length - 1) / 2)].y;\r\n        var pathMidYNum = typeof pathMidY === 'number' ? pathMidY : 0;\r\n        var index = Object.keys(prevAttr.labels).length + i;\r\n        var angle = (index % 2) === 0 ? Math.PI / 2 : Math.PI * 3 / 2;\r\n        return __assign({}, init$1(k), labelDefaults, { pos: { x: 0, y: pathMidYNum }, angle: angleToDeg(angle) });\r\n    });\r\n    return {\r\n        labels: newLabels\r\n    };\r\n};\r\nvar incrementMatrix = function (matrix, source, target) {\r\n    var _a, _b, _c;\r\n    var sourceAdj = matrix[source] === undefined ? {} : matrix[source];\r\n    var targetAdj = matrix[target] === undefined ? {} : matrix[target];\r\n    var sourceLookup = __assign({}, sourceAdj, (_a = {}, _a[target] = sourceAdj[target] === undefined ? 1 : sourceAdj[target] + 1, _a));\r\n    var targetLookup = __assign({}, targetAdj, (_b = {}, _b[source] = targetAdj[source] === undefined ? 1 : targetAdj[source] + 1, _b));\r\n    return __assign({}, matrix, (_c = {}, _c[source] = sourceLookup, _c[target] = targetLookup, _c));\r\n};\r\nvar createAdjMatrix = function (edges) {\r\n    return Object.values(edges).reduce(function (matrix, e) {\r\n        return incrementMatrix(matrix, e.source, e.target);\r\n    }, {});\r\n};\r\nvar initLookup = function (prevEdges, changes) {\r\n    var newEdges = newLookupEntries(prevEdges, changes);\r\n    if (isDictEmpty(newEdges))\r\n        return newEdges;\r\n    var edgeInitData = Object.entries(newEdges).reduce(function (result, _a) {\r\n        var k = _a[0], edge = _a[1];\r\n        var _b;\r\n        // edges are expected to be provided with source and target attributes initially\r\n        var source = edge.source || '';\r\n        var target = edge.target || '';\r\n        var newMatrix = incrementMatrix(result.matrix, source, target);\r\n        var index = newMatrix[source][target] - 1;\r\n        var loopingPath = function (i) { return [\r\n            { x: -(i + 1) * 8, y: 8 },\r\n            { x: -(i + 1) * 10, y: 14 + ((i + 1) * 6) },\r\n            { x: 0, y: 14 + (i + 1) * 14 },\r\n            { x: (i + 1) * 10, y: 14 + ((i + 1) * 6) },\r\n            { x: (i + 1) * 8, y: 8 }\r\n        ]; };\r\n        var path = source === target ? loopingPath(index)\r\n            : [{ x: 0, y: Math.pow(-1, index + 1) * Math.ceil(index / 2) * 16 }];\r\n        var edgeDefaults = __assign({}, init$4(), { path: path });\r\n        var initEdgeChildren = initChildren$1(edgeDefaults, edge);\r\n        var initEdge = merge(edgeDefaults, initEdgeChildren, definition$3);\r\n        return { matrix: newMatrix, edges: __assign({}, result.edges, (_b = {}, _b[k] = initEdge, _b)) };\r\n    }, { matrix: createAdjMatrix(prevEdges), edges: {} });\r\n    return edgeInitData.edges;\r\n};\n\nvar EnumEdgeLengthType;\r\n(function (EnumEdgeLengthType) {\r\n    EnumEdgeLengthType[\"individual\"] = \"individual\";\r\n    EnumEdgeLengthType[\"symmetric\"] = \"symmetric\";\r\n    EnumEdgeLengthType[\"jaccard\"] = \"jaccard\";\r\n})(EnumEdgeLengthType || (EnumEdgeLengthType = {}));\r\nvar definition$4 = extendRecordDef({\r\n    type: AttrType.Record,\r\n    entries: __assign({ nodes: { type: AttrType.Lookup, entry: definition$2 }, edges: { type: AttrType.Lookup, entry: definition$3 }, labels: { type: AttrType.Lookup, entry: definition$1 }, size: { type: AttrType.Record, entries: {\r\n                width: { type: AttrType.Number, symbol: EnumVarSymbol.CanvasWidth },\r\n                height: { type: AttrType.Number, symbol: EnumVarSymbol.CanvasHeight }\r\n            }, keyOrder: ['width', 'height'] }, edgelengths: { type: AttrType.Record, entries: {\r\n                type: { type: AttrType.String, validValues: enumValues(EnumEdgeLengthType) },\r\n                length: { type: AttrType.Number }\r\n            }, keyOrder: ['type', 'length'] }, pan: { type: AttrType.Record, entries: {\r\n                x: { type: AttrType.Number },\r\n                y: { type: AttrType.Number }\r\n            }, keyOrder: ['x', 'y'] }, zoom: { type: AttrType.Number }, panlimit: { type: AttrType.Record, entries: {\r\n                horizontal: { type: AttrType.Number },\r\n                vertical: { type: AttrType.Number }\r\n            }, keyOrder: ['horizontal', 'vertical'] }, zoomlimit: { type: AttrType.Record, entries: {\r\n                min: { type: AttrType.Number },\r\n                max: { type: AttrType.Number }\r\n            }, keyOrder: ['min', 'max'] }, zoomkey: { type: AttrType.Boolean } }, svgMixinDefEntries),\r\n    keyOrder: ['nodes', 'edges', 'labels', 'size', 'edgelengths', 'pan', 'zoom', 'panlimit', 'zoomlimit', 'zoomkey'].concat(svgMixinDefKeys),\r\n    validVars: [EnumVarSymbol.CanvasWidth, EnumVarSymbol.CanvasHeight]\r\n}, definition);\r\nvar defaults$4 = __assign({}, defaults, { nodes: {}, edges: {}, labels: {}, size: { width: 100, height: 100 }, edgelengths: {\r\n        type: 'jaccard',\r\n        length: 70\r\n    }, pan: { x: 0, y: 0 }, zoom: 1, panlimit: { horizontal: Infinity, vertical: Infinity }, zoomlimit: { min: 0.1, max: 10 }, zoomkey: false }, svgMixinDefaults);\r\nvar labelDefaults$1 = {\r\n    align: 'middle',\r\n    pos: { x: 0, y: { m: 0.5, x: EnumVarSymbol.CanvasHeight, c: 0 } },\r\n    rotate: true,\r\n    color: COLORS.gray,\r\n    size: 20\r\n};\r\nvar animationDefaults$4 = __assign({}, animationDefaults, { nodes: { '*': animationDefaults$2 }, edges: { '*': animationDefaults$3 }, labels: { '*': animationDefaults$1 }, size: {\r\n        width: { duration: 0 },\r\n        height: { duration: 0 }\r\n    } });\r\nvar init$5 = function (canvasSize) {\r\n    return __assign({}, defaults$4, { size: { width: canvasSize[0], height: canvasSize[1] } });\r\n};\r\nvar initChildren$2 = function (prevAttr, changes) {\r\n    var newNodes = mapDict(newLookupEntries(prevAttr.nodes, changes.nodes), function (k, node, i) {\r\n        var initNode = init$2(k, Object.keys(prevAttr.nodes).length + i);\r\n        var initNodeChildren = initChildren(initNode, node);\r\n        return merge(initNode, initNodeChildren, definition$2);\r\n    });\r\n    var newEdges = initLookup(prevAttr.edges, changes.edges);\r\n    var newLabels = mapDict(newLookupEntries(prevAttr.labels, changes.labels), function (k) {\r\n        return (__assign({}, init$1(k), labelDefaults$1));\r\n    });\r\n    var nodeChildrenInit = reduceChanges(changes.nodes || {}, definition$4.entries.nodes, function (k, v) { return prevAttr.nodes[k] ? initChildren(prevAttr.nodes[k], v) : {}; });\r\n    var edgeChildrenInit = reduceChanges(changes.edges || {}, definition$4.entries.edges, function (k, v) { return prevAttr.edges[k] ? initChildren$1(prevAttr.edges[k], v) : {}; });\r\n    return {\r\n        nodes: __assign({}, nodeChildrenInit, newNodes),\r\n        edges: __assign({}, edgeChildrenInit, newEdges),\r\n        labels: __assign({}, changes.labels, newLabels)\r\n    };\r\n};\r\nvar evaluate$2 = function (evaluated, expr, changes) {\r\n    var evalChanges = getEvaluatedChanges(expr, getVariables$1(evaluated), definition$4);\r\n    var newEval = merge(evaluated, evalChanges, definition$4);\r\n    var newChanges = merge(changes, evalChanges, definition$4);\r\n    var evalNodeChanges = reduceChanges(newChanges.nodes || {}, definition$4.entries.nodes, function (k, node) { return newEval.nodes && newEval.nodes[k] && expr.nodes && expr.nodes[k]\r\n        ? evaluate$1(newEval.nodes[k], expr.nodes[k], node) : undefined; });\r\n    var evalChildChanges = { nodes: evalNodeChanges || {} };\r\n    return merge(evalChanges, evalChildChanges, definition$4);\r\n};\r\nvar getVariables$1 = function (attr) {\r\n    var _a, _b;\r\n    return __assign({}, (attr.size && attr.size.width !== undefined ? (_a = {}, _a[EnumVarSymbol.CanvasWidth] = attr.size.width / 2, _a) : {}), (attr.size && attr.size.height !== undefined ? (_b = {}, _b[EnumVarSymbol.CanvasHeight] = attr.size.height / 2, _b) : {}));\r\n};\r\nvar removeInvalidEdges = function (prevAttr, changes) {\r\n    // remove edges connecting non-existent nodes\r\n    var prevEdges = prevAttr ? prevAttr.edges : {};\r\n    var newEdges = newLookupEntries(prevEdges, changes.edges || {});\r\n    var prevNodes = prevAttr ? prevAttr.nodes : {};\r\n    var changedNodes = changes.nodes || {};\r\n    var invalidEdges = Object.entries(prevEdges).concat(Object.entries(newEdges)).reduce(function (result, _a) {\r\n        var k = _a[0], edge = _a[1];\r\n        var _b, _c;\r\n        if (changedNodes[edge.source] === null || (!prevNodes[edge.source] && !changedNodes[edge.source]))\r\n            return __assign({}, result, (_b = {}, _b[k] = null, _b));\r\n        else if (changedNodes[edge.target] === null || (!prevNodes[edge.target] && !changedNodes[edge.target]))\r\n            return __assign({}, result, (_c = {}, _c[k] = null, _c));\r\n        else\r\n            return result;\r\n    }, {});\r\n    return { edges: invalidEdges };\r\n};\n\nvar initialize = function (canvas, prevState, changes) {\r\n    var prevStateNew = prevState || init$5(getCanvasSize(canvas));\r\n    var initChildren = initChildren$2(prevStateNew, changes);\r\n    var changesNew = prevState === undefined ? merge(prevStateNew, changes, definition$4) : changes;\r\n    return merge(initChildren, changesNew, definition$4);\r\n};\r\nvar evaluate$3 = function (prevState, prevExpr, changes) {\r\n    // find non-expressions attributes\r\n    var changedNonExpr = getNonExpr(changes, definition$4);\r\n    var fullNonExprInit = merge(prevState || {}, changedNonExpr, definition$4);\r\n    // evaluate changed expressions\r\n    var changedExpr = getExpr(changes, definition$4);\r\n    var changedExprEval = evaluate$2(fullNonExprInit, changedExpr, changes);\r\n    // evaluate permanent expressions\r\n    var fullNonExpr = merge(fullNonExprInit, changedExprEval, definition$4);\r\n    var permanentExprEval = evaluate$2(fullNonExpr, prevExpr || {}, changes);\r\n    var permanentExprChanges = keepIfDifferent(permanentExprEval, prevState || {}, definition$4);\r\n    // combine all changes\r\n    var changesEval = merge(changes, changedExprEval, definition$4);\r\n    var allChangesEval = merge(permanentExprChanges, changesEval, definition$4);\r\n    return allChangesEval;\r\n};\n\nvar EnumAnimationType;\r\n(function (EnumAnimationType) {\r\n    EnumAnimationType[\"normal\"] = \"normal\";\r\n    EnumAnimationType[\"traverse\"] = \"traverse\";\r\n})(EnumAnimationType || (EnumAnimationType = {}));\r\nvar EnumAnimationEase;\r\n(function (EnumAnimationEase) {\r\n    EnumAnimationEase[\"linear\"] = \"linear\";\r\n    EnumAnimationEase[\"poly\"] = \"poly\";\r\n    EnumAnimationEase[\"poly-in\"] = \"poly-in\";\r\n    EnumAnimationEase[\"poly-out\"] = \"poly-out\";\r\n    EnumAnimationEase[\"poly-in-out\"] = \"poly-in-out\";\r\n    EnumAnimationEase[\"quad\"] = \"quad\";\r\n    EnumAnimationEase[\"quad-in\"] = \"quad-in\";\r\n    EnumAnimationEase[\"quad-out\"] = \"quad-out\";\r\n    EnumAnimationEase[\"quad-in-out\"] = \"quad-in-out\";\r\n    EnumAnimationEase[\"cubic\"] = \"cubic\";\r\n    EnumAnimationEase[\"cubic-in\"] = \"cubic-in\";\r\n    EnumAnimationEase[\"cubic-out\"] = \"cubic-out\";\r\n    EnumAnimationEase[\"cubic-in-out\"] = \"cubic-in-out\";\r\n    EnumAnimationEase[\"sin\"] = \"sin\";\r\n    EnumAnimationEase[\"sin-in\"] = \"sin-in\";\r\n    EnumAnimationEase[\"sin-out\"] = \"sin-out\";\r\n    EnumAnimationEase[\"sin-in-out\"] = \"sin-in-out\";\r\n    EnumAnimationEase[\"exp\"] = \"exp\";\r\n    EnumAnimationEase[\"exp-in\"] = \"exp-in\";\r\n    EnumAnimationEase[\"exp-out\"] = \"exp-out\";\r\n    EnumAnimationEase[\"exp-in-out\"] = \"exp-in-out\";\r\n    EnumAnimationEase[\"circle\"] = \"circle\";\r\n    EnumAnimationEase[\"circle-in\"] = \"Circle-out\";\r\n    EnumAnimationEase[\"circle-out\"] = \"circle-out\";\r\n    EnumAnimationEase[\"circle-in-out\"] = \"circle-in-out\";\r\n    EnumAnimationEase[\"elastic\"] = \"elastic\";\r\n    EnumAnimationEase[\"elastic-in\"] = \"elastic-in\";\r\n    EnumAnimationEase[\"elastic-out\"] = \"elastic-out\";\r\n    EnumAnimationEase[\"elastic-in-out\"] = \"elastic-in-out\";\r\n    EnumAnimationEase[\"back\"] = \"back\";\r\n    EnumAnimationEase[\"back-in\"] = \"back-in\";\r\n    EnumAnimationEase[\"back-out\"] = \"back-out\";\r\n    EnumAnimationEase[\"back-in-out\"] = \"back-in-out\";\r\n    EnumAnimationEase[\"bounce\"] = \"bounce\";\r\n    EnumAnimationEase[\"bounce-in\"] = \"bounce-in\";\r\n    EnumAnimationEase[\"bounce-out\"] = \"bounce-out\";\r\n    EnumAnimationEase[\"bounce-in-out\"] = \"bounce-in-out\";\r\n})(EnumAnimationEase || (EnumAnimationEase = {}));\r\nvar definition$5 = {\r\n    type: AttrType.Record,\r\n    entries: {\r\n        type: { type: AttrType.String, validValues: enumValues(EnumAnimationType) },\r\n        duration: { type: AttrType.Number },\r\n        ease: { type: AttrType.String, validValues: enumValues(EnumAnimationEase) },\r\n        linger: { type: AttrType.Number },\r\n        data: { type: AttrType.Record, entries: {\r\n                source: { type: AttrType.String }\r\n            }, keyOrder: ['source'] }\r\n    },\r\n    keyOrder: ['type', 'duration', 'ease', 'linger']\r\n};\r\nvar defaults$5 = {\r\n    type: 'normal',\r\n    duration: 0.5,\r\n    ease: 'poly',\r\n    linger: 0.5,\r\n    data: {}\r\n};\r\nvar createFullDef = function (bodyDef, endDef) {\r\n    if (isDefLookup(bodyDef)) {\r\n        var defLookup = {\r\n            type: AttrType.Lookup,\r\n            entry: createFullDef(bodyDef.entry, endDef)\r\n        };\r\n        return defLookup;\r\n    }\r\n    else if (isDefArray(bodyDef)) {\r\n        var defArray = {\r\n            type: AttrType.Array,\r\n            entry: createFullDef(bodyDef.entry, endDef)\r\n        };\r\n        return defArray;\r\n    }\r\n    else if (isDefRecord(bodyDef)) {\r\n        var entries = bodyDef.entries;\r\n        var defRecord = {\r\n            type: AttrType.Record,\r\n            entries: mapDict(entries, function (k, v) {\r\n                return createFullDef(v, endDef);\r\n            }),\r\n            keyOrder: Object.keys(entries)\r\n        };\r\n        return defRecord;\r\n    }\r\n    else\r\n        return endDef;\r\n};\n\nvar definition$6 = createFullDef(definition$4, definition$5);\r\nvar addEndpoints = function (anim, attr, def, curAnim) {\r\n    if (curAnim === void 0) { curAnim = {}; }\r\n    if (isDefPrimitive(def))\r\n        return (anim !== null ? anim : curAnim);\r\n    else {\r\n        return reduceChanges(attr, def, function (k, v, d) {\r\n            var newAnim = anim !== null && anim[k] !== undefined ? anim[k] : null;\r\n            var newCurAnim = anim !== null && anim['**'] !== undefined\r\n                ? merge(curAnim, anim['**'], definition$5) : curAnim;\r\n            return addEndpoints(newAnim, v, d, newCurAnim);\r\n        });\r\n    }\r\n};\r\nvar getRelevantChanges = function (prevAttr, changes, def) {\r\n    if (isDefPrimitive(def))\r\n        return changes;\r\n    else {\r\n        return reduceAttr(changes, def, function (k, v, d) {\r\n            var prevChild = prevAttr ? prevAttr[k] : undefined;\r\n            if (prevChild === undefined)\r\n                return undefined;\r\n            else if (isDefLookup(def) && v === null)\r\n                return prevChild;\r\n            else\r\n                return getRelevantChanges(prevChild, v, d);\r\n        });\r\n    }\r\n};\r\nvar process = function (animation, prevState, changes, changesForced) {\r\n    var changesMain = getRelevantChanges(prevState, changes, definition$4);\r\n    var changesFull = merge(changesForced, changesMain, definition$4);\r\n    var animChanges = addEndpoints(animation, changesFull, definition$4);\r\n    var animDefaultsRegular = addEndpoints({ '**': defaults$5 }, changesFull, definition$4);\r\n    var animDefaultsExtra = fillLookupEntries(animationDefaults$4, animDefaultsRegular, definition$6);\r\n    var animDefaultsFull = merge(animDefaultsRegular, animDefaultsExtra, definition$6);\r\n    return merge(animDefaultsFull, animChanges, definition$6);\r\n};\n\nvar initInfo = function () { return ({\r\n    variables: [],\r\n    path: [['canvas', AttrType.Record]]\r\n}); };\r\nvar formatPath = function (path) {\r\n    return path.reduce(function (result, _a, i) {\r\n        var name = _a[0], type = _a[1];\r\n        if (i > 0) {\r\n            var prevType = path[i - 1][1];\r\n            return result + (prevType === AttrType.Array ? \"\" + [name] : \".\" + name);\r\n        }\r\n        else\r\n            return name;\r\n    }, '');\r\n};\r\nvar preprocess$1 = function (attr, definition, info) {\r\n    var newInfo = info || initInfo();\r\n    var fullInfo = __assign({}, newInfo, { variables: newInfo.variables.concat(definition.validVars || []) });\r\n    if (isDefPrimitive(definition))\r\n        return preprocessPrimitive(attr, definition, fullInfo);\r\n    else if (isDefRecord(definition))\r\n        return preprocessRecord(attr, definition, fullInfo);\r\n    else if (isDefLookup(definition))\r\n        return preprocessLookup(attr, definition, fullInfo);\r\n    else if (isDefArray(definition))\r\n        return preprocessArray(attr, definition, fullInfo);\r\n    else\r\n        return new Error();\r\n};\r\nvar preprocessPrimitive = function (attr, def, info) {\r\n    if (def.validValues && !def.validValues.includes(attr)) {\r\n        return new Error(\"attribute '\" + formatPath(info.path) + \"' has invalid value '\" + attr + \"'\"\r\n            + (\" (valid values are [\" + def.validValues + \"])\"));\r\n    }\r\n    else {\r\n        switch (def.type) {\r\n            case AttrType.Number:\r\n                if (typeof attr === 'number')\r\n                    return attr;\r\n                else if (typeof attr === 'string')\r\n                    return parseExpr(attr, info.variables);\r\n                else if (isDict(attr))\r\n                    return parseExprObj(attr, info.variables);\r\n                else\r\n                    return new Error(\"attribute '\" + formatPath(info.path) + \"' must be a number\");\r\n            case AttrType.String:\r\n                if (typeof attr === 'string')\r\n                    return attr;\r\n                else if (typeof attr === 'number')\r\n                    return String(attr);\r\n                else\r\n                    return new Error(\"attribute '\" + formatPath(info.path) + \"' must be a string\");\r\n            case AttrType.Boolean:\r\n                if (typeof attr === 'boolean')\r\n                    return attr;\r\n                else\r\n                    return new Error(\"attribute '\" + formatPath(info.path) + \"' must be a boolean\");\r\n            default:\r\n                return new Error();\r\n        }\r\n    }\r\n};\r\nvar preprocessRecord = function (attr, definition, info) {\r\n    // allow arrays and single values instead of dictionaries\r\n    if (Array.isArray(attr) && attr.length > definition.keyOrder.length)\r\n        return new Error(\"attribute '\" + formatPath(info.path) + \"' has too many entries to match [\" + definition.keyOrder + \"]\");\r\n    var record = valueOrArrayOrDict(attr, definition.keyOrder);\r\n    var invalidEntries = Object.keys(record).filter(function (k) { return !definition.entries.hasOwnProperty(k); });\r\n    if (invalidEntries.length > 0)\r\n        return new Error(\"attribute '\" + formatPath(info.path) + \"' has unknown entry '\" + invalidEntries[0] + \"'\");\r\n    return filterError(definition.keyOrder.reduce(function (result, k) {\r\n        var _a;\r\n        var def = definition.entries[k];\r\n        if (!record.hasOwnProperty(k))\r\n            return result;\r\n        else {\r\n            var newInfo = __assign({}, info, { path: info.path.concat([[k, def.type]]) });\r\n            return __assign({}, result, (_a = {}, _a[k] = preprocess$1(record[k], def, newInfo), _a));\r\n        }\r\n    }, {}));\r\n};\r\nvar valueOrArrayOrDict = function (attr, keys) {\r\n    var _a;\r\n    if (Array.isArray(attr))\r\n        return attr.reduce(function (result, v, i) {\r\n            var _a;\r\n            return (__assign({}, result, (_a = {}, _a[keys[i]] = v, _a)));\r\n        }, {});\r\n    else if (isDict(attr))\r\n        return attr;\r\n    else\r\n        return _a = {}, _a[keys[0]] = attr, _a;\r\n};\r\nvar preprocessLookup = function (attr, definition, info) {\r\n    if (isDict(attr)) {\r\n        return filterError(map(attr, definition, function (k, v, def) {\r\n            var newInfo = __assign({}, info, { path: info.path.concat([[k, def.type]]) });\r\n            return v === null ? v : preprocess$1(v, def, newInfo);\r\n        }));\r\n    }\r\n    else\r\n        return new Error(\"attribute '\" + formatPath(info.path) + \"' must be a dictionary\");\r\n};\r\nvar preprocessArray = function (attr, definition, info) {\r\n    if (Array.isArray(attr)) {\r\n        return filterError(map(attr, definition, function (k, v, def) {\r\n            var newInfo = __assign({}, info, { path: info.path.concat([[String(k), def.type]]) });\r\n            return preprocess$1(v, def, newInfo);\r\n        }));\r\n    }\r\n    else\r\n        return new Error(\"attribute '\" + formatPath(info.path) + \"' must be an array\");\r\n};\n\nvar processUpdate = function (canvas, prevAttr, prevExpr, attrData) {\r\n    var preAttr = preprocess$1(attrData.attributes, definition$4);\r\n    if (preAttr instanceof Error)\r\n        return preAttr;\r\n    var changesForced = preAttr;\r\n    var changesInit = initialize(canvas, prevAttr, changesForced);\r\n    var changesEval = evaluate$3(prevAttr, prevExpr, changesInit);\r\n    var changes = merge(changesEval, removeInvalidEdges(prevAttr, changesEval), definition$4);\r\n    var attrMerged = (prevAttr === undefined ? changes : merge(prevAttr, changes, definition$4));\r\n    var attrRemoved = getNullEntries(changes, definition$4);\r\n    var attributes = subtractFull(attrMerged, attrRemoved, definition$4);\r\n    var exprChanged = getPermanentExpr(changesInit, definition$4);\r\n    var prevExprCleared = subtractPartial(prevExpr || {}, changesInit, definition$4);\r\n    var expressions = merge(prevExprCleared, exprChanged, definition$4);\r\n    var animation = process(attrData.animation, prevAttr, changes, changesForced);\r\n    var validateAnim = preprocess$1(animation, definition$6);\r\n    if (validateAnim instanceof Error)\r\n        return validateAnim;\r\n    return {\r\n        attributes: attributes,\r\n        changes: changes,\r\n        expressions: expressions,\r\n        animation: animation\r\n    };\r\n};\r\nvar processHighlight = function (prevState, prevExpr, attrData) {\r\n    var preAttr = preprocess$1(attrData.attributes, definition$4);\r\n    if (preAttr instanceof Error)\r\n        return preAttr;\r\n    var changes = evaluate$3(prevState, prevExpr, preAttr);\r\n    var animation = process(attrData.animation || {}, prevState, changes, changes);\r\n    var validateAnim = preprocess$1(animation, definition$6);\r\n    if (validateAnim instanceof Error)\r\n        return validateAnim;\r\n    return {\r\n        animation: animation,\r\n        changes: changes\r\n    };\r\n};\r\nvar processReset = function (prevAttr, attrData) {\r\n    var changes = { visible: false };\r\n    var animation = process(attrData.animation, prevAttr, changes, changes);\r\n    var validateAnim = preprocess$1(animation, definition$6);\r\n    if (validateAnim instanceof Error)\r\n        return validateAnim;\r\n    return {\r\n        attributes: __assign({}, prevAttr, changes),\r\n        changes: changes,\r\n        expressions: {},\r\n        animation: animation\r\n    };\r\n};\r\nvar getRenderData = function (processed) {\r\n    return {\r\n        name: 'canvas',\r\n        attr: processed.attributes,\r\n        animation: processed.animation,\r\n        changes: processed.changes\r\n    };\r\n};\n\nvar selectLabelGroup$2 = function (sel) {\r\n    return selectOrAdd(sel, '.node-labels', function (s) { return s.append('g').classed('node-labels', true); });\r\n};\r\nvar selectLabel$2 = function (sel, id) {\r\n    var renderId$$1 = renderId(id);\r\n    return selectOrAdd(sel, \"#label-\" + renderId$$1, function (s) { return s.append('g').attr('id', \"label-\" + renderId$$1); });\r\n};\r\nvar renderShape = function (selection, shape) {\r\n    selection.select('.shape').remove();\r\n    var shapeSel = selection.insert(shape, ':first-child').classed('shape', true);\r\n    if (shape === 'rect')\r\n        shapeSel.attr('rx', 4).attr('ry', 4);\r\n    return shapeSel;\r\n};\r\nvar renderSize = function (selection, sizeData, shape) {\r\n    var width = getEntry(sizeData, 'width');\r\n    var height = getEntry(sizeData, 'height');\r\n    switch (shape) {\r\n        case 'circle':\r\n            renderSvgAttr(selection, 'r', function (v) { return v; }, width);\r\n            break;\r\n        case 'rect':\r\n            renderSvgAttr(selection, 'width', function (v) { return v * 2; }, width);\r\n            renderSvgAttr(selection, 'height', function (v) { return v * 2; }, height);\r\n            renderSvgAttr(selection, 'x', function (v) { return -v; }, __assign({}, width, { name: width.name + '-pos' }));\r\n            renderSvgAttr(selection, 'y', function (v) { return -v; }, __assign({}, height, { name: height.name + '-pos' }));\r\n            break;\r\n        case 'ellipse':\r\n            renderSvgAttr(selection, 'rx', function (v) { return v; }, width);\r\n            renderSvgAttr(selection, 'ry', function (v) { return v; }, height);\r\n            break;\r\n    }\r\n};\r\nvar preprocess$2 = function (renderData) {\r\n    var shapeUpdateKeys = definition$2.keyOrder.filter(function (k) { return k !== 'pos' && k !== 'visible' && k !== 'labels'; });\r\n    return hasChanged(getEntry(renderData, 'shape'))\r\n        ? markKeysForUpdate(renderData, shapeUpdateKeys) : renderData;\r\n};\r\nvar render$4 = function (selection, renderDataInit) {\r\n    var renderData = preprocess$2(renderDataInit);\r\n    render(selection, getEntry(renderData, 'shape'), function (s, shape) { return renderShape(selection, shape); });\r\n    var shapeSelection = selection.select('.shape');\r\n    var labelGroup = selectLabelGroup$2(selection);\r\n    renderElementLookup(function (k) { return selectLabel$2(labelGroup, k); }, getEntry(renderData, 'labels'), render$2);\r\n    renderSvgAttr(shapeSelection, 'fill', function (v) { return parseColor(v); }, getEntry(renderData, 'color'));\r\n    renderSize(shapeSelection, getEntry(renderData, 'size'), getEntry(renderData, 'shape').attr);\r\n    renderSvgAttrMixin(shapeSelection, renderData);\r\n};\n\nvar render$5 = function (selection, renderData) {\r\n    renderSvgAttr(selection, 'width', function (v) { return v; }, getEntry(getEntry(renderData, 'size'), 'width'));\r\n    renderSvgAttr(selection, 'height', function (v) { return v; }, getEntry(getEntry(renderData, 'size'), 'height'));\r\n    // add an invisible rectangle to fix zooming in Safari\r\n    if (isSafari())\r\n        selectSafariFix(selection);\r\n    var canvasInner = selectCanvasInner(selection);\r\n    var labelGroup = selectLabelGroup(canvasInner);\r\n    var edgeGroup = selectEdgeGroup(canvasInner);\r\n    var nodeGroup = selectNodeGroup(canvasInner);\r\n    renderElementLookup(function (k) { return selectNode(nodeGroup, k); }, getEntry(renderData, 'nodes'), render$4);\r\n    renderElementLookup(function (k) { return selectEdge(edgeGroup, k); }, getEntry(renderData, 'edges'), render$3);\r\n    renderElementLookup(function (k) { return selectLabel(labelGroup, k); }, getEntry(renderData, 'labels'), render$2);\r\n    // re-render svg attributes when size changes\r\n    var updatedRenderData = hasChanged(getEntry(renderData, 'size'))\r\n        ? markKeysForUpdate(renderData, ['svgattr']) : renderData;\r\n    renderSvgAttrMixin(selection, updatedRenderData);\r\n};\r\nfunction renderCanvas(canvas, renderData) {\r\n    renderElement(function () { return selectCanvas(canvas); }, renderData, render$5);\r\n}\n\nvar updatePanZoomLimit = function (selection, renderData, behavior) {\r\n    if (hasChanged(getEntry(renderData, 'zoomlimit'))\r\n        || hasChanged(getEntry(renderData, 'panlimit'))\r\n        || hasChanged(getEntry(renderData, 'zoomkey'))\r\n        || behavior === undefined) {\r\n        var onZoom = function () {\r\n            selectCanvasInner(selection)\r\n                .attr('transform', event ? event.transform : '');\r\n        };\r\n        var zoomFilter_1 = function (requiresKey) {\r\n            if (event && event.type === 'wheel' && requiresKey) {\r\n                return event.ctrlKey || event.metaKey;\r\n            }\r\n            else\r\n                return true;\r\n        };\r\n        var panH = renderData.attr.panlimit.horizontal;\r\n        var panV = renderData.attr.panlimit.vertical;\r\n        var zoomKey_1 = renderData.attr.zoomkey;\r\n        var newBehavior = zoom()\r\n            .translateExtent([[-panH, -panV], [panH, panV]])\r\n            .scaleExtent([renderData.attr.zoomlimit.min, renderData.attr.zoomlimit.max])\r\n            .on('zoom', onZoom)\r\n            .filter(function () { return zoomFilter_1(zoomKey_1); });\r\n        selection.call(newBehavior);\r\n        return newBehavior;\r\n    }\r\n    else\r\n        return behavior;\r\n};\r\nvar updatePanZoom = function (selection, renderData, behavior) {\r\n    var zoomBehavior = updatePanZoomLimit(selection, renderData, behavior ? behavior.zoom : undefined);\r\n    return __assign({}, behavior, { zoom: zoomBehavior });\r\n};\r\nvar renderPanZoom = function (selection, renderData, behavior) {\r\n    var panZoomData = combine({\r\n        pos: flatten(getEntry(renderData, 'pan')),\r\n        scale: getEntry(renderData, 'zoom'),\r\n        size: flatten(getEntry(renderData, 'size'))\r\n    });\r\n    render(selection, panZoomData, function (sel, panZoom) {\r\n        var panCenter = [\r\n            panZoom.size.width / 2 - panZoom.pos.x * panZoom.scale,\r\n            panZoom.size.height / 2 + panZoom.pos.y * panZoom.scale\r\n        ];\r\n        var transform = zoomIdentity.translate(panCenter[0], panCenter[1]).scale(panZoom.scale);\r\n        return sel.call(behavior.zoom.transform, transform);\r\n    });\r\n};\r\nvar update$1 = function (canvas, renderData, behavior) {\r\n    return updatePanZoom(selectCanvas(canvas), renderData, behavior);\r\n};\r\nvar render$6 = function (canvas, renderData, behavior) {\r\n    renderPanZoom(selectCanvas(canvas), renderData, behavior);\r\n};\n\n/* tslint:disable */\r\nvar _dragging = false;\r\nvar _mouseover = false;\r\n/* tslint:enable */\r\nvar enableHover = function (canvasSel, selection, onHover) {\r\n    selection.on('mouseover', function () {\r\n        _mouseover = true;\r\n        if (!_dragging) {\r\n            canvasSel.style('cursor', 'pointer');\r\n            onHover(true);\r\n        }\r\n    });\r\n    selection.on('mouseout', function () {\r\n        _mouseover = false;\r\n        if (!_dragging) {\r\n            canvasSel.style('cursor', null);\r\n            onHover(false);\r\n        }\r\n    });\r\n};\r\nvar enableDrag = function (canvasSel, nodeSel, colaLayout, nodeLayout) {\r\n    nodeSel.call(drag().subject(function () {\r\n        var origin = Layout.dragOrigin(nodeLayout);\r\n        return __assign({}, origin, { y: -origin.y });\r\n    }).on('start', function () {\r\n        _dragging = true;\r\n        canvasSel.style('cursor', 'pointer');\r\n        Layout.dragStart(nodeLayout);\r\n    }).on('drag', function () {\r\n        Layout.drag(nodeLayout, { x: event.x, y: -event.y });\r\n        colaLayout.resume();\r\n    }).on('end', function () {\r\n        _dragging = false;\r\n        if (!_mouseover)\r\n            canvasSel.style('cursor', null);\r\n        Layout.dragEnd(nodeLayout);\r\n    }));\r\n};\r\nvar disableDrag = function (selection) {\r\n    selection.on('.drag', undefined);\r\n};\r\nvar enableClick = function (selection, onClick) {\r\n    selection.on('click', function () {\r\n        if (event.defaultPrevented)\r\n            return;\r\n        onClick();\r\n    });\r\n};\n\nvar registerNodeHover = function (canvas, renderData, onHover) {\r\n    var canvasSel = selectCanvas(canvas);\r\n    var nodeGroup = selectNodeGroup(selectCanvasInner(canvasSel));\r\n    renderVisibleLookup(getEntry(renderData, 'nodes'), function (k, nodeDataInit) {\r\n        var sel = selectNode(nodeGroup, k);\r\n        var nodeData = preprocess$2(preprocess(nodeDataInit));\r\n        onChanged(sel, getEntry(nodeData, 'hover'), function (s, nodeHover) {\r\n            var hoverFn = nodeHover.attr\r\n                ? function (entered) { return onHover(k, entered); }\r\n                : function () { };\r\n            enableHover(canvasSel, s, hoverFn);\r\n        });\r\n    });\r\n};\r\nvar registerNodeClick = function (canvas, renderData, onClick) {\r\n    var nodeGroup = selectNodeGroup(selectCanvasInner(selectCanvas(canvas)));\r\n    renderVisibleLookup(getEntry(renderData, 'nodes'), function (k, nodeDataInit) {\r\n        var sel = selectNode(nodeGroup, k);\r\n        var nodeData = preprocess$2(preprocess(nodeDataInit));\r\n        onChanged(sel, getEntry(nodeData, 'click'), function (s, nodeClick) {\r\n            var clickFn = nodeClick.attr\r\n                ? function () { return onClick(k); }\r\n                : function () { };\r\n            enableClick(s, clickFn);\r\n        });\r\n    });\r\n};\n\nvar renderWithLayout = function (canvas, renderData, layoutState) {\r\n    var canvasSel = selectCanvas(canvas);\r\n    var nodeGroup = selectNodeGroup(selectCanvasInner(canvasSel));\r\n    renderVisibleLookup(getEntry(renderData, 'nodes'), function (k, nodeData) {\r\n        var selection = selectNode(nodeGroup, k);\r\n        var draggable = getEntry(nodeData, 'draggable').attr;\r\n        if (draggable)\r\n            enableDrag(canvasSel, selection, layoutState.cola, layoutState.nodes[k]);\r\n        else\r\n            disableDrag(selection);\r\n    });\r\n};\r\nvar renderWithTick = function (canvas, renderData, tick) {\r\n    // changing node size requires the live layout function to be called continuously,\r\n    // so that connected edges are animated as well\r\n    var canvasSel = selectCanvas(canvas);\r\n    var nodeGroup = selectNodeGroup(selectCanvasInner(canvasSel));\r\n    renderVisibleLookup(getEntry(renderData, 'nodes'), function (k, nodeDataInit) {\r\n        var nodeData = preprocess$2(preprocess(nodeDataInit));\r\n        var selection = selectNode(nodeGroup, k);\r\n        var width = getEntry(getEntry(nodeData, 'size'), 'width');\r\n        var shape = getEntry(nodeData, 'shape');\r\n        var height = shape.attr === 'circle' ? __assign({}, width, { name: 'height' }) : getEntry(getEntry(nodeData, 'size'), 'height');\r\n        render(selection, width, function (liveSel, w) {\r\n            if (isTransition(liveSel))\r\n                return liveSel.attr('_width', w).tween(name, function () { return function () { tick(); }; });\r\n            else\r\n                return liveSel.attr('_width', w);\r\n        });\r\n        render(selection, height, function (liveSel, h) {\r\n            if (isTransition(liveSel))\r\n                return liveSel.attr('_height', h).tween(name, function () { return function () { tick(); }; });\r\n            else\r\n                return liveSel.attr('_height', h);\r\n        });\r\n    });\r\n};\n\nvar dispatchError = function (message, type) {\r\n    return ({ type: EnumReceiveType.error, data: { message: message, type: type } });\r\n};\r\nvar dispatchClick = function (nodeId) {\r\n    return ({ type: EnumReceiveType.click, data: { id: nodeId } });\r\n};\r\nvar dispatchHover = function (nodeId, entered) {\r\n    return ({ type: EnumReceiveType.hover, data: { id: nodeId, entered: entered } });\r\n};\r\nvar executeReset = function (context, event$$1) {\r\n    var state = context.state;\r\n    if (state.attributes === undefined)\r\n        return state;\r\n    var processed = processReset(state.attributes, event$$1.data);\r\n    if (processed instanceof Error) {\r\n        context.listener(dispatchError(processed.message, EnumErrorType.attribute));\r\n        return state;\r\n    }\r\n    var renderData = getRenderData(processed);\r\n    renderCanvas(state.canvas, renderData);\r\n    return __assign({}, state, { expressions: undefined, attributes: undefined, layout: reset(state.layout), renderBehavior: undefined });\r\n};\r\nvar render$7 = function (canvas, renderData, tick, layoutState) {\r\n    renderCanvas(canvas, renderData);\r\n    if (renderData.attr.visible === false)\r\n        return;\r\n    renderWithLayout(canvas, renderData, layoutState);\r\n    renderWithTick(canvas, renderData, tick);\r\n    updateCanvas(canvas, renderData.attr, layoutState);\r\n};\r\nvar renderBehavior = function (canvas, renderData, behavior) {\r\n    if (renderData.attr.visible === false)\r\n        return behavior;\r\n    var newBehavior = update$1(canvas, renderData, behavior);\r\n    render$6(canvas, renderData, newBehavior);\r\n    return newBehavior;\r\n};\r\nvar executeUpdate = function (context, event$$1) {\r\n    var state = context.state;\r\n    if (event$$1.data.attributes === null)\r\n        return executeReset(context, event$$1);\r\n    var processed = processUpdate(state.canvas, state.attributes, state.expressions, event$$1.data);\r\n    if (processed instanceof Error) {\r\n        context.listener(dispatchError(processed.message, EnumErrorType.attribute));\r\n        return state;\r\n    }\r\n    var renderData = preprocess(getRenderData(processed));\r\n    var layoutState = update(state.layout, processed.attributes, processed.changes);\r\n    render$7(state.canvas, renderData, context.tick, layoutState);\r\n    var newBehavior = renderBehavior(state.canvas, renderData, state.renderBehavior);\r\n    if (processed.attributes.visible) {\r\n        var clickFn = function (n) { return context.listener(dispatchClick(n)); };\r\n        var hoverFn = function (n, h) { return context.listener(dispatchHover(n, h)); };\r\n        registerNodeClick(state.canvas, renderData, clickFn);\r\n        registerNodeHover(state.canvas, renderData, hoverFn);\r\n    }\r\n    return __assign({}, state, { expressions: processed.expressions, attributes: processed.attributes, layout: layoutState, renderBehavior: newBehavior });\r\n};\r\nvar executeHighlight = function (context, event$$1) {\r\n    var state = context.state;\r\n    var processed = processHighlight(state.attributes, state.expressions, event$$1.data);\r\n    if (processed instanceof Error) {\r\n        context.listener(dispatchError(processed.message, EnumErrorType.attribute));\r\n        return;\r\n    }\r\n    var renderDataInit = {\r\n        name: 'canvas',\r\n        attr: state.attributes,\r\n        animation: processed.animation,\r\n        highlight: processed.changes\r\n    };\r\n    var renderData = preprocess(renderDataInit);\r\n    render$7(state.canvas, renderData, context.tick, state.layout);\r\n    renderBehavior(state.canvas, renderData, state.renderBehavior);\r\n};\r\nvar executeEvent = function (context, event$$1) {\r\n    if (event$$1.type === EnumDispatchType.broadcast) {\r\n        context.listener({\r\n            type: EnumReceiveType.broadcast,\r\n            data: { message: event$$1.data.message }\r\n        });\r\n        return context.state;\r\n    }\r\n    else if (event$$1.type === EnumDispatchType.update) {\r\n        return executeUpdate(context, event$$1);\r\n    }\r\n    else if (event$$1.type === EnumDispatchType.highlight) {\r\n        executeHighlight(context, event$$1);\r\n        return context.state;\r\n    }\r\n    else\r\n        return context.state;\r\n};\n\nvar init$6 = function (canvas, receiveEvent, tick) {\r\n    return {\r\n        canvas: canvas,\r\n        scheduler: init(receiveEvent),\r\n        expressions: undefined,\r\n        attributes: undefined,\r\n        layout: init$3(tick),\r\n        renderBehavior: undefined\r\n    };\r\n};\r\nvar client = function (canvas) {\r\n    var buildClient = function (self) { return ({\r\n        state: undefined,\r\n        listener: undefined,\r\n        setState: function (state) {\r\n            /* tslint:disable */\r\n            self().state = state;\r\n            /* tslint:enable */\r\n        },\r\n        onReceive: function (fn) {\r\n            /* tslint:disable */\r\n            self().listener = fn;\r\n            /* tslint:enable */\r\n        },\r\n        dispatch: function (event$$1) {\r\n            var task = schedule(self().state.scheduler, event$$1.queue, event$$1);\r\n            self().setState(__assign({}, self().state, { scheduler: task.state }));\r\n            task.execute();\r\n        },\r\n        receiveEvent: function (event$$1, queue) {\r\n            var schedulerState = self().state.scheduler;\r\n            var task = execute(schedulerState, queue, event$$1, self().executeEvent);\r\n            self().setState(__assign({}, self().state, { scheduler: task.state }));\r\n            task.execute();\r\n        },\r\n        executeEvent: function (event$$1) {\r\n            var executeContext = {\r\n                state: self().state,\r\n                listener: self().listener,\r\n                tick: self().tick\r\n            };\r\n            var state = executeEvent(executeContext, event$$1);\r\n            self().setState(state);\r\n            self().tick();\r\n        },\r\n        tick: function () {\r\n            var state = self().state;\r\n            if (state !== undefined && state.attributes !== undefined)\r\n                updateCanvas(canvas, state.attributes, state.layout);\r\n        }\r\n    }); };\r\n    var newClient = buildClient(function () { return newClient; });\r\n    newClient.setState(init$6(canvas, newClient.receiveEvent, newClient.tick));\r\n    return newClient;\r\n};\n\nvar builder$5 = function (context, self) { return ({\r\n    dispatch: function (event$$1) {\r\n        context.realClient.dispatch(event$$1);\r\n    },\r\n    subscribe: function (listener) {\r\n        context.subscriptions.push(listener);\r\n        context.realClient.onReceive(function (event$$1) {\r\n            context.subscriptions.forEach(function (fn) { return fn(event$$1); });\r\n        });\r\n    },\r\n    canvas: function () {\r\n        return canvasSelection(context.realCanvas, self());\r\n    }\r\n}); };\r\nvar client$1 = function (canvas) {\r\n    var context = {\r\n        realClient: client(canvas),\r\n        realCanvas: canvas,\r\n        subscriptions: []\r\n    };\r\n    return build(builder$5, context);\r\n};\n\n/**\r\n * Creates a new [[Client]], responsible for rendering the network, storing application state, and dispatching and receiving\r\n * events. The network can be rendered in any HTML element on the page (preferably a `div`), or an `Element` object.\r\n * A client should only be used directly if complete control over event handling is required.\r\n *\r\n * @param output - The `id` attribute of an element in which to render the network, or an `Element` object.\r\n *\r\n * @return A new [[Client]].\r\n */\r\nvar client$2 = function (output) {\r\n    return client$1(output);\r\n};\r\n/**\r\n * Creates a new [[CanvasSelection]], providing an interface to the network's graphics. The network can be rendered in\r\n * any HTML element on the page (preferably a `div`), or an `Element` object. This will automatically initialize a\r\n * [[Client]] and return its corresponding interface.\r\n *\r\n * @param output - The `id` attribute of an element on the HTML page to use as the canvas, or an `Element` object.\r\n *\r\n * @return A new [[CanvasSelection]].\r\n */\r\nvar canvas = function (output) {\r\n    return client$2(output).canvas();\r\n};\n\nexport { client$2 as client, canvas, canvasSelection };\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n"],"sourceRoot":""}